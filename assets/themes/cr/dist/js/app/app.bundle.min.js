!function e(t,i,n){function o(r,s){if(!i[r]){if(!t[r]){var l="function"==typeof require&&require;if(!s&&l)return l(r,!0);if(a)return a(r,!0);throw new Error("Cannot find module '"+r+"'")}var c=i[r]={exports:{}};t[r][0].call(c.exports,function(e){return o(t[r][1][e]||e)},c,c.exports,e,t,i,n)}return i[r].exports}for(var a="function"==typeof require&&require,r=0;r<n.length;r++)o(n[r]);return o}({1:[function(e,t,i){t.exports=Marionette.Controller.extend({initialize:function(){function e(){app.vent.trigger("resize:trigger"),t()}function t(){app.cmd.execute("loader:preload:core:add",i)}function i(e){$.getJSON(app.paths.core+app.versionQuery,function(t){app.data=t,void 0!==e&&e()})}function n(){window.device=_.extend(window.device,getDevice(!0))}function o(){app.cmd.execute("loader:preload:start")}function a(){app.vent.off("app:preload:complete",a),r(),s(),c()}function r(){app.Settings.start(),app.UI.start()}function s(){app.NotFound.start({region:app.notFoundRegion,data:app.data.sections.notfound}),app.Home.start({region:app.homeRegion,data:app.data.sections.home}),app.Collections.start({region:app.collectionsRegion,data:app.data.sections.collections}),app.Collection.start({region:app.collectionRegion,data:app.data.sections.collection}),app.CollectionItem.start({region:app.collectionItemRegion,data:app.data.sections["collection-item"]}),app.About.start({region:app.aboutRegion,data:app.data.sections.about}),app.Media.start({region:app.mediaRegion,data:app.data.sections.media}),app.Events.start({region:app.eventsRegion,data:app.data.sections.events}),app.Affiliations.start({region:app.affiliationsRegion,data:app.data.sections.affiliations}),app.Dealers.start({region:app.dealersRegion,data:app.data.sections.dealers}),app.Contact.start({region:app.contactRegion,data:app.data.sections.contact})}function l(){app.vent.trigger("app:ui:show")}function c(){app.cmd.execute("router:start")}var d=0,u={$el:$("#app"),data:[],cmd:app.commands,req:app.reqres,version:appVer,win:{scrollTop:0,footerHeight:0,headerHeight:0,width:$(window).width(),height:$(window).height()},layout:{reducedThreshold:{width:768,height:500},reduced:!1},paths:{base:pagePath,img:pagePath+"dist/img/",core:pagePath+"dist/data/app.php"},startQuery:location.search,versionQuery:""!==location.search?location.search+"&v="+appVer:"?v="+appVer,getUID:function(){return d++}};(function(){if("chrome"===device.browser||"firefox"===device.browser){var e=["%c Citak Website by Adam Hartwig %c @ImAdamTM %c www.adamhartwig.co.uk","display:block; padding:5px; background: #222; line-height:40px; color:#fff;","display:block; padding:5px; background: #4099FF; line-height:40px; color:#fff;","display:block; padding:5px; background: #E8E7E7; line-height:40px;"];console.log.apply(console,e)}})(),_.extend(app,u),app.addRegions({viewsRegion:$(".app-views",app.$el),headerRegion:$(".app-header",app.$el),footerRegion:$(".app-footer",app.$el),dashboardRegion:$(".app-dashboard",app.$el),barRegion:$(".app-bar",app.$el),loaderRegion:$(".app-loader",app.$el),navBoxRegion:$(".app-navbox",app.$el),homeRegion:$(".app-home",app.$el),collectionsRegion:$(".app-collections",app.$el),collectionRegion:$(".app-collection",app.$el),collectionItemRegion:$(".app-collection-item",app.$el),aboutRegion:$(".app-about",app.$el),mediaRegion:$(".app-media",app.$el),eventsRegion:$(".app-events",app.$el),affiliationsRegion:$(".app-affiliations",app.$el),dealersRegion:$(".app-dealers",app.$el),contactRegion:$(".app-contact",app.$el),notFoundRegion:$(".app-not-found",app.$el)}),app.addInitializer(e),app.on("before:start",n).on("start",o),app.vent.on("app:preload:complete",a).on("app:section:shown",l)}})},{}],2:[function(e,t,i){window.app=new Backbone.Marionette.Application,new(e("./base")),e("./modules/utils/Utils"),e("./modules/loader/Loader"),e("./modules/router/Router"),e("./modules/dimensions/Dimensions"),e("./modules/loader/Loader"),app.Utils.start(),app.Loader.start(),app.Router.start(),app.Dimensions.start(),e("./modules/settings/Settings"),e("./modules/ui/UI"),e("./modules/section/home/Home"),e("./modules/section/collections/Collections"),e("./modules/section/collection/Collection"),e("./modules/section/collection-item/CollectionItem"),e("./modules/section/about/About"),e("./modules/section/media/Media"),e("./modules/section/events/Events"),e("./modules/section/affiliations/Affiliations"),e("./modules/section/dealers/Dealers"),e("./modules/section/contact/Contact"),e("./modules/section/not-found/NotFound"),app.start()},{"./base":1,"./modules/dimensions/Dimensions":3,"./modules/loader/Loader":4,"./modules/router/Router":14,"./modules/section/about/About":17,"./modules/section/affiliations/Affiliations":27,"./modules/section/collection-item/CollectionItem":38,"./modules/section/collection/Collection":66,"./modules/section/collections/Collections":86,"./modules/section/contact/Contact":99,"./modules/section/dealers/Dealers":109,"./modules/section/events/Events":126,"./modules/section/home/Home":137,"./modules/section/media/Media":152,"./modules/section/not-found/NotFound":163,"./modules/settings/Settings":178,"./modules/ui/UI":179,"./modules/utils/Utils":235}],3:[function(e,t,i){t.exports=app.module("Dimensions",{startWithParent:!1,define:function(e,t,i,n,o,a){function r(){t.vent.on("resize:trigger",d),t.vent.on("scroll:trigger",f),o(window).on("scroll.app",a.throttle(s,2)),o(window).on("resize.app",function(){t.vent.trigger("resize:trigger")}),o(window).trigger("resize.app"),o("#app").on(device.over,"a",l).on(device.out,"a",c)}function s(){t.vent.trigger("scroll:trigger")}function l(){o(this).addClass("hover")}function c(){o(this).removeClass("hover")}function d(){p(),t.vent.trigger("resize:app"),device.touch&&u()}function u(){clearTimeout(h.throttleRefresh),h.throttleRefresh=setTimeout(function(){p()},h.throttleRefreshDelay)}function p(){o("body").css({overflow:"hidden"}),o(".app-views",t.$el).css({minHeight:0}),t.win.width=o(window).outerWidth(),t.win.height=o(window).height(),t.win.footerHeight=Math.max(120,o("footer").outerHeight(!0)),t.win.width<=t.layout.reducedThreshold.width||t.win.height<=t.layout.reducedThreshold.height?t.layout.reduced||(t.layout.reduced=!0,o("body").removeClass("full").addClass("reduced"),t.vent.trigger("layout:changed")):t.layout.reduced&&(t.layout.reduced=!1,o("body").removeClass("reduced").addClass("full"),t.vent.trigger("layout:changed")),o(".app-views",t.$el).css({minHeight:t.win.height+"px"}),t.vent.trigger("resize:app"),o("body").css({overflow:"visible"})}function f(){t.win.documentHeight=o(document).height(),t.win.scrollTop=o(window).scrollTop(),t.win.scrollBottom=t.win.documentHeight-t.win.height-t.win.scrollTop,t.win.footerScrollBottom=t.win.documentHeight-t.win.height-t.win.scrollTop-t.win.footerHeight,t.vent.trigger("scroll:app")}var h={throttleRefresh:null,throttleRefreshDelay:300};e.addInitializer(function(){r()})}})},{}],4:[function(e,t,i){e("./display/Display"),e("./loaders/Preloader"),e("./loaders/SilentLoader"),t.exports=app.module("Loader",{startWithParent:!1,define:function(e,t,i,n,o,a){function r(){a.each(s.submodules,function(e,t){e.start()})}var s=e;s.addInitializer(function(){r()})}})},{"./display/Display":5,"./loaders/Preloader":12,"./loaders/SilentLoader":13}],5:[function(e,t,i){var n=e("./views/templates/LayoutTemplate.html"),o=e("./models/LayoutModel"),a=e("./models/InterfaceModel"),r=e("./views/LayoutView"),s=e("./views/InterfaceView");t.exports=app.module("Loader.Display",{startWithParent:!1,define:function(e,t,i,l,c,d){function u(){d.extend(W,{region:t.loaderRegion}),O=W.region.$el}function p(){t.vent.on("app:loader:ui:show",g).on("app:loader:ui:start",x).on("app:loader:ui:hide",D)}function f(){V=new r({template:d.template(n),model:new o}),W.region.show(V),V.addRegions({interfaceRegion:c(".load-interface",V.$el)}),q=c(".loader-central",O)}function h(){B=new s({model:new a(d.extend(appBrand.preload,{src:device.retina?appBrand.preload.r:appBrand.preload.s}))}),V.interfaceRegion.show(B)}function v(){A.display=c(".loader-display",O),A.gauge=c(".gauge",O)}function m(){F.current=0,F.percentage=0,F.targetPercentage=0,TweenLite.killDelayedCallsTo(z),TweenLite.killDelayedCallsTo(M)}function g(){m(),w(y)}function w(e){if(N)e();else{var i=t.request("utils:loader:image:load",{src:device.retina?appBrand.preload.r:appBrand.preload.s});i.on("complete",function(t){e()}).on("error",function(){e()}),i.load()}}function y(){t.cmd.execute("loader:preload:ui:ready"),T(),$()}function x(e){W.status.active||(b(e),I())}function b(e){F.total=e.total}function T(){O.show(),TweenLite.set(A.display,{opacity:0,force3D:t.force3D}),TweenLite.to(A.display,.3,{opacity:1,force3D:t.force3D})}function D(){TweenLite.killDelayedCallsTo(z),P(),TweenLite.killTweensOf(A.display),TweenLite.to(A.display,.3,{delay:.4,opacity:0,force3D:t.force3D,onComplete:function(){z()}})}function $(){t.vent.on("app:loader:preload:task:complete",L).on("app:loader:preload:complete",k).on("resize:app",H),H(!0)}function C(){t.vent.on("app:loader:preload:task:complete",L).on("app:loader:preload:complete",k).off("resize:app",H)}function L(e,t){F.targetPercentage=e/t*100}function k(){F.targetPercentage=100}function M(){}function z(){C(),t.vent.trigger("app:preload:complete"),O.hide(),W.status.active=!1}function I(){clearInterval(E.interval),E.interval=setInterval(R,E.time)}function P(){clearInterval(E.interval)}function R(){F.percentage<F.targetPercentage&&F.percentage++,TweenLite.set(A.gauge,{width:F.percentage+"%",force3D:t.force3D}),F.percentage>=100&&S()}function S(){D()}function H(e){_.height=q.outerHeight(!0),_.offset=Math.round(.5*t.win.height-.5*_.height),TweenLite.to(q,e?0:.5,{y:_.offset})}var V,B,O,q,W=e,E={interval:null,time:10},N=!1,_={height:0,offset:0},F={total:0,current:0,percentage:0,targetPercentage:0},A={};W.status={active:!1},W.addInitializer(function(e){u(),p(),f(),h(),v()})}})},{"./models/InterfaceModel":6,"./models/LayoutModel":7,"./views/InterfaceView":8,"./views/LayoutView":9,"./views/templates/LayoutTemplate.html":11}],6:[function(e,t,i){t.exports=Backbone.Model.extend({defaults:{w:100,h:100,src:""}})},{}],7:[function(e,t,i){t.exports=Backbone.Model.extend({defaults:{}})},{}],8:[function(e,t,i){var n=e("./templates/InterfaceTemplate.html");t.exports=Backbone.Marionette.ItemView.extend({className:"view",attributes:{role:"progressbar"},template:_.template(n),tagName:"div",initalize:function(e){},onRender:function(){}})},{"./templates/InterfaceTemplate.html":10}],9:[function(e,t,i){t.exports=Backbone.Marionette.LayoutView.extend({className:"container"})},{}],10:[function(e,t,i){t.exports='<div class="bar-display" style="width:<%= w %>px; height:<%= h %>px;"><div class="base"> <img src="<%= src %>" style="width:<%= w %>px; height:<%= h %>px;"/></div><div class="bar"><div class="gauge"> <img src="<%= src %>" style="width:<%= w %>px; height:<%= h %>px;"/></div></div></div>'},{}],11:[function(e,t,i){t.exports='<div class="loader-central"><div class="loader-display"><div class="load-interface"></div><div class="load-title"></div></div></div>'},{}],12:[function(e,t,i){t.exports=app.module("Loader.Preloader",{startWithParent:!1,define:function(e,t,i,n,o,a){function r(){t.cmd.setHandler("loader:preload:core:add",s),t.cmd.setHandler("loader:preload:prerequisites:add",l),t.cmd.setHandler("loader:preload:add",c),t.cmd.setHandler("loader:preload:start",d),t.cmd.setHandler("loader:preload:ui:ready",u)}function s(e){g.list.push(a.extend(e,{loaded:!1}))}function l(e){w.list.push(a.extend(e,{loaded:!1}))}function c(e){y.list.push(a.extend(e,{loaded:!1}))}function d(){t.vent.trigger("app:loader:ui:show")}function u(){t.vent.trigger("loader:preload:started"),m.core=t.request("utils:queue:create",{queue:m.core,list:g.list,sync:!0}),m.core.on("complete",p),m.core.start()}function p(){t.vent.trigger("app:loader:core:complete"),m.prerequisites=t.request("utils:queue:create",{queue:m.prerequisites,list:w.list,sync:!0}),m.prerequisites.on("complete",f),m.prerequisites.start()}function f(){t.vent.trigger("app:loader:prerequisites:complete"),t.vent.trigger("app:loader:ui:start",{total:y.list.length}),t.vent.trigger("app:loader:preload:task:counters:set",y.list.length),m.preload=t.request("utils:queue:create",{queue:m.preload,list:y.list,sync:!0}),m.preload.on("task:complete",h).on("complete",v),m.preload.start()}function h(e,i){t.vent.trigger("app:loader:preload:task:complete",e,i)}function v(){t.vent.trigger("app:loader:preload:complete")}var m={core:null,prerequisites:null,preload:null},g={list:[]},w={list:[]},y={list:[]};e.addInitializer(function(){r()})}})},{}],13:[function(e,t,i){t.exports=app.module("Loader.SilentLoader",{startWithParent:!1,define:function(e,t,i,n,o,a){function r(){t.cmd.setHandler("loader:silent:add",s),t.vent.on("app:loader:preload:complete",l)}function s(e){u.list.push(a.extend(e,{loaded:!1}))}function l(){t.vent.trigger("loader:silent:started"),d.silent=t.request("utils:queue:create",{queue:d.silent,list:u.list,sync:!0}),d.silent.on("complete",c),d.silent.start()}function c(){t.vent.trigger("app:loader:silent:complete")}var d={silent:null},u={list:[]};e.addInitializer(function(){r()})}})},{}],14:[function(e,t,i){var n=e("./route/Routes");t.exports=app.module("Router",{startWithParent:!1,define:function(e,t,i,o,a,r){function s(){z=new n}function l(){t.cmd.setHandler("router:start",c),t.cmd.setHandler("router:route:register",d),t.cmd.setHandler("router:route:set",f),t.cmd.setHandler("router:route:set:delayed",u),t.cmd.setHandler("router:pid:set",x),t.cmd.setHandler("router:page:title:set",b),t.cmd.setHandler("router:querystring:set",k),t.cmd.setHandler("router:querystring:parameters:get",M),z.on("route",h)}function c(){i.history&&i.history.start({pushState:!0})}function d(e){e.isHome&&(R.home=e.id),z.controller.addRoute(e),z.appRoute(e.route,e.id)}function u(e){TweenLite.killDelayedCallsTo(p),TweenLite.delayedCall(e.delay,p,[e.path])}function p(e){e.search(window.location.origin)>-1&&(e=e.replace(window.location.origin,"")),f(e)}function f(e){i.history.navigate(e,{trigger:!0})}function h(e,t){var i=y(t);L(),v(e,i)}function v(e,n){if(R.current=e,w(e),TweenLite.killDelayedCallsTo(p),t.vent.trigger("router:route:changed"),R.previousFragment===i.history.fragment)return!1;R.previous===R.current?g({id:e,path:n,same:!0}):null!==R.previous?m({id:R.previous,next:e}):g({id:e,path:n}),R.previous=R.current,R.previousFragment=i.history.fragment}function m(e){t.vent.trigger("router:route:close"),z.controller[e.id]().stop(function(){R.current===e.next&&g({id:R.current})})}function g(e){t.track("page",i.history.fragment),t.vent.trigger("router:route:open"),!0!==e.same&&a("html, body").animate({scrollTop:1},1),z.controller[e.id]().start(e.path)}function w(e){I.paths=i.history.fragment.split("/"),I.path="/"+i.history.fragment,a("a:not([href='"+I.path+"'])").removeClass("active"),a("a[href='"+I.path+"']").addClass("active"),I.paths[0].length&&a("a[href^='/"+I.paths[0]+"']").addClass("active")}function y(e){for(var t="",i=0,n=e.length;i<n;++i)null!==e[i]&&(t+=e[i]);return t}function x(e){a(".app-admin .edit-page").attr("href",r.template("/wp-admin/post.php?post=<%= id %>&action=edit")({id:e}))}function b(e){e&&(document.title=a("<div />").html(e).text())}function T(){a("body").on("click","a[rel^='address'], a[href^='"+window.location.origin+"']",D).on("click","a[rel^='url']",$).on("click","a",C)}function D(e){var t,i=a(this),n=i.attr("rel"),o=i.attr("href");if(void 0!==n&&null!==n||(n=o),(t=n.replace("address","")).search(window.location.origin)>-1&&(t=o.replace(window.location.origin,"")),!i.hasClass("ignore-link")&&!e.metaKey&&!e.shiftKey)return f(t),!1}function $(){var e=a(this),t=e.data("timeout"),i=e.attr("rel");clearTimeout(t),void 0!==i&&null!==i||(i=e.attr("href")),e.attr("href",i.replace("url:","")),t=setTimeout(function(){e.removeAttr("href")},200)}function C(e){var t=a(this),i=t.attr("href");if(void 0!==i&&"/"===i.substr(0,1)&&!t.hasClass("ignore-link")&&!e.metaKey&&!e.shiftKey)return f(i),!1}function L(){P.current=t.request("utils:core:querystring:get"),P.previous!==P.current&&t.vent.trigger("router:querystring:changed"),P.previous=P.current}function k(e){var t=i.history.fragment;t.indexOf("?")>-1&&(t=t.substr(0,tmp.index)),i.history.navigate(t+(""===e?"":"?"+e),{trigger:!0})}function M(e){return t.req("utils:core:querystring:parse")}var z,I={path:"/"},P={current:"",previous:"no-query"},R={home:"notFound",current:null,previous:null};e.addInitializer(function(e){s(),l(),T()})}})},{"./route/Routes":15}],15:[function(e,t,i){var n=e("./RoutesController");t.exports=Marionette.AppRouter.extend({controller:new n,appRoutes:{}})},{"./RoutesController":16}],16:[function(e,t,i){t.exports=Marionette.Controller.extend({addRoute:function(e){this[e.id]=function(){return{start:e.controller.start,stop:e.controller.stop}}}})},{}],17:[function(e,t,i){e("./display/Display");var n=e("./views/templates/LayoutTemplate.html"),o=e("./models/LayoutModel"),a=e("./views/LayoutView");t.exports=app.module("About",{startWithParent:!1,define:function(e,t,i,r,s,l){function c(e){l.extend(y,e),g=y.region.$el}function d(){t.cmd.execute("router:route:register",{id:"about",route:"(/)about(/)",isHome:!0,controller:{start:f,stop:v}})}function u(){w=new a({template:l.template(n),model:new o}),y.region.show(w),w.addRegions({bannerRegion:s(".layout .banner-region",w.$el),contentRegion:s(".layout .content-region",w.$el)})}function p(){y.Display.start({region:y.region,layout:w,data:y.data,$el:g})}function f(){t.vent.trigger("resize:trigger"),h(),t.vent.trigger("app:ui:bar:theme:set",y.data.c),t.cmd.execute("router:pid:set",y.data.pid),t.cmd.execute("router:page:title:set",y.data.ht)}function h(){g.show(),y.Display.activate(),t.vent.trigger("app:ui:footer:hide"),TweenLite.killDelayedCallsTo(m),TweenLite.delayedCall(.3,m),t.vent.trigger("app:ui:theme:set","dark"),t.vent.trigger("resize:trigger")}function v(e){TweenLite.killDelayedCallsTo(h),TweenLite.killDelayedCallsTo(m),y.Display.deactivate(function(){g.hide(),e()})}function m(){t.vent.trigger("resize:trigger"),t.vent.trigger("app:section:shown")}var g,w,y=e;y.addInitializer(function(e){c(e),d(),u(),p()})}})},{"./display/Display":18,"./models/LayoutModel":24,"./views/LayoutView":25,"./views/templates/LayoutTemplate.html":26}],18:[function(e,t,i){var n=e("./models/ContentModel"),o=e("./views/ContentView"),a=e("./views/templates/BlockTemplate.html"),r=e("./views/templates/LinkTemplate.html");t.exports=app.module("About.Display",{startWithParent:!1,define:function(e,t,i,s,l,c){function d(e){c.extend(B,e)}function u(){I={missionTitle:B.data.cn.ms.t,missionBlocks:h(B.data.cn.ms),philosophyBlocks:h(B.data.cn.ph),informationBlocks:h(B.data.cn.inf)}}function p(){V=new o({model:new n(I)}),B.layout.contentRegion.show(V)}function f(){H=t.request("ui:view:create",{view:"BannerView",model:"BannerModel",modelProps:B.data.cn.bn,options:{}}),B.layout.bannerRegion.show(H)}function h(e){for(var t="",i=0,n=e.length;i<n;++i)t+=c.template(a)({title:e[i].t,hasTitle:""!==e[i].t?"block":"none",content:v(e[i].c),links:m(e[i].l),hasLinks:e[i].l.length?"block":"none"});return t}function v(e){var t=l("<div>"+e+"</div>");return l("> *",t).html(function(e,t){return t.replace(/\b(\w+(?![^<>]*>))\b/,'<span class="w">$1</span>')}),l(".w:first",t).html(function(e,t){return t.replace(/^[^a-zA-Z]*([a-zA-Z])/g,'<span class="special-character">$1</span>')}),l(t).html()}function m(e){for(var t="",i=0,n=e.length;i<n;++i)t+=c.template(r)({title:e[i].t,url:e[i].u});return t}function g(){z=B.$el,l(".column",V.$el).each(function(){O.column.push({$el:l(this),$display:l(".display",this),$blocks:l(".block",this)})})}function w(){P=t.request("ui:controller:create",{controller:"IntroController",options:{$el:l(".app-section-intro",z)}}),R=t.request("ui:controller:create",{controller:"WipeoutController",options:{$el:l(".app-wipeout",z)}}),S=t.request("ui:controller:create",{controller:"ShifterController",options:{$selectors:l(".block-shift, .app-banner",B.layout.$el),delayMultiplier:.1,startOffset:60}})}function y(){R.fadeOut({time:.5})}function x(){t.vent.on("resize:app",T),T()}function b(){t.vent.off("resize:app",T)}function T(){D(),t.win.width>990?$():t.win.width>640?C():L()}function D(){var e;O.maxHeight=0;for(var t=0,i=O.column.length;t<i;++t)(e=O.column[t]).height=e.$display.height(),O.maxHeight=Math.max(O.maxHeight,e.height)}function $(){for(var e=0,t=O.column.length;e<t;++e)k(O.column[e])}function C(){for(var e=0,t=O.column.length;e<t;++e)k(O.column[e])}function L(){for(var e=0,t=O.column.length;e<t;++e)M(O.column[e])}function k(e){e.remaining=O.maxHeight-e.height,e.offset=Math.floor(e.remaining/Math.max(0,e.$blocks.length-1)),e.offset=e.offset>50?0:e.offset,e.$blocks.each(function(i){i>0&&TweenLite.set(l(this),{y:e.offset*i,force3D:t.force3D})})}function M(e){e.$blocks.each(function(e){TweenLite.set(l(this),{y:0,force3D:t.force3D})})}var z,I,P,R,S,H,V,B=e,O={column:[],maxHeight:0};B.activate=function(){B.status.active=!0,H.activate(),P.show(),S.show(),R.start({wait:.5,onComplete:y}),x()},B.deactivate=function(e){B.status.active=!1,R.fadeIn({time:.5,onComplete:function(){l("html, body").animate({scrollTop:1},1),void 0!==e&&e()}}),P.hide(),S.hide(),H.deactivate(),b()},B.status={active:!1},B.addInitializer(function(e){d(e),u(),p(),f(),g(),w()})}})},{"./models/ContentModel":19,"./views/ContentView":20,"./views/templates/BlockTemplate.html":21,"./views/templates/LinkTemplate.html":23}],19:[function(e,t,i){t.exports=Backbone.Model.extend({defaults:{}})},{}],20:[function(e,t,i){var n=e("./templates/ContentTemplate.html");t.exports=Backbone.Marionette.ItemView.extend({template:_.template(n),className:"container"})},{"./templates/ContentTemplate.html":22}],21:[function(e,t,i){t.exports='<div class="block"><div class="block-shift"><h2 class="title" style="display:<%= hasTitle %>;"><%= title %></h2><hr/><div class="block-content"><%= content %></div><ul class="block-links" style="display:<%= hasLinks %>;"><%= links %></ul></div></div>'},{}],22:[function(e,t,i){t.exports='<div class="mission column column--1 pad-r-lr"><div class="display"> <%= missionBlocks %></div></div><div class="philosophy column column--2 pad-r-lr"><div class="display"> <%= philosophyBlocks %></div></div><div class="information-bar pad-r-lr"><div class="bar-display block-shift"></div></div><div class="information column column--3 pad-r-lr"><div class="display"> <%= informationBlocks %></div></div>'},{}],23:[function(e,t,i){t.exports='<li><a class="btn--boxstandard" href="<%= url %>" role="button"><span><%= title %></span><span class="l-arr"><div class="icon icon--link"></div></span></a></li>'},{}],24:[function(e,t,i){t.exports=Backbone.Model.extend({defaults:{}})},{}],25:[function(e,t,i){t.exports=Backbone.Marionette.LayoutView.extend({className:"container"})},{}],26:[function(e,t,i){t.exports='<div class="app-central app-content--standard"><div class="app-section-intro pad-r-lr"></div><div class="layout app-content--layout"><div class="banner-region pad-r-lr"></div><article class="content-region"></article></div><div class="clear"></div><div class="app-wipeout"></div></div>'},{}],27:[function(e,t,i){e("./display/Display");var n=e("./views/templates/LayoutTemplate.html"),o=e("./models/LayoutModel"),a=e("./views/LayoutView");t.exports=app.module("Affiliations",{startWithParent:!1,define:function(e,t,i,r,s,l){function c(e){l.extend(y,e),g=y.region.$el}function d(){t.cmd.execute("router:route:register",{id:"affiliations",route:"(/)about/affiliations(/)",isHome:!0,controller:{start:f,stop:v}})}function u(){w=new a({template:l.template(n),model:new o}),y.region.show(w),w.addRegions({bannerRegion:s(".layout .banner-region",w.$el),contentRegion:s(".layout .content-region",w.$el)})}function p(){y.Display.start({region:y.region,layout:w,data:y.data,$el:g})}function f(){t.vent.trigger("resize:trigger"),h(),t.vent.trigger("app:ui:bar:theme:set",y.data.c),t.cmd.execute("router:pid:set",y.data.pid),t.cmd.execute("router:page:title:set",y.data.ht)}function h(){g.show(),y.Display.activate(),t.vent.trigger("app:ui:footer:hide"),TweenLite.killDelayedCallsTo(m),TweenLite.delayedCall(.3,m),t.vent.trigger("app:ui:theme:set","dark"),t.vent.trigger("resize:trigger")}function v(e){TweenLite.killDelayedCallsTo(h),TweenLite.killDelayedCallsTo(m),y.Display.deactivate(function(){g.hide(),e()})}function m(){t.vent.trigger("resize:trigger"),t.vent.trigger("app:section:shown")}var g,w,y=e;y.addInitializer(function(e){c(e),d(),u(),p()})}})},{"./display/Display":28,"./models/LayoutModel":35,"./views/LayoutView":36,"./views/templates/LayoutTemplate.html":37}],28:[function(e,t,i){var n=e("./models/ContentModel"),o=e("./views/ContentView");t.exports=app.module("Affiliations.Display",{startWithParent:!1,define:function(e,t,i,a,r,s){function l(e){s.extend(k,e)}function c(){b={title:k.data.cn.t,content:k.data.cn.c,linkDisplay:k.data.cn.lnk.inc?"inline-block":"none",linkTitle:k.data.cn.lnk.inc?k.data.cn.lnk.t:"",linkURL:k.data.cn.lnk.inc?k.data.cn.lnk.u:"",items:d(k.data.cn.lst)}}function d(e){for(var t=[],i=0,n=e.length;i<n;++i)e[i],t.push({title:e[i].t,content:e[i].c,img:e[i].img,links:u(e[i].lnks)});return t}function u(e){for(var t="",i=0,n=e.length;i<n;++i)t+=s.template('<li class="asset"><a class="btn--boxstandard" href="<%= url %>" target="_blank" role="button"><%= title %></a></li>')({title:e[i].t,url:e[i].u});return t}function p(){L=new o({model:new n(b)}),k.layout.contentRegion.show(L)}function f(){C=t.request("ui:view:create",{view:"BannerView",model:"BannerModel",modelProps:k.data.cn.bn,options:{}}),k.layout.bannerRegion.show(C)}function h(){x=k.$el}function v(){T=t.request("ui:controller:create",{controller:"IntroController",options:{$el:r(".app-section-intro",x)}}),D=t.request("ui:controller:create",{controller:"WipeoutController",options:{$el:r(".app-wipeout",x)}}),$=t.request("ui:controller:create",{controller:"ShifterController",options:{$selectors:r(".block-shift, .app-banner",k.layout.$el),delayMultiplier:.1,startOffset:60}})}function m(){D.fadeOut({time:.5})}function g(){t.vent.on("resize:app",y),y()}function w(){t.vent.off("resize:app",y)}function y(){}var x,b,T,D,$,C,L,k=e;k.activate=function(){k.status.active=!0,C.activate(),T.show(),$.show(),D.start({wait:.5,onComplete:m}),g()},k.deactivate=function(e){k.status.active=!1,D.fadeIn({time:.5,onComplete:function(){r("html, body").animate({scrollTop:1},1),void 0!==e&&e()}}),T.hide(),$.hide(),C.deactivate(),w()},k.status={active:!1},k.addInitializer(function(e){l(e),c(),p(),f(),h(),v()})}})},{"./models/ContentModel":30,"./views/ContentView":32}],29:[function(e,t,i){t.exports=Backbone.Model.extend({defaults:{}})},{}],30:[function(e,t,i){t.exports=e(19)},{}],31:[function(e,t,i){var n=e("./templates/AssetGroupTemplate.html");t.exports=Backbone.Marionette.ItemView.extend({template:_.template(n),className:"asset-group block-shift",tagName:"div",initialize:function(e){},onRender:function(){var e=this;e.status={active:!1,hover:!1},e.activate=function(){e.status.active=!0},e.deactivate=function(){e.status.active=!1},e.$el}})},{"./templates/AssetGroupTemplate.html":33}],32:[function(e,t,i){var n=e("./templates/ContentTemplate.html"),o=e("../models/AssetGroupModel"),a=e("./AssetGroupView"),r=Backbone.Collection.extend({model:o});t.exports=Backbone.Marionette.CompositeView.extend({template:_.template(n),className:"container",childView:a,childViewContainer:".asset-groups",initialize:function(e){var t=this;t.collection=new r(t.model.get("items"))}})},{"../models/AssetGroupModel":29,"./AssetGroupView":31,"./templates/ContentTemplate.html":34}],33:[function(e,t,i){t.exports='<div class="block"><div class="block-content"><div class="grp-img"><img src="<%= img %>"/></div><div class="grp-info"><div class="grp-title"><%= title %></div><div class="grp-descrip"> <%= content %></div><div class="grp-assets"><ul class="assets"><%= links %></ul></div></div><div class="clear"></div></div></div>'},{}],34:[function(e,t,i){t.exports='<div class="full-column pad-r-lr"><div class="block-shift"><h2 class="title"><%= title %></h2><hr/></div></div><div class="column pad-r-lr info"><div class="display"><div class="block"><div class="block-shift"><div class="block-content"> <%= content %> <a class="btn--boxstandard" href="<%= linkURL %>" role="button" style="display:<%= linkDisplay %>;"><span><%= linkTitle %></span><span class="l-arr"><div class="icon icon--link"></div></span></a></div></div></div></div></div><div class="column pad-r-lr it-assets"><div class="display"><div class="items-region"><div class="asset-groups"></div></div></div></div>'},{}],35:[function(e,t,i){t.exports=e(24)},{}],36:[function(e,t,i){t.exports=e(25)},{}],37:[function(e,t,i){t.exports=e(26)},{}],38:[function(e,t,i){e("./display/Display");var n=e("./views/templates/LayoutTemplate.html"),o=e("./models/LayoutModel"),a=e("./views/LayoutView");t.exports=app.module("CollectionItem",{startWithParent:!1,define:function(e,t,i,r,s,l){function c(e){l.extend(x,e),w=x.region.$el}function d(){t.cmd.execute("router:route:register",{id:"collection-item",route:"(/)collections/:page/:page(/)",controller:{start:f,stop:v}})}function u(){y=new a({template:l.template(n),model:new o}),x.region.show(y),y.addRegions({contentRegion:s(".content",y.$el),zoomRegion:s(".zoom-region",y.$el),roomPreviewRegion:s(".room-preview-region",y.$el)})}function p(){x.Display.start({region:x.region,scene2DRegion:s(".scene-2d",y.$el),scene3DRegion:s(".scene-3d",y.$el),zoomRegion:y.zoomRegion,roomPreviewRegion:y.roomPreviewRegion,interactRegion:s(".content",y.$el),layout:y,$controls:s(".app-base-controls",y.$el),$zoomBox:s(".app-zoombox",y.$el),data:x.data})}function f(){m()}function h(e){w.show(),t.vent.trigger("app:ui:theme:set","dark"),x.status.active?x.Display.setItem({collection:e.collectionIndex,item:e.itemIndex,first:!1}):(x.Display.activate(),x.Display.setItem({collection:e.collectionIndex,item:e.itemIndex,first:!0})),x.status.active=!0,TweenLite.killDelayedCallsTo(g),TweenLite.delayedCall(.5,g),t.vent.trigger("app:ui:footer:hide")}function v(e){x.status.active=!1,x.Display.deactivate(function(){w.hide(),e()})}function m(){var e=String(i.history.fragment);e.indexOf("?")>0&&(e=e.split("?")[0]);var n=new RegExp(String(e).replace(/\//g,"(?:/)?")+"?$"),o=-1,a=-1;l.find(t.data.core.collections.l,function(e,t){return a=-1,l.find(e.s,function(e,t){if(e.u.match(n))return a=t,!0}),a>-1&&(o=t,!0)}),o>-1?h({collectionIndex:o,itemIndex:a}):t.cmd.execute("router:route:set","/collections/")}function g(){t.vent.trigger("resize:trigger"),t.vent.trigger("app:section:shown"),t.vent.trigger("app:ui:footer:hide")}var w,y,x=e;x.data={},x.status={active:!1},x.addInitializer(function(e){c(e),d(),u(),p()})}})},{"./display/Display":39,"./models/LayoutModel":63,"./views/LayoutView":64,"./views/templates/LayoutTemplate.html":65}],39:[function(e,t,i){e("./scene/canvas/SceneCanvas"),e("./scene/standard/SceneStandard"),e("./content/Content");var n=e("./controllers/ItemManager");t.exports=app.module("CollectionItem.Display",{startWithParent:!1,define:function(e,t,i,o,a,r){function s(e){r.extend(y,e),w.setCollectionsData(t.data.core.collections.l)}function l(){y.Scene.start({controller:w,$el:y.scene2DRegion,$interact:y.interactRegion}),x&&y.Scene3D.start({controller:w,$el:y.scene3DRegion,$interact:y.interactRegion}),y.Content.start({controller:w,region:y.layout.contentRegion})}function c(){(h=t.request("ui:view:create",{view:"ControlsView",model:"ControlsModel",modelProps:{back:y.data.st.b,backURL:"#",quickJumpTitle:y.data.st.qj},options:{el:y.$controls}})).render()}function d(){v=t.request("ui:view:create",{view:"ZoomBoxView",model:"ZoomBoxModel",modelProps:r.extend({},y.data.cn.enh,{cookieName:"enhancedViewVisited"})}),y.zoomRegion.show(v)}function u(){m=t.request("ui:view:create",{view:"ZoomBoxView",model:"ZoomBoxModel",modelProps:r.extend({},y.data.cn.rp,{hardFit:!0,maxZoom:60,padX:0,padY:0,cookieName:"roomPreviewVisited"})}),y.roomPreviewRegion.show(m)}function p(){g=t.request("ui:controller:create",{controller:"WipeoutController",options:{$el:a(".scene-wipeout",y.region.$el)}})}function f(){w.setup({$region:y.region.$el,$heightRegion:a(".content-display",y.layout.$el),$contentRegion:y.layout.contentRegion.$el,$eventsRegion:y.region.$el,scene:y.Scene,scene3DEnabled:x,scene3D:y.Scene3D,sceneWipeout:g,content:y.Content,controls:h,zoomBox:v,data:y.data,roomPreviewZoomBox:m})}var h,v,m,g,w,y=e,x=!1;y.Scene={},y.Scene3D={},y.collectionsData=[],y.activate=function(){y.status.active=!0,w.activate()},y.deactivate=function(e){y.status.active=!1,w.deactivate(e)},y.setItem=function(e){w.setItem(e),t.vent.trigger("app:ui:bar:theme:set",w.collectionsData[e.collection].c),t.cmd.execute("router:pid:set",w.collectionsData[e.collection].s[e.item].pid),t.cmd.execute("router:page:title:set",w.collectionsData[e.collection].s[e.item].ht)},y.status={active:!1},y.addInitializer(function(e){s(e),l(),c(),d(),u(),p(),f()}),y.Scene=y.SceneStandard,y.Scene3D=y.SceneCanvas,device.webGL&&(x=!0),w=new n}})},{"./content/Content":40,"./controllers/ItemManager":55,"./scene/canvas/SceneCanvas":56,"./scene/standard/SceneStandard":60}],40:[function(e,t,i){e("./viewer/Viewer");var n=e("./views/templates/LayoutTemplate.html"),o=e("./models/LayoutModel"),a=e("./views/LayoutView");t.exports=app.module("CollectionItem.Display.Content",{startWithParent:!1,define:function(e,t,i,r,s,l){function c(e){l.extend(h,e),p=h.region.$el}function d(){f=new a({template:l.template(n),model:new o}),h.region.show(f),f.addRegions({viewerRegion:s(".collection",f.$el)})}function u(){h.Viewer.start({controller:h.controller,region:f.viewerRegion})}var p,f,h=e;h.status={active:!1},h.activate=function(){h.Viewer.activate()},h.deactivate=function(e){h.Viewer.deactivate(e)},h.setItem=function(e){h.Viewer.setItem(e)},h.updateLayout=function(e){h.Viewer.updateLayout(e)},h.addInitializer(function(e){c(e),d(),u()})}})},{"./models/LayoutModel":41,"./viewer/Viewer":42,"./views/LayoutView":53,"./views/templates/LayoutTemplate.html":54}],41:[function(e,t,i){t.exports=Backbone.Model.extend({defaults:{}})},{}],42:[function(e,t,i){var n=e("./models/ItemModel"),o=e("./views/ItemView"),a=Backbone.Collection.extend({model:n}),r=Marionette.CollectionView.extend({tagName:"div",className:"item-views",childView:o});t.exports=app.module("CollectionItem.Display.Content.Viewer",{startWithParent:!1,define:function(e,t,i,n,o,s){function l(){M.screenWidth=screen.width,M.screenHeight=screen.height,M.screenWidth>=980?(M.imageSize="l",M.perspectiveImageSize="l",M.zoomSize=(device.touch,"l"),M.roomZoomSize="z"):M.screenWidth>=550?(M.imageSize="m",M.perspectiveImageSize="m",M.zoomSize=(device.touch,"l"),M.roomZoomSize="z"):(M.imageSize="s",M.perspectiveImageSize="s",M.zoomSize="l",M.roomZoomSize="l")}function c(e){s.extend(k,e),$=k.region.$el}function d(){C=new a([]),L=new r({collection:C,childViewEventPrefix:"view"}),k.region.show(L)}function u(){L.on("view:event:item:variant:set",g)}function p(e){S.current=e,I=w(e),C.set(I),H={id:e,views:[],current:-1,previous:null,total:0},L.children.each(function(e){e.setController(k.controller),H.views.push(e)}),H.total=H.views.length}function f(e){if(H.current=e.item,H.current===H.previous)return z.query=t.request("utils:core:querystring:parse"),z.variant=void 0!==z.query.c?Number(z.query.c)-1:0,isNaN(z.variant)&&(z.variant=0),void g(null,z.variant);null!==H.previous?h({id:H.previous,next:e.item,collection:e.collection}):v({id:e.item,collection:e.collection}),H.previous=H.current}function h(e){k.controller.closeSceneItem({collection:S.current,item:e.id,next:H.current}),H.views[e.id].hide(function(){H.current===e.next&&S.current===e.collection&&v({id:H.current,collection:e.collection})})}function v(e){z.query=t.request("utils:core:querystring:parse"),z.variant=void 0!==z.query.c?Number(z.query.c)-1:0,isNaN(z.variant)&&(z.variant=0),H.views[e.id].show({variant:z.variant})}function m(e,t){H.views[e.id].hide(function(){k.status.active||void 0!==t&&t()})}function g(e,t){H.variant=t,H.views[H.current].manualSetVariant(H.variant),k.controller.setSceneItem({collection:S.current,item:H.current,variant:H.variant}),k.controller.updateControls({collection:S.current,id:H.current,variant:H.variant})}function w(e){if(void 0!==P[e])return P[e];var t,i,n,o,a,r=[],s="",l=[],c=0,d=0;for(t=0,i=k.controller.collectionsData[e].s.length;t<i;++t)c=(a=T((n=k.controller.collectionsData[e].s[t]).c.v,n.u,c,{collection:n.p,design:n.t})).index,l=l.concat(a.list);for(t=0,i=k.controller.collectionsData[e].s.length;t<i;++t)n=k.controller.collectionsData[e].s[t],s=k.controller.collectionsData[e].t,o={title:n.t,theme:k.controller.collectionsData[e].c,collection:s,variants:y(n.c.v,n.u),dimensions:n.c.dm.slice(0),groupStartIndex:d,gallery:{list:x(n.c.v,n.u,{collection:n.p,design:n.t})},previews:{list:l}},d+=D(n.c.v),r.push(o);return P[e]=r,P[e]}function y(e,t){for(var i,n,o=[],a=0,r=e.length;a<r;++a)n={index:a,prodID:(i=e[a]).pr,prodTitle:i.t,prod:i.pr+" "+i.t,prodStr:"<strong>"+i.pr+"</strong> "+i.t,thm:i.txd+i.thm,url:t+"?c="+(a+1),dimensions:i.dm},o.push(n);return o}function x(e,t,i){for(var n,o=[],a=0,r=e.length;a<r;++a)""!==(n=e[a]).cu.l&&(R.has=!0,R.index=o.length,o.push({gid:o.length,group:a,url:t+"?c="+(a+1),title:n.pr+" "+(i.design===n.t?i.design:i.design+" - "+n.t),thumb:n.cu.dir+n.cu.thm,filename:String(i.collection+"--"+i.design+"_"+n.pr.split("/").join("-")+"_"+n.t+"--closeup_image").replace(/[^a-z0-9_\-]/gi,"_").toLowerCase(),src:n.cu.dir+n.cu[M.imageSize],zoom:n.cu.dir+n.cu[M.zoomSize],rot:!1})),""!==n.ps.l&&o.push({gid:o.length,group:a,url:t+"?c="+(a+1),title:n.pr+" "+(i.design===n.t?i.design:i.design+" - "+n.t),thumb:n.ps.dir+n.ps.thm,filename:String(i.collection+"--"+i.design+"_"+n.pr.split("/").join("-")+"_"+n.t+"--perspective_image").replace(/[^a-z0-9_\-]/gi,"_").toLowerCase(),src:n.ps.dir+n.ps[M.perspectiveImageSize],zoom:n.ps.dir+n.ps[M.zoomSize],rot:!1}),""!==n.fv.l&&o.push({gid:o.length,group:a,url:t+"?c="+(a+1),title:n.pr+" "+(i.design===n.t?i.design:i.design+" - "+n.t),thumb:n.fv.dir+n.fv.thm,filename:String(i.collection+"--"+i.design+"_"+n.pr.split("/").join("-")+"_"+n.t+"--full_image").replace(/[^a-z0-9_\-]/gi,"_").toLowerCase(),src:n.fv.dir+n.fv[M.imageSize],zoom:n.fv.dir+n.fv[M.zoomSize],rot:!0}),o=o.concat(b({obj:n,info:i,baseURL:t,group:a,startGid:o.length}));return o}function b(e){for(var t,i=e.startGid,n=[],o=0,a=e.obj.enh.length;o<a;++o)t=e.obj.enh[o],n.push({gid:i+n.length,group:e.group,url:e.baseURL+"?c="+(e.group+1),title:e.obj.pr+" "+(e.info.design===e.obj.t?e.info.design:e.info.design+" - "+e.obj.t),filename:String(e.info.collection+"--"+e.info.design+"_"+e.obj.pr.split("/").join("-")+"_"+e.obj.t+"--image_"+(o+1)).replace(/[^a-z0-9_\-]/gi,"_").toLowerCase(),thumb:t.dir+t.thm,zoom:t.dir+t[M.zoomSize],rot:!1});return n}function T(e,t,i,n){for(var o,a={list:[],index:i},r=0,s=0,l=e.length;s<l;++s)""!==(o=e[s]).prv.l&&(a.list.push({gid:i+a.list.length,group:i+s,url:t+"?c="+(s+1),title:o.pr+" "+(n.design===o.t?n.design:n.design+" - "+o.t),filename:String(n.collection+"--"+n.design+"_"+o.pr.split("/").join("-")+"_"+o.t+"--room_preview").replace(/[^a-z0-9_\-]/gi,"_").toLowerCase(),thumb:o.fv.dir+o.fv.thm,zoom:o.prv.dir+o.prv[M.roomZoomSize],rot:!1}),r++);return a.index+=r,a}function D(e){for(var t=0,i=0,n=e.length;i<n;++i)""!==e[i].prv.l&&t++;return t}var $,C,L,k=e,M={},z={},I=[],P={},R={has:!1,index:0},S={current:-1,previous:-1},H={views:[],current:-1,previous:null,variant:-1};k.status={active:!1},k.activate=function(){k.status.active=!0,S.current=-1,S.previous=-1},k.deactivate=function(e){k.status.active=!1,-1!==S.current&&-1!==H.current?m({id:H.current},e):void 0!==e&&e()},k.setItem=function(e){S.current!==e.collection&&p(e.collection),f(e)},k.updateLayout=function(e){for(var t=0,i=H.views.length;t<i;++t)H.views[t].updateLayout(e)},k.addInitializer(function(e){c(e),l(),d(),u()})}})},{"./models/ItemModel":44,"./views/ItemView":47}],43:[function(e,t,i){t.exports=Backbone.Model.extend({defaults:{s:"rec",ls:[]}})},{}],44:[function(e,t,i){t.exports=Backbone.Model.extend({defaults:{}})},{}],45:[function(e,t,i){t.exports=Backbone.Model.extend({defaults:{thm:""}})},{}],46:[function(e,t,i){var n=e("./templates/ShapeTemplate.html"),o=e("./templates/Roll.html");t.exports=Backbone.Marionette.LayoutView.extend({template:_.template(n),tagName:"li",className:"pos-shift",initialize:function(e){},onRender:function(){function e(e){var t=e.split("."),i=0;return i=12*Number(t[0]),void 0!==t[1]&&(i+=Number(t[1])),e=i}function t(){l.ratio=s.base.height/l.maxHeightRatio,a.cell.css({verticalAlign:"bottom"}),l.height=(l.maxHeight*l.ratio).toFixed(2),l.width=(l.height/s.base.height*s.base.width).toFixed(2),a.shape.css({width:l.width+"%",height:l.height+"%"})}var i,n=this,a={},r="",s={data:[],multi:!1,base:{width:0,height:0}},l={maxWidth:100,maxHeight:100,maxWidthRatio:e("7.10"),maxHeightRatio:e("11.2"),width:0,height:0};n.status={active:!1},n.activate=function(e){n.status.active=!0},n.deactivate=function(e){n.status.active=!1},i=n.$el,a.shape=$(".d",i),a.list=$(".d-l",i),a.cell=$(".d-s",i),s.data=n.model.get("ls"),r=n.model.get("s"),function(){var t,i="";s.data.length>1&&(s.multi=!0);for(var n=0,o=s.data.length;n<o;++n)t=s.data[n],0===n&&(s.base.width=e(t.w),s.base.height=e(t.l)),i+='<div class="sz '+(n>0?"sz-d":"")+'">'+t.w+"' x "+t.l+"'</div>";s.sizes=$(i),a.list.append(s.sizes)}(),function(){switch(r){case"rec":s.multi?a.shape.addClass("d-rect-multi"):a.shape.addClass("d-rect");break;case"cir":a.shape.addClass("d-circ");break;case"squ":a.shape.addClass("d-square");break;case"rol":a.shape.addClass("d-roll").append($(o))}}(),"rec"!==r||s.multi||t()}})},{"./templates/Roll.html":50,"./templates/ShapeTemplate.html":51}],47:[function(e,t,i){var n=e("./templates/ItemTemplate.html"),o=e("../models/VariantModel"),a=e("./VariantView"),r=Backbone.Collection.extend({model:o}),s=Marionette.CollectionView.extend({tagName:"div",className:"variant-views",childView:a}),l=e("../models/DimensionModel"),c=e("./DimensionView"),d=Backbone.Collection.extend({model:l}),u=Marionette.CollectionView.extend({tagName:"ul",className:"dimension-views",childView:c});t.exports=Backbone.Marionette.LayoutView.extend({template:_.template(n),className:"item-view",tagName:"div",initialize:function(e){},onRender:function(){function e(){TweenLite.set(z.dimensionsRegion.$el,{opacity:0,force3D:app.force3D}),k.start({wait:.5,onComplete:n})}function t(){R.infoPrompt.show(),TweenLite.killDelayedCallsTo(i),TweenLite.set(R.infoPrompt,{opacity:0,force3D:app.force3D}),TweenLite.set($(".info-display",R.infoPrompt),{y:20,force3D:app.force3D}),TweenLite.to(R.infoPrompt,.3,{delay:.5,opacity:1,force3D:app.force3D}),TweenLite.to($(".info-display",R.infoPrompt),.3,{delay:.5,y:0,force3D:app.force3D}),TweenLite.delayedCall(2,i)}function i(e){TweenLite.killDelayedCallsTo(i),TweenLite.to(R.infoPrompt,.3,{opacity:0,force3D:app.force3D}),TweenLite.to($(".info-display",R.infoPrompt),.3,{y:20,force3D:app.force3D,onComplete:function(){R.infoPrompt.hide()}})}function n(){$("html, body").animate({scrollTop:1},1),k.fadeOut({time:.5}),L.show(),M.show(),D()}function o(e){k.fadeIn({time:.5,onComplete:function(){$("html, body").animate({scrollTop:1},1),C.hide(),void 0!==e&&e()}}),L.hide(),M.hide()}function a(){S.width=-1,S.height=-1,z.controller.on("event:3D:shown",p).on("event:3D:hidden",f),app.vent.on("resize:app",D),B.view.on("view:event:selected",y),R.enhance.on("click",h),R.preview.on("click",v),R.threedee.on("click",c),R.dimensions.on("click",m),R.dimensionsInfo.on("click",w),D()}function l(){B.view.off("view:event:selected",y),app.vent.off("resize:app",D),z.controller.off("event:3D:shown",p).off("event:3D:hidden",f),R.enhance.off("click",h),R.preview.off("click",v),R.threedee.off("click",c),R.dimensions.off("click",m),R.dimensionsInfo.off("click",w),w()}function c(){if(!P)return P=!0,z.controller.toggle3DMode(),!1}function p(e){P=!1,R.threedee.addClass("state-active"),!1!==e&&t()}function f(){P=!1,R.threedee.removeClass("state-active"),i(!0)}function h(){return z.controller.openZoomBox(z.model.attributes.gallery.list,I),!1}function v(){return!W&&(z.controller.openRoomPreview(z.model.attributes.previews.list,z.model.attributes.groupStartIndex+I),!1)}function m(){return O.open?w():g(),!1}function g(){O.open=!0,R.dimensionsInfo.show(),TweenLite.killTweensOf(R.dimensionsInfo),TweenLite.set(R.dimensionsInfo,{y:40,opacity:0,force3D:app.force3D}),TweenLite.to(R.dimensionsInfo,.3,{y:0,opacity:1,force3D:app.force3D})}function w(){if(!O.open)return!1;O.open=!1,TweenLite.killTweensOf(R.dimensionsInfo),TweenLite.to(R.dimensionsInfo,.3,{y:40,opacity:0,force3D:app.force3D,onComplete:function(){R.dimensionsInfo.hide()}})}function y(e,t){x(t)}function x(e){e>B.list.length-1&&(e=0),z.trigger("event:item:variant:set",e),T(e),I=e,R.variantProdTitle.html(B.list[e].prodTitle),R.variantProdID.html(B.list[e].prodID)}function b(e){var t=B.list[e].dimensions.ovr?B.list[e].dimensions.ls:q.list;TweenLite.killTweensOf(z.dimensionsRegion.$el),TweenLite.to(z.dimensionsRegion.$el,.3,{opacity:0,force3D:app.force3D,onComplete:function(){q.collection.set(t),q.view.render(),$(".dimensions",R.dimensionsInfo).html(q.view.$el.clone()),TweenLite.to(z.dimensionsRegion.$el,.3,{opacity:1,force3D:app.force3D})}})}function T(e){for(var t=0,i=B.views.length;t<i;++t)e===t?B.views[t].activate():B.views[t].deactivate()}function D(e){S.width===app.win.width&&S.height===app.win.height&&!0!==e||(V.layoutY=0,app.win.width>700&&O.open&&w(),V.layoutY=H.top-C.offset().top-42,R.layout.height(V.layoutY),S.width=app.win.width,S.height=app.win.height)}var C,L,k,M,z=this,I=0,P=!1,R={},S={width:-1,height:-1},H={top:0},V={},B={list:[],collection:{},view:{},views:[],current:0,total:0},O={open:!1},q={list:[],collection:{},view:{},views:[]},W=!1;z.controller={},z.status={active:!1},z.setController=function(e){z.controller=e},z.updateLayout=function(e){H.top=e.top,z.status.active&&D(!0)},z.manualSetVariant=function(e){e>B.list.length-1&&(e=0),T(e),I=e,b(e),R.variantProdTitle.html(B.list[e].prodTitle),R.variantProdID.html(B.list[e].prodID)},z.hide=function(e){z.status.active?(z.status.active=!1,l(),o(e)):void 0!==e&&e()},z.show=function(t){z.status.active||(z.status.active=!0,C.show(),a(),x(t.variant),e(),z.controller.threeDee.active?p(!1):f())},C=z.$el,R.scrollDown=$(".scroll-down",C),R.scrollPoint=$(".scroll-point",C),R.intro=$(".app-section-intro",C),R.infoPrompt=$(".info-prompt",C),R.variantProdTitle=$(".app-section-intro .prod-title",C),R.variantProdID=$(".app-section-intro .prod-id",C),R.variants=$(".variants",C),R.layout=$(".layout",C),R.enhance=$(".go-enhanced",C),R.preview=$(".go-preview",C),R.threedee=$(".go-threedee",C),R.dimensions=$(".go-dimensions",C),R.dimensionsInfo=$(".dimensions-info",C),device.webGL||R.threedee.parent().hide(),B.list=z.model.get("variants"),q.list=z.model.get("dimensions"),L=app.request("ui:controller:create",{controller:"IntroController",options:{$el:$(".app-section-intro",C)}}),k=app.request("ui:controller:create",{controller:"WipeoutController",options:{$el:$(".app-wipeout",C)}}),M=app.request("ui:controller:create",{controller:"ShifterController",options:{$selectors:$(".layout .base",C),delayMultiplier:.1,startOffset:50,endOffset:50}}),z.addRegions({variantRegion:$(".variant-list",C),dimensionsRegion:$(".dimensions-list",C)}),B.collection=new r(B.list),B.view=new s({collection:B.collection,childViewEventPrefix:"view"}),B.list.length>1?z.variantRegion.show(B.view):R.variants.hide(),B.view.children.each(function(e){B.views.push(e)}),function(e){q.collection=new d(e),q.view=new u({collection:q.collection,childViewEventPrefix:"view"}),z.dimensionsRegion.show(q.view),$(".dimensions",R.dimensionsInfo).html(q.view.$el.clone())}(q.list),z.model.attributes.previews.list.length||(R.preview.addClass("disabled").attr("title","This option is currently unavailable for this design."),W=!0)}})},{"../models/DimensionModel":43,"../models/VariantModel":45,"./DimensionView":46,"./VariantView":48,"./templates/ItemTemplate.html":49}],48:[function(e,t,i){var n=e("./templates/VariantTemplate.html");t.exports=Backbone.Marionette.LayoutView.extend({template:_.template(n),className:"variant",attributes:{href:"#",title:"",role:"button"},tagName:"a",initialize:function(e){},onRender:function(){function e(){TweenLite.to(o,.2,{scale:1,opacity:.9})}function t(){a.status.active||TweenLite.to(o,.2,{scale:.95,opacity:.6})}function i(){}var n,o,a=this,r=0;a.status={active:!1},a.activate=function(e){a.status.active=!0,TweenLite.to(o,e?0:.2,{scale:1,opacity:1}),n.addClass("active")},a.deactivate=function(e){a.status.active=!1,TweenLite.to(o,e?0:.2,{scale:.95,opacity:.6}),n.removeClass("active")},(n=a.$el).attr("title",a.model.get("prod")),o=$(".v-display",n),r=a.model.get("index"),n.attr("href",a.model.get("url")),TweenLite.set(o,{scale:.95,opacity:.6}),n.on(device.over,e).on(device.out,t).on("click",i)}})},{"./templates/VariantTemplate.html":52}],49:[function(e,t,i){t.exports='<div class="layout pad-r-lr"><div class="base pos-shift"><div class="pad-r-lr"><div class="base-content"><div class="dimensions-info"><div class="dm-info-display"><div class="dm-info-bar"><div class="bar-left">Available dimensions</div><div class="bar-right"><div class="icon icon--close"></div></div></div><div class="dimensions"></div></div></div><div class="base-options"><div class="b-option pos-shift"><a href="#enhanced" class="btn--boxstandard go-enhanced"><span class="icon icon--zoom" role="button"></span> Enhanced <span class="shorten">View</span></a></div><div class="b-option"><a href="#" class="btn--boxstandard go-preview"><span class="icon icon--room" role="button"></span> Room <span class="shorten">Preview</span></a></div><div class="b-option threedee-option"><a href="#" class="btn--boxstandard go-threedee" role="button"><span class="mode-3d"><span class="icon icon--three-dee"></span> 3D <span class="shorten">Mode</span></span><span class="mode-2d"><span class="icon icon--two-dee"></span> 2D <span class="shorten">Mode</span></span></a></div><div class="b-option dimensions-option" role="button"><a href="#" class="btn--boxstandard go-dimensions"><span class="icon icon--dimensions"></span> Dimensions</a></div></div></div></div></div><div class="info-prompt" role="dialog"><div class="info-display pad-r-a"><div class="info-base"></div><div class="info-content"><p><div class="icon icon--lightbulb"></div></p><p>Press and drag to rotate.</p></div></div></div></div><div class="app-section-intro item-ui pad-r-lr"><div class="region-left"><div class="prod-info" role="heading"><h2 class="collection-title pos-shift"><%= collection %></h2><h1 class="title pos-shift"><%= title %></h1></div><div class="prod-key-info pos-shift"><span class="prod-id"></span> -<span class="prod-title"></span></div><div class="variants pos-shift"><div class="variant-list"></div></div></div><div class="region-right"><div class="pad-r-r"><div class="dimensions"><h2 class="dm-title pos-shift">Available dimensions:</h2><div class="dimensions-list"></div></div></div></div></div><div class="app-wipeout"></div>'},{}],50:[function(e,t,i){t.exports='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="100px" height="59.822px" viewBox="0 0 100 59.822" enable-background="new 0 0 100 59.822" xml:space="preserve"><g><path d="M100 27.298H56.537L29.133 54.883l.019-.047c-2.359 2.462-5.415 4.239-8.865 4.986h47.882L100 27.298z"/><path d="M34.021 42.812c0 3.274-.962 6.305-2.539 8.924l24.399-24.403-.026-.024c2.198-2.866 3.557-6.409 3.557-10.3C59.411 7.615 51.796 0 42.402 0c-4.98 0-9.42 2.179-12.531 5.59L7.358 28.104c2.686-1.693 5.84-2.712 9.243-2.712C26.206 25.392 34.021 33.207 34.021 42.812z"/><path d="M16.601 59.408c9.151 0 16.597-7.446 16.597-16.597s-7.446-16.597-16.597-16.597C7.448 26.215 0 33.661 0 42.812S7.448 59.408 16.601 59.408zM16.597 29.965c7.083 0 12.847 5.763 12.847 12.847S23.68 55.659 16.597 55.659c-7.081 0-12.842-5.763-12.842-12.847S9.515 29.965 16.597 29.965z"/><path d="M4.578 42.812c0 6.632 5.392 12.024 12.019 12.024 6.629 0 12.024-5.392 12.024-12.024s-5.394-12.024-12.024-12.024C9.97 30.788 4.578 36.18 4.578 42.812zM16.597 34.073c4.817 0 8.737 3.92 8.737 8.739s-3.92 8.739-8.737 8.739c-4.819 0-8.739-3.92-8.739-8.739S11.777 34.073 16.597 34.073z"/><path d="M8.681 42.812c0 4.363 3.551 7.916 7.916 7.916 4.363 0 7.914-3.553 7.914-7.916s-3.551-7.916-7.914-7.916C12.232 34.896 8.681 38.449 8.681 42.812zM16.597 37.643c2.85 0 5.168 2.318 5.168 5.168 0 2.85-2.318 5.168-5.168 5.168s-5.168-2.318-5.168-5.168C11.428 39.961 13.746 37.643 16.597 37.643z"/><path d="M12.252 42.812c0 2.394 1.949 4.345 4.345 4.345s4.345-1.951 4.345-4.345c0-2.394-1.949-4.345-4.345-4.345S12.252 40.418 12.252 42.812z"/></g></svg>'},{}],51:[function(e,t,i){t.exports='<div class="d-s-bg"></div><div class="d-s-c"><div class="d-s"><div class="d"><div class="l-w"></div><div class="l-l"></div><div class="l-c"></div></div></div></div><div class="d-b"><div class="d-b-bar"></div></div><div class="d-l"></div>'},{}],52:[function(e,t,i){t.exports='<div class="v-base"><div class="v"></div></div><div class="v-display"><img class="v" src="<%= thm %>"/></div>'},{}],53:[function(e,t,i){t.exports=Backbone.Marionette.LayoutView.extend({className:"container"})},{}],54:[function(e,t,i){t.exports='<div class="collection"></div>'},{}],55:[function(e,t,i){t.exports=Marionette.Controller.extend({initialize:function(e){function t(){}function i(){v.width=-1,v.height=-1,app.vent.on("resize:app",c),h.zoomBox.on("event:close",r),h.roomPreviewZoomBox.on("event:closed",r),c()}function n(){app.vent.off("resize:app",c),h.zoomBox.off("event:close",r),h.roomPreviewZoomBox.off("event:closed",r)}function o(){g.active||(g.active=!0,h.$eventsRegion.swipe({swipeLeft:s,swipeRight:l}))}function a(){g.active&&(g.active=!1,h.$eventsRegion.swipe("destroy"))}function r(){h.threeDee.active||o(),h.controls.enableKeyPresses()}function s(){app.track("event","Collection Item","Swipe next",Backbone.history.fragment),h.controls.goNext()}function l(){app.track("event","Collection Item","Swipe previous",Backbone.history.fragment),h.controls.goPrevious()}function c(){app.win.width===v.width&&app.win.height===v.height||(v.width=app.win.width,v.height=app.win.height)}function d(){h.scene3DEnabled&&h.threeDee.active&&p(!0)}function u(){h.sceneWipeout.fadeIn({time:.5,hideOnComplete:!1,onComplete:function(){h.sceneWipeout.fadeOut({time:.5}),h.trigger("event:3D:shown"),h.threeDee.active=!0,h.scene.hide(),h.scene3D.show()}}),a()}function p(e){h.scene3D.hide(e),h.sceneWipeout.fadeIn({time:e?0:.5,hideOnComplete:!1,onComplete:function(){h.sceneWipeout.fadeOut({time:e?0:.5}),h.trigger("event:3D:hidden"),h.threeDee.active=!1,h.scene.show(e)}}),o()}function f(e,t){for(var i=[],n=0,o=h.collectionsData[e].s.length;n<o;++n)i.push({title:h.collectionsData[e].s[n].t,url:h.collectionsData[e].s[n].u,active:t===n});return i}var h=this,v={width:-1,height:-1},m={},g={active:!1},w={shown:null,show:!1};h.layout={mode:"landscape",minHeight:0,height:0,modes:{landscape:"landscape-view",portrait:"portrait-view",reduced:"reduced-view"}},h.collectionsData={},h.threeDee={active:!1},h.status={active:!1,currentCollection:-1,currentItem:-1},h.setCollectionsData=function(e){h.collectionsData=e;for(var t=0,i=h.collectionsData.length;t<i;++t)h.collectionsData[t].loaded=!1},h.setup=function(e){_.extend(h,e),t(),h.controls.deactivate()},h.activate=function(){w.shown=null,h.status.currentCollection=-1,h.status.currentItem=-1,h.content.activate(),h.scene.activate(),h.scene3DEnabled&&h.scene3D.activate(),o(),d(),i(),h.controls.activate()},h.deactivate=function(e){h.controls.deactivate(),h.scene.deactivate(),h.scene3DEnabled&&h.scene3D.deactivate(),h.content.deactivate(e),h.zoomBox.deactivate(),h.roomPreviewZoomBox.deactivate(),n(),a()},h.setItem=function(e){h.content.setItem(e),h.zoomBox.deactivate(),h.roomPreviewZoomBox.deactivate()},h.setSceneItem=function(e){h.scene.setItem(e),h.scene3DEnabled&&h.scene3D.setItem(e)},h.closeSceneItem=function(e){h.scene.closeItem(e),h.scene3DEnabled&&h.scene3D.closeItem(e)},h.updateControls=function(e){m.currentItem=e.id,e.variant-1<0?(m.prevItem=e.id-1,m.prevItem<0&&(m.prevItem=h.collectionsData[e.collection].s.length-1),m.prevVariant=h.collectionsData[e.collection].s[m.prevItem].c.v.length-1):(m.prevItem=e.id,m.prevVariant=e.variant-1),e.variant+1>h.collectionsData[e.collection].s[m.currentItem].c.v.length-1?(m.nextItem=e.id+1,m.nextItem>h.collectionsData[e.collection].s.length-1&&(m.nextItem=0),m.nextVariant=0):(m.nextItem=e.id,m.nextVariant=e.variant+1),h.controls.setOptions({quickJumpTitle:_.template(h.data.st.qj)({collection:h.collectionsData[e.collection].t.replace(" Collection","")}),list:f(e.collection,e.id),nextTitle:"Next",nextURL:h.collectionsData[e.collection].s[m.nextItem].u+"?c="+(m.nextVariant+1),previousTitle:"Previous",previousURL:h.collectionsData[e.collection].s[m.prevItem].u+"?c="+(m.prevVariant+1),backURL:h.collectionsData[e.collection].u})},h.updateLayout=function(e){h.content.updateLayout(e)},h.openZoomBox=function(e,t){h.controls.disableKeyPresses(),a(),h.zoomBox.activate(e,t),app.track("event","Collection Item","Enhanced View opened",Backbone.history.fragment)},h.toggle3DMode=function(){h.scene3DEnabled&&(h.threeDee.active?(p(),app.track("event","Collection Item","3D Mode Deactivated",Backbone.history.fragment)):(u(),app.track("event","Collection Item","3D Mode Activated",Backbone.history.fragment)))},h.openRoomPreview=function(e,t){h.controls.disableKeyPresses(),a(),h.roomPreviewZoomBox.activate(e,t),app.track("event","Collection Item","Room Preview opened",Backbone.history.fragment)}}})},{}],56:[function(e,t,i){e("./rugs/Rugs"),t.exports=app.module("CollectionItem.Display.SceneCanvas",{startWithParent:!1,define:function(e,t,i,n,o,a){function r(e){var i=t.request("utils:loader:image:load",{src:L.images.placeholderSrc});i.on("complete",function(t){L.images.placeholder=t,e()}).on("error",function(){e()}),i.load()}function s(e){var i=t.request("utils:loader:image:load",{src:L.images.bumpMapSrc});i.on("complete",function(t){L.images.bumpMap=t,e()}).on("error",function(){e()}),i.load()}function l(e){a.extend(L,e)}function c(){(C=t.request("utils:switch:create",{debug:!1})).createSwitch("dimensions"),C.s.dimensions.on()}function d(){u()}function u(){P.renderer=t.request("utils:three:renderer:create",{uid:"rugs",options:{alpha:!0}}),P.renderer.setClearColor(t.settings.colors.white,1),P.renderer.setSize(t.win.width,t.win.height),P.scene=new THREE.Scene,P.container=new THREE.Object3D,P.scene.add(P.container),P.camera=new THREE.PerspectiveCamera(30,t.win.width/t.win.height,1,1e4),P.camera.position.z=300,P.camera.position.y=-10,P.tanFOV=Math.tan(Math.PI/180*P.camera.fov/2),P.windowHeight=540,P.camera.aspect=t.win.width/t.win.height,P.camera.fov=360/Math.PI*Math.atan(P.tanFOV*(t.win.height/P.windowHeight)),P.camera.updateProjectionMatrix()}function p(){P.light.ambient=new THREE.AmbientLight(13421772),P.light.point=new THREE.DirectionalLight(16777215,.3),P.light.point.position.set(0,200,200),P.light.pointTwo=new THREE.PointLight(16777215,.2,650),P.light.pointTwo.position.set(0,180,-200),P.scene.add(P.light.ambient),P.scene.add(P.light.point),P.scene.add(P.light.pointTwo)}function f(){L.Rugs.start({$el:L.$el,$interact:L.$interact,switches:C,images:L.images,controller:L.controller,container:P.container})}function h(){}function v(){L.$el.append(o(P.renderer.domElement))}function m(){L.$el.empty()}function g(){t.vent.on("resize:app",b),t.vent.trigger("resize:trigger"),b(!0)}function w(){t.vent.off("resize:app",b)}function y(){M.enabled=!0,M.now||D()}function x(){M.enabled=!1}function b(e){L.status.active&&(z.width=Math.min(L.$el.width(),I.width),z.height=t.win.height-L.$el.position().top,L.controller.updateLayout({top:z.height}),(z.width!==z.prevWidth||z.height!==z.prevHeight||!0===e||device.touch)&&(C.s.dimensions.on(),TweenLite.killDelayedCallsTo(T),TweenLite.delayedCall(e?0:M.resizeDelay,T),z.prevWidth=z.width,z.prevHeight=z.height))}function T(){L.status.active&&(P.renderer.setSize(z.width,z.height),P.camera.aspect=z.width/z.height,P.camera.fov=360/Math.PI*Math.atan(P.tanFOV*(z.height/P.windowHeight)),P.camera.updateProjectionMatrix(),L.Rugs.updateDimensions(P.renderer,z),P.renderer.render(P.scene,P.camera),C.s.dimensions.softOff(100))}function D(){M.enabled?(M.now=!0,C.isOn&&k&&(L.Rugs.render(P.renderer,P.scene,P.camera),P.renderer.render(P.scene,P.camera))):M.now=!1,M.enabled&&requestAnimationFrame(D)}var $,C,L=e,k=!1,M={resizeDelay:.3,enabled:!1,now:!1},z={width:0,height:0,prevWidth:-1,prevHeight:-1},I={width:2e3,height:757},P={tanFOV:0,windowHeight:0,renderer:{},scene:{},container:{},light:{}};L.images={placeholder:{},placeholderSrc:t.paths.img+"app/core/placeholder.jpg",bumpMap:{},bumpMapSrc:t.paths.img+"app/sections/collection-item/bump-map.jpg"},L.status={active:!1},L.activate=function(){L.status.active=!0,C.start(),v(),y(),L.Rugs.activate(),g(),b(!0)},L.deactivate=function(e){L.status.active=!1,C.stop(),L.Rugs.deactivate(function(){L.status.active||(x(),m(),w(),void 0!==e&&e())})},L.show=function(){k=!0,L.$el.show(),z.prevWidth=-1,z.prevHeight=-1,b(!0),L.Rugs.show(),t.vent.trigger("resize:trigger")},L.hide=function(e){L.Rugs.hide(function(){k=!1,L.$el.hide()},e)},L.setItem=function(e){L.Rugs.setItem(e),b(!0),setTimeout(function(){b(!0)},1)},L.closeItem=function(e){L.Rugs.closeItem(e)},L.addInitializer(function(e){l(e),c(),d(),p(),f(),h()}),device.webGL&&t.commands.execute("loader:preload:add",{fn:function(e){($=t.request("utils:queue:create",{queue:$,list:[{fn:r},{fn:s}]})).on("complete",e),$.start()},numItems:1})}})},{"./rugs/Rugs":57}],57:[function(e,t,i){var n=e("./controllers/Controls"),o=e("./controllers/Rug");t.exports=app.module("CollectionItem.Display.SceneCanvas.Rugs",{startWithParent:!1,define:function(e,t,i,a,r,s){function l(e){s.extend(B,e)}function c(){A.screenWidth=screen.width,A.screenHeight=screen.height,A.screenWidth>=1920?A.imageSize="l":A.screenWidth>=550?A.imageSize="m":A.imageSize="s"}function d(){(R=B.switches.createSwitch("scroll-rug")).off()}function u(){F.topContainer=new THREE.Object3D,F.container=new THREE.Object3D,F.container.position.y=0,F.topContainer.add(F.container),B.container.add(F.topContainer)}function p(){var e;F.props.width=Math.round(F.ratio.x*F.ratio.scale),F.props.height=Math.round(F.ratio.y*F.ratio.scale),F.props.blockWidth=F.props.width/F.grid.rows,F.props.blockHeight=F.props.height/F.grid.columns,F.props.outerRect={x1:.8*F.props.blockWidth-.5*F.props.width,x2:F.props.width-.8*F.props.blockWidth-.5*F.props.width,y1:.8*F.props.blockHeight-.5*F.props.height,y2:F.props.height-.8*F.props.blockHeight-.5*F.props.height},F.props.innerRect={x1:1.8*F.props.blockWidth-.5*F.props.width,x2:F.props.width-1.8*F.props.blockWidth-.5*F.props.width,y1:1.8*F.props.blockHeight-.5*F.props.height,y2:F.props.height-1.8*F.props.blockHeight-.5*F.props.height},F.props.middleRect={x1:2.8*F.props.blockWidth-.5*F.props.width,x2:F.props.width-2.8*F.props.blockWidth-.5*F.props.width,y1:2.8*F.props.blockHeight-.5*F.props.height,y2:F.props.height-2.8*F.props.blockHeight-.5*F.props.height},F.baseGeometry=geometry=new THREE.PlaneGeometry(F.props.width,F.props.height,F.grid.rows,F.grid.columns),F.edgeVertices=[];for(var t=0,i=F.baseGeometry.vertices.length;t<i;++t)(e=F.baseGeometry.vertices[t]).x>=F.props.middleRect.x1&&e.x<=F.props.middleRect.x2&&e.y>=F.props.middleRect.y1&&e.y<=F.props.innerRect.y2?(e.x=1.01*e.x,e.y=1.01*e.y,e.z=3):e.x>=F.props.innerRect.x1&&e.x<=F.props.innerRect.x2&&e.y>=F.props.innerRect.y1&&e.y<=F.props.innerRect.y2?(e.x=1.01*e.x,e.y=1.01*e.y,e.z=2.5):e.x>=F.props.outerRect.x1&&e.x<=F.props.outerRect.x2&&e.y>=F.props.outerRect.y1&&e.y<=F.props.outerRect.y2&&(e.x=1.01*e.x,e.y=1.01*e.y,e.z=1.5)}function f(){for(var e=0,t=F.pool.count;e<t;++e)F.pool.item.push(new o({switches:B.switches,images:B.images,container:F.container,edgeVertices:F.edgeVertices,baseGeometry:F.baseGeometry,index:e}))}function h(){H=new n({multiplier:.2}),(V=B.switches.createSwitch()).off(),(S=B.switches.createSwitch()).off()}function v(){y(),z(),t.vent.on("scroll:app",x),x(!0),H.on("event:press",g).on("event:release",w)}function m(){t.vent.off("scroll:app",x),H.off("event:press",g).off("event:release",w)}function g(){U.grab=!0,V.on(),S.on()}function w(){U.grab=!1,V.softOff(300)}function y(){_.lastOffset=null,TweenLite.killTweensOf(_),TweenLite.set(_,{percentage:0})}function x(e){_.pos=t.win.scrollTop,_.max=-(B.$el.offset().top+.5*B.$el.height()),_.offset=Math.min(0,Math.max(_.max,-_.pos)),_.offset===_.lastOffset&&!0!==e||(TweenLite.to(_,_.animTime,{percentage:_.offset/_.max}),R.on(),R.softOff(1e3*(_.animTime+.1)),_.lastOffset=_.offset)}function b(){}function T(e){O.current=e,q.current=-1,q.previous=null,q.variant=-1,q.total=B.controller.collectionsData[O.current].s.length,M(),b()}function D(e){q.current=e.item,q.variant=e.variant,q.current!==q.previous?($({id:e.item,previous:q.previous,total:q.total,collection:e.collection,variant:e.variant}),q.previous=q.current,q.previousVariant=q.variant):q.variant!==q.previousVariant&&(C({id:e.item,collection:e.collection,variant:e.variant}),q.previousVariant=q.variant)}function $(e){_.animTime=0,y(),V.off(),A.data=B.controller.collectionsData[e.collection].s[e.id].c.v[e.variant],e.texture=A.data.fv.dir+A.data.fv[A.imageSize],F.pool.item[0].show(e),TweenLite.delayedCall(.2,L),z()}function C(e){A.data=B.controller.collectionsData[e.collection].s[e.id].c.v[e.variant],e.texture=A.data.fv.dir+A.data.fv[A.imageSize],F.pool.item[0].changeTexture(e)}function L(){_.animTime=.2}function k(e,t){F.pool.item[0].hide({current:e.id,next:e.next,total:e.total,onComplete:function(){B.status.active||void 0!==t&&t()}})}function M(e){for(var t=0,i=F.pool.count;t<i;++t)F.pool.item[0].hide({next:null,instant:!0})}function z(){E.y=0,E.z=0}function I(){for(var e=0,t=F.pool.count;e<t;++e)F.pool.item[0].update(E)}function P(e){e()}var R,S,H,V,B=e,O={current:-1,previous:-1},q={current:-1,previous:-1,variant:0,previousVariant:-1},W={x:0,y:0},E={z:0,y:-60*Math.PI/180},N={baseWidth:900,baseHeight:657,value:1},_={max:-50,offset:-10,pos:0,percentage:0,lastOffset:null,animTime:.2},F={edgeVertices:[],baseGeometry:{},props:{},grid:{rows:55,columns:65},ratio:{x:4.8,y:7,scale:30},pool:{item:[],count:1}},A={percentage:0,offset:0,targetOffset:0},U={grab:!1};B.status={active:!1},B.activate=function(){B.status.active=!0,O.current=-1,O.previous=-1,M(),TweenLite.killDelayedCallsTo(P),v()},B.deactivate=function(e){B.status.active=!1,H.deactivate(),-1!==O.currrent&&-1!==q.current?(k({id:q.current,next:null},e),m(),U.grab=!1,V.off(),S.off()):void 0!==e&&e()},B.show=function(){z(),H.activate({$el:B.$interact}),F.pool.item[0].forceShow()},B.hide=function(e,t){H.deactivate(),F.pool.item[0].forceHide(function(){U.grab=!1,V.off(),S.off(),void 0!==e&&e()},t)},B.setCollection=T,B.setItem=function(e){O.current!==e.collection&&T(e.collection),D(e)},B.closeItem=function(e){O.current===e.collection?k({id:e.item,total:q.total,next:e.next}):M()},B.render=function(e,t,i){0!==(W=H.getPositions()).x||0!==W.y||0!==W.z||U.grab||S.off(),E.offsetY=65*_.percentage*2,F.topContainer.position.y=50*_.percentage,A.percentage=(65+180*E.y/Math.PI)/65*100,E.scrollOffset=65*A.percentage,E.z+=W.x,E.z=E.z%360,E.y+=.02*W.y,E.y=Math.max(-65*Math.PI/180,Math.min(0,E.y)),E.zoom=.5*A.percentage,F.topContainer.position.y=50*_.percentage-.2*E.zoom,i.position.z=300+.9*E.zoom,I()},B.updateDimensions=function(e,i){N.ratio=Math.min(i.width/N.baseWidth,i.height/N.baseHeight),N.ratio=Math.min(N.ratio,1.72),N.ratioOffset=N.ratio-1,N.ratioOffset=N.ratioOffset>0?.8*N.ratioOffset:.86*N.ratioOffset,t.win.width<=700?F.container.position.y=10:F.container.position.y=12,N.ratio=1+N.ratioOffset,N.ratio=Math.min(N.ratio,1.5),F.container.scale.set(N.ratio,N.ratio,N.ratio)},B.addInitializer(function(e){l(e),c(),d(),u(),p(),f(),h()})}})},{"./controllers/Controls":58,"./controllers/Rug":59}],58:[function(e,t,i){t.exports=Marionette.Controller.extend({initialize:function(e){function t(){d.addClass("cursor-move"),d.on(device.down,n).on(device.move,$.throttle(10,o)),$(window).on(device.up,a)}function i(){void 0!==d&&(d.removeClass("cursor-move"),d.off(device.down,n).off(device.move,$.throttle(10,o))),$(window).off(device.up,a)}function n(e){if(device.desktop&&1!==e.which)return!1;b.x=b.y=b.z=0,u.trigger("event:press",e),d.addClass("cursor-grab"),f=!1,device.touch&&(e=e.originalEvent.touches[0]),D.x=g.x,D.y=g.y,D.z=g.z,y.x=e.clientX,y.y=e.ClientY,w=y,C=[]}function o(e){f||(e.preventDefault(),u.trigger("event:move",e),device.touch&&(e=e.originalEvent.touches[0]),x.x=D.x+e.clientX-y.x,x.y=D.y+e.clientY-y.y,C.length>60&&C.splice(0,30),C.push({x:e.clientX,y:e.clientY,time:Date.now()}),r())}function a(e){d.removeClass("cursor-grab"),f=!0,C.length=0,u.trigger("event:release",e)}function r(){p.now=Date.now(),p.positions=C,p.posLen=p.positions.length,p.last=p.positions[p.posLen-1],s(),isNaN(b.x)&&(b.x=0),isNaN(b.y)&&(b.y=0),isNaN(b.z)&&(b.z=0)}function s(){for(b.x=b.y=b.z=0,p.endPosIndex=p.posLen-1,p.startPosIndex=p.endPosIndex,p.i=p.endPosIndex;p.i--&&p.i>0&&p.positions[p.i].time>p.last.time-100;)p.startPosIndex=p.i;p.first=p.positions[p.startPosIndex],p.timeOffset=p.last.time-p.first.time,p.delta=p.timeOffset/(1e3/60),p.moved={x:p.last.x-p.first.x,y:p.last.y-p.first.y},b.x=p.moved.x/p.delta,b.y=p.moved.y/p.delta}function l(){b.x*=h,b.y*=h,b.z*=h,f&&(g.x+=b.x,g.y+=b.y,g.z+=b.z,x.x=g.x,x.y=g.y,x.z=g.z),Math.abs(b.x)<.3&&(b.x=0),Math.abs(b.y)<.3&&(b.y=0),Math.abs(b.z)<.3&&(b.z=0),c()}function c(){p.multiplier=v,T.x=b.x*p.multiplier,T.y=b.y*p.multiplier,T.z=b.z*p.multiplier}var d,u=this,p={},f=!0,h=.94,v=.5,m={locked:!1,threshold:40,axis:"none"},g={x:0,y:0,z:0},w={x:0,y:0,z:0},y={x:0,y:0,z:0},x={x:0,y:0,z:0},b={x:0,y:0,z:0},T={x:0,y:0,z:0},D={x:0,y:0,z:0},C=[];u.status={active:!1},u.activate=function(e){d=e.$el,u.status.active=!0,t()},u.deactivate=function(e){u.status.active=!1,i(),void 0!==e&&e()},u.getPositions=function(){return l(),T},_.extend(u,e),v=u.multiplier,m.threshold*=v}})},{}],59:[function(e,t,i){t.exports=Marionette.Controller.extend({initialize:function(e){function t(){m=M.switches.createSwitch("rug-"+app.getUID()),g=M.switches.createSwitch("tex-"+app.getUID()),m.off(),g.off()}function i(){w=M.baseGeometry,y=M.baseGeometry}function n(){b=new THREE.Texture(M.images.placeholder),(T=new THREE.Texture(M.images.bumpMap)).needsUpdate=!0,b.needsUpdate=!0,x=new THREE.MeshPhongMaterial({color:16777215,shininess:2,bumpMap:T,bumpScale:1,wireframe:!1,map:b,transparent:!0}),D=new THREE.MeshBasicMaterial({color:14540253,wireframe:!0})}function o(){$=new THREE.Object3D,C=new THREE.Object3D,k=new THREE.Mesh(y,D),L=new THREE.Mesh(w,x),$.add(C),C.add(L),C.add(k),k.scale.set(.98,.98,.1),C.rotation.x=-70*Math.PI/180,L.rotation.z=k.rotation.z=-90*Math.PI/180}function a(e){m.on(),TweenLite.killTweensOf($.scale),TweenLite.killTweensOf($.rotation),TweenLite.killTweensOf($.position),null!==e.previous?c(e):d(e)}function r(e){m.off(200),TweenLite.killTweensOf($.scale),TweenLite.killTweensOf($.rotation),TweenLite.killTweensOf($.position),null!==e.next?l(e):s(e)}function s(e){m.on(),TweenLite.killTweensOf($.position),TweenLite.to($.rotation,!0===e.instant?0:.5,{x:-5*Math.PI/180}),TweenLite.to($.position,!0===e.instant?0:.5,{y:-70,onComplete:function(){M.status.shown=!1,m.off(),M.container.remove($),void 0!==e.onComplete&&e.onComplete()}})}function l(e){m.on(),e.next>e.current&&(0!==e.current||e.next!==e.total-1)||e.current===e.total-1&&0===e.next?(TweenLite.to($.rotation,.5,{y:-40*Math.PI/180}),TweenLite.to($.position,.5,{x:-40,y:0,onComplete:function(){M.status.shown=!1,m.off(),M.container.remove($),void 0!==e.onComplete&&e.onComplete()}})):(TweenLite.to($.rotation,.5,{y:40*Math.PI/180}),TweenLite.to($.position,.5,{x:40,y:0,onComplete:function(){M.status.shown=!1,m.off(),M.container.remove($),void 0!==e.onComplete&&e.onComplete()}}))}function c(e){TweenLite.set($.rotation,{y:0}),TweenLite.set($.scale,{x:1,y:1,z:1}),e.id>e.previous&&(0!==e.previous||e.id!==e.total-1)||0===e.id&&e.previous===e.total-1?(TweenLite.set($.position,{x:40,y:0}),TweenLite.set($.rotation,{y:40*Math.PI/180})):(TweenLite.set($.position,{x:-40,y:0}),TweenLite.set($.rotation,{y:-40*Math.PI/180})),TweenLite.to($.rotation,.5,{x:0,y:0}),TweenLite.to($.position,.5,{x:0,y:0,onComplete:function(){m.off()}})}function d(e,t){TweenLite.set($.scale,{x:1,y:1,z:1}),TweenLite.set($.rotation,{x:t?-45*Math.PI/180:-5*Math.PI/180,y:0}),TweenLite.set($.position,{x:0,y:-80}),TweenLite.to($.rotation,1,{x:0}),TweenLite.to($.position,1,{y:0,onComplete:function(){m.off()}})}function u(e,t){g.on(),I.currentTexture=e.texture,void 0!==z[e.texture]?f(t,z[e.texture],e.texture):p(e.texture,t)}function p(e,t){var i,n=app.request("utils:loader:image:load",{src:e,timeout:40});h(t),n.on("complete",function(t){i=new THREE.Texture(t),z[e]=i,setTimeout(function(){I.currentTexture===e&&v(i)},300)}).on("error",function(){g.softOff(310)}),n.load()}function f(e,t,i){h(e,function(){I.currentTexture===i&&v(t)})}function h(e,t){TweenLite.killTweensOf(x),TweenLite.to(x,!0===e?0:.3,{opacity:0,onComplete:function(){void 0!==t&&t()}})}function v(e){x.map=e,x.bumpMap=e,x.bumpMap.needsUpdate=!0,x.map.needsUpdate=!0,g.softOff(310),TweenLite.killTweensOf(x),TweenLite.to(x,.3,{opacity:1})}var m,g,w,y,x,b,T,D,$,C,L,k,M=this,z={},I={currentTexture:null};M.status={active:!1,shown:!1},M.update=function(e){M.status.shown&&(C.rotation.x=Math.max(-65*Math.PI/180,Math.min(0,e.y+.7*e.offsetY*Math.PI/180)),C.rotation.z=e.z*Math.PI/180)},M.show=function(e){M.status.active||a(e),M.status.shown=!0,M.status.active=!0,u(e,!0),M.container.add($)},M.hide=function(e){M.status.active&&(r(e),M.status.active=!1)},M.forceShow=function(){m.on(),d(0,!0)},M.forceHide=function(e,t){m.on(),TweenLite.killTweensOf($.position),TweenLite.to($.rotation,t?0:.5,{x:-5*Math.PI/180}),TweenLite.to($.position,t?0:.5,{y:-70,onComplete:function(){m.off(),void 0!==e&&e()}})},M.changeTexture=function(e){u(e)},_.extend(M,e),t(),i(),n(),o()}})},{}],60:[function(e,t,i){e("./rugs/Rugs"),t.exports=app.module("CollectionItem.Display.SceneStandard",{startWithParent:!1,define:function(e,t,i,n,o,a){function r(e){a.extend(h,e)}function s(){f=h.$el}function l(){h.Rugs.start({$el:f,controller:h.controller})}function c(){t.vent.on("resize:app",u),t.vent.trigger("resize:trigger"),u(!0),setTimeout(function(){u(!0)},10)}function d(){t.vent.off("resize:app",u)}function u(e){h.status.active&&(v.width=Math.min(h.$el.width(),m.width),v.height=t.win.height-h.$el.position().top,h.controller.updateLayout({top:v.height}),(v.width!==v.prevWidth||v.height!==v.prevHeight||!0===e||device.touch)&&(o(".scene-standard",f).width(v.width),p(),v.prevWidth=v.width,v.prevHeight=v.height))}function p(){h.status.active&&(f.height(v.height),h.Rugs.updateDimensions(v))}var f,h=e,v={width:0,height:0,prevWidth:-1,prevHeight:-1},m={width:1200,height:757};h.status={active:!1},h.activate=function(){h.status.active=!0,h.Rugs.activate(),c()},h.deactivate=function(e){h.status.active=!1,h.Rugs.deactivate(function(){h.status.active||(d(),void 0!==e&&e())})},h.show=function(){h.$el.show(),h.Rugs.show(),v.prevWidth=-1,v.prevHeight=-1,u(!0),t.vent.trigger("resize:trigger")},h.hide=function(){h.$el.hide(),h.Rugs.hide()},h.setItem=function(e){h.Rugs.setItem(e),u(!0),setTimeout(function(){u(!0)},1)},h.closeItem=function(e){h.Rugs.closeItem(e)},h.addInitializer(function(e){r(e),s(),l()})}})},{"./rugs/Rugs":61}],61:[function(e,t,i){var n=e("./controllers/Rug");t.exports=app.module("CollectionItem.Display.SceneStandard.Rugs",{startWithParent:!1,define:function(e,t,i,o,a,r){function s(e){r.extend(y,e)}function l(){w=y.$el,x.rugView=a(".rug-view",w)}function c(){C.screenWidth=screen.width,C.screenHeight=screen.height,C.screenWidth>=1280?C.imageSize="l":C.screenWidth>=550?C.imageSize="m":C.imageSize="s"}function d(){$=new n({$el:x.rugView})}function u(e){b.current=e,T.current=-1,T.previous=null,T.variant=-1,T.total=y.controller.collectionsData[b.current].s.length,m()}function p(e){T.current=e.item,T.variant=e.variant,T.current!==T.previous?(f({id:e.item,previous:T.previous,total:T.total,collection:e.collection,variant:e.variant}),T.previous=T.current,T.previousVariant=T.variant):T.variant!==T.previousVariant&&(h({id:e.item,collection:e.collection,variant:e.variant}),T.previousVariant=T.variant)}function f(e){C.data=y.controller.collectionsData[e.collection].s[e.id].c.v[e.variant],""!==C.data.ps[C.imageSize]?(e.texture=C.data.ps.dir+C.data.ps[C.imageSize],e.rotate=!1):(e.texture=C.data.fv.dir+C.data.fv[C.imageSize],e.rotate=!!Modernizr.csstransforms),$.show(e)}function h(e){C.data=y.controller.collectionsData[e.collection].s[e.id].c.v[e.variant],""!==C.data.ps[C.imageSize]?(e.texture=C.data.ps.dir+C.data.ps[C.imageSize],e.rotate=!1):(e.texture=C.data.fv.dir+C.data.fv[C.imageSize],e.rotate=!!Modernizr.csstransforms),$.changeTexture(e)}function v(e,t){$.hide({current:e.id,next:e.next,total:e.total,onComplete:function(){y.status.active||void 0!==t&&t()}})}function m(e){$.hide({next:null,instant:!0})}function g(e){e()}var w,y=e,x={},b={current:-1,previous:-1},T={current:-1,previous:-1,variant:0,previousVariant:-1},D={baseWidth:950,baseHeight:657,value:1},$={},C={percentage:0,offset:0,targetOffset:0};y.status={active:!1},y.activate=function(){y.status.active=!0,b.current=-1,b.previous=-1,m(),TweenLite.killDelayedCallsTo(g)},y.deactivate=function(e){y.status.active=!1,-1!==b.currrent&&-1!==T.current?v({id:T.current,next:null},e):void 0!==e&&e()},y.show=function(){},y.hide=function(){},y.setCollection=u,y.setItem=function(e){b.current!==e.collection&&u(e.collection),p(e)},y.closeItem=function(e){b.current===e.collection?v({id:e.item,total:T.total,next:e.next}):m()},y.updateDimensions=function(e){D.ratio=Math.min(e.width/D.baseWidth,e.height/D.baseHeight),D.ratio=Math.min(D.ratio,1.72),D.ratioOffset=D.ratio-1,D.ratio=1+D.ratioOffset,D.ratio=Math.min(D.ratio,1.5),$.updateDimensions()},y.addInitializer(function(e){s(e),l(),c(),d()})}})},{"./controllers/Rug":62}],62:[function(e,t,i){t.exports=Marionette.Controller.extend({initialize:function(e){function t(e){TweenLite.killTweensOf(b.move),null!==e.previous?a(e):r(e)}function i(e){null!==e.next?o(e):n(e)}function n(e){TweenLite.killTweensOf(b.move),TweenLite.to(b.move,.5,{y:200,onComplete:function(){x.status.shown=!1,void 0!==e.onComplete&&e.onComplete()}})}function o(e){e.next>e.current&&(0!==e.current||e.next!==e.total-1)||e.current===e.total-1&&0===e.next?TweenLite.to(b.move,.5,{x:-200,y:0,force3D:app.force3D,onComplete:function(){x.status.shown=!1,void 0!==e.onComplete&&e.onComplete()}}):TweenLite.to(b.move,.5,{x:200,y:0,force3D:app.force3D,onComplete:function(){x.status.shown=!1,void 0!==e.onComplete&&e.onComplete()}})}function a(e){e.id>e.previous&&(0!==e.previous||e.id!==e.total-1)||0===e.id&&e.previous===e.total-1?TweenLite.set(b.move,{x:200,y:0,force3D:app.force3D}):TweenLite.set(b.move,{x:-200,y:0,force3D:app.force3D}),TweenLite.to(b.move,.5,{x:0,y:0,force3D:app.force3D})}function r(e){TweenLite.set(b.move,{y:200,force3D:app.force3D}),TweenLite.to(b.move,1,{y:0,force3D:app.force3D})}function s(e,t){L.currentTexture!==e.texture&&(L.currentTexture=e.texture,void 0!==C[e.texture]?c(C[e.texture],e.rotate,e.texture,t):l(e.texture,e.rotate,t))}function l(e,t,i){d(void 0,i);var n=app.request("utils:loader:image:load",{src:e,timeout:40});p(),n.on("complete",function(n){C[e]=n,L.currentTexture===e&&c(n,t,e,i)}).on("error",function(){}),n.load()}function c(e,t,i,n){d(function(){L.currentTexture===i&&u(e,t,i)},n)}function d(e,t){TweenLite.killTweensOf(y),TweenLite.to(y,t?0:.3,{opacity:0,force3D:app.force3D,onComplete:function(){void 0!==e&&e()}})}function u(e,t,i){z.shown=!0,y.attr("src",i),f(),t?(z.dimensions.height=e.naturalWidth,z.dimensions.width=e.naturalHeight,TweenLite.set(y,{rotation:90,width:z.dimensions.height,height:z.dimensions.width,force3D:app.force3D}),z.rotate=!0,TweenLite.set(z.offset,{x:Math.round(.5*-z.dimensions.height),y:Math.round(.5*-z.dimensions.width),force3D:app.force3D})):(z.dimensions.width=e.naturalWidth,z.dimensions.height=e.naturalHeight,z.rotate=!1,TweenLite.set(y,{rotation:0,width:z.dimensions.width,height:z.dimensions.height,force3D:app.force3D}),TweenLite.set(z.offset,{x:Math.round(.5*-z.dimensions.width),y:Math.round(.5*-z.dimensions.height),force3D:app.force3D})),z.bounds={x1:.5*z.dimensions.width,x2:.5*-z.dimensions.width,y1:.5*z.dimensions.height,y2:.5*-z.dimensions.height},m(),TweenLite.to(y,.3,{opacity:1,force3D:app.force3D})}function p(){h()}function f(){v()}function h(){clearTimeout(T.loader),T.loader=setTimeout(function(){b.loader.show()},300)}function v(){clearTimeout(T.loader),b.loader.hide()}function m(){z.shown&&(k.width=x.$el.width(),k.height=x.$el.height(),M.ratio=Math.min(1,Math.min((k.width-10)/z.dimensions.width,(k.height-(z.rotate?100:280))/z.dimensions.height)),M.ratio=Math.max(.25,M.ratio),z.rotate&&(M.ratio=app.win.width<=700||app.win.width>1500?.9*M.ratio:app.win.width>1199?.9*M.ratio:.7*M.ratio),g(M.ratio))}function g(e){D?(z.rotate?(z.td.height=Math.round(z.dimensions.width*e),z.td.width=Math.round(z.dimensions.height*e)):(z.td.width=Math.round(z.dimensions.width*e),z.td.height=Math.round(z.dimensions.height*e)),z.td.offsetX=Math.round(.5*-z.td.width),z.td.offsetY=Math.round(.5*-z.td.height),TweenLite.set(y,{width:z.td.width,height:z.td.height,force3D:app.force3D}),TweenLite.set(z.offset,{x:z.td.offsetX,y:z.td.offsetY,force3D:app.force3D})):TweenLite.set(z.container,{scale:e,force3D:app.force3D})}var w,y,x=this,b={},T={},D=!1,C={},L={currentTexture:null},k={width:0,height:0},M={ratio:0,realRatio:1},z={shown:!1,rotate:!1,dimensions:{width:600,height:500},td:{},bounds:{x1:0,x2:0,y1:0,y2:0}};x.status={active:!1,shown:!1},x.show=function(e){x.status.active||t(e),s(e,!0),x.status.shown=!0,x.status.active=!0},x.hide=function(e){x.status.active&&(i(e),x.status.active=!1)},x.changeTexture=function(e){s(e,!1)},x.updateDimensions=m,_.extend(x,e),D=!0,w=x.$el,y=$("img",w),z.container=$(".img-container",w),z.move={x:0,y:0},b.move=$(".move",w),b.loader=$(".image-load",w),z.offset=$(".offset",w),z.$el=y}})},{}],63:[function(e,t,i){t.exports=e(41)},{}],64:[function(e,t,i){t.exports=e(53)},{}],65:[function(e,t,i){t.exports='<div class="app-content--fill"><div class="app-content--top"><div class="app-central"><div class="scene-container"><div class="scene scene-2d"><div class="scene-standard"><div class="rug-view"><div class="img-container"><div class="move"><div class="offset"> <img src=""/></div></div></div><div class="image-load"><div class="app-spinner"></div></div></div></div></div><div class="scene scene-3d"></div></div></div></div><div class="scene-wipeout app-wipeout"></div><div class="app-central app-content--standard"><div class="content"></div><div class="app-base-controls"></div></div><div class="zoom-region"></div><div class="room-preview-region"></div></div>'},{}],66:[function(e,t,i){e("./display/Display");var n=e("./views/templates/LayoutTemplate.html"),o=e("./models/LayoutModel"),a=e("./views/LayoutView");t.exports=app.module("Collection",{startWithParent:!1,define:function(e,t,i,r,s,l){function c(e){l.extend(x,e),w=x.region.$el}function d(){t.cmd.execute("router:route:register",{id:"collection",route:"(/)collections/:page(/)",controller:{start:f,stop:v}})}function u(){y=new a({template:l.template(n),model:new o}),x.region.show(y),y.addRegions({contentRegion:s(".content",y.$el)})}function p(){x.Display.start({region:x.region,layout:y,$controls:s(".app-base-controls",y.$el),data:x.data})}function f(){m()}function h(e){w.show(),t.vent.trigger("app:ui:theme:set","dark"),x.status.active=!0,-1===x.status.currentCollection?(x.Display.activate(),x.Display.setCollection({collection:e.collectionIndex,first:!0})):x.Display.setCollection({collection:e.collectionIndex,first:!1}),x.status.currentCollection=e.collectionIndex,t.vent.trigger("app:ui:footer:hide"),TweenLite.killDelayedCallsTo(g),TweenLite.delayedCall(.1,g)}function v(e){x.status.active=!1,x.Display.deactivate(function(){x.status.currentCollection=-1,w.hide(),e()})}function m(){var e=new RegExp(String(i.history.fragment).replace(/\//g,"(?:/)?")+"?$"),n=-1;l.find(t.data.core.collections.l,function(t,i){return!!t.u.match(e)&&(n=i,!0)}),n>-1?h({collectionIndex:n}):t.cmd.execute("router:route:set","/collections/")}function g(){t.vent.trigger("resize:trigger"),t.vent.trigger("app:section:shown")}var w,y,x=e;x.status={active:!0,currentCollection:-1},x.addInitializer(function(e){c(e),d(),u(),p()})}})},{"./display/Display":67,"./models/LayoutModel":83,"./views/LayoutView":84,"./views/templates/LayoutTemplate.html":85}],67:[function(e,t,i){e("./content/Content");var n=e("./controllers/CollectionManager");t.exports=app.module("Collection.Display",{startWithParent:!1,define:function(e,t,i,o,a,r){function s(e){r.extend(f,e),p.setCollectionsData(t.data.core.collections.l.slice(0))}function l(){f.Content.start({controller:p,region:f.layout.contentRegion})}function c(){(u=t.request("ui:view:create",{view:"ControlsView",model:"ControlsModel",modelProps:{back:f.data.st.b,backURL:f.data.st.curl,quickJumpTitle:f.data.st.qj},options:{el:f.$controls}})).render()}function d(){p.setup({content:f.Content,controls:u})}var u,p,f=e;f.collectionsData=[],f.activate=function(){f.status.active=!0,p.activate()},f.deactivate=function(e){f.status.active=!1,p.deactivate(e)},f.setCollection=function(e){p.setCollection(e),t.vent.trigger("app:ui:bar:theme:set",p.collectionsData[e.collection].c),t.cmd.execute("router:pid:set",p.collectionsData[e.collection].pid),t.cmd.execute("router:page:title:set",p.collectionsData[e.collection].ht)},f.status={active:!1},f.addInitializer(function(e){s(e),l(),c(),d()}),p=new n}})},{"./content/Content":68,"./controllers/CollectionManager":82}],68:[function(e,t,i){e("./viewer/Viewer");var n=e("./views/templates/LayoutTemplate.html"),o=e("./models/LayoutModel"),a=e("./views/LayoutView");t.exports=app.module("Collection.Display.Content",{startWithParent:!1,define:function(e,t,i,r,s,l){function c(e){l.extend(h,e),p=h.region.$el}function d(){f=new a({template:l.template(n),model:new o}),h.region.show(f),f.addRegions({viewerRegion:s(".collections",f.$el)})}function u(){h.Viewer.start({controller:h.controller,region:f.viewerRegion})}var p,f,h=e;h.status={active:!1},h.activate=function(){h.Viewer.activate()},h.deactivate=function(e){h.Viewer.deactivate(e)},h.setCollection=function(e){h.Viewer.setCollection(e)},h.addInitializer(function(e){c(e),d(),u()})}})},{"./models/LayoutModel":69,"./viewer/Viewer":70,"./views/LayoutView":80,"./views/templates/LayoutTemplate.html":81}],69:[function(e,t,i){t.exports=e(41)},{}],70:[function(e,t,i){var n=e("./models/ItemModel"),o=e("./views/ItemView"),a=Backbone.Collection.extend({model:n}),r=Marionette.CollectionView.extend({tagName:"div",className:"views",childView:o,onAddChild:function(e){this.trigger("child:added",e)}});t.exports=app.module("Collection.Display.Content.Viewer",{startWithParent:!1,define:function(e,t,i,n,o,s){function l(e){s.extend(L,e),T=L.region.$el}function c(){D=new a([]),$=new r({collection:D,childViewEventPrefix:"view"}),L.region.show($)}function d(){k.screenWidth=screen.width,k.screenHeight=screen.height,k.screenWidth>=740?k.imageSize=device.touch&&!device.mobile&&device.retina?"m":"s":k.screenWidth>=550?k.imageSize="s":k.imageSize="xs"}function u(){$.on("child:added",p)}function p(e){e.setControllers(L,L.controller),M.collection[e.model.get("cid")]=e}function f(e){M.current=e,M.current!==M.previous&&(null!==M.previous?h({id:M.previous,next:e}):m({id:e}),M.previous=M.current)}function h(e){M.collection[e.id].hide(function(){M.current===e.next&&m({id:M.current})})}function v(e,t){M.collection[e.id].hide(function(){L.status.active||void 0!==t&&t()})}function m(e){M.collection[e.id].show(),L.controller.updateControls(e.id)}function g(e){void 0===M.collection[e]&&(C=w(L.controller.collectionsData[e],e),D.add(C))}function w(e,t){return{cid:t,title:e.t,description:e.d,footnote:e.n,rugs:y(e.s,e.c)}}function y(e,t){for(var i=[],n={},o=0,a=e.length;o<a;++o)e[o].c.grp?(n={simpleTitle:e[o].t,title:e[o].t+(""!==e[o].c.grpt?' <span class="d-col">| '+e[o].c.grpt+"</span>":""),url:e[o].u,img:e[o].c.v[0].fv.dir+e[o].c.v[0].fv[k.imageSize],imgs:b(e[o].c.v),theme:t},i.push(n)):i=i.concat(x(e[o],t));return i}function x(e,t){for(var i=[],n={},o=0,a=e.c.v.length;o<a;++o)n={simpleTitle:e.t+" ("+e.c.v[o].t+")",title:e.t===e.c.v[o].t?"<span>"+e.t+"</span>":"<span>"+e.t+'</span> <span class="d-col">| '+e.c.v[o].t+"</span>",url:e.u+(e.c.v.length>1?"?c="+(o+1):""),img:e.c.v[o].fv.dir+e.c.v[o].fv[k.imageSize],imgs:[],theme:t},i.push(n);return i}function b(e){for(var t=[],i={},n=0,o=e.length;n<o;++n)i={tid:n,src:e[n].fv.dir+e[n].fv[k.imageSize]},t.push(i);return t}var T,D,$,C,L=e,k={},M={collection:{},current:-1,previous:null};L.rowPatterns={6:{pattern:[{n:5,item:["s","s","dw","s","s"]},{n:6,item:["s","s","s","s","s","s"]},{n:4,item:["s","dw","s","dw"]},{n:3,item:["dw","dw","dw"]}],overflowPattern:{5:{pattern:[{item:["s","s","dw","s","s"]}]},4:{pattern:[{item:["s","s","dw","dw"]}]},3:{pattern:[{item:["dw","dw","dw"]}]},2:{pattern:[{item:["dw","dw"]}]},1:{pattern:[{item:["dw"]}]}}},5:{pattern:[{n:4,item:["s","s","dw","s"]},{n:5,item:["s","s","s","s","s"]},{n:3,item:["s","dw","dw"]}],overflowPattern:{4:{pattern:[{item:["s","s","dw","s"]}]},3:{pattern:[{item:["dw","s","dw"]}]},2:{pattern:[{item:["dw","dw"]}]},1:{pattern:[{item:["dw"]}]}}},4:{pattern:[{n:3,item:["s","dw","s"]},{n:4,item:["s","s","s","s"]},{n:2,item:["dw","dw"]}],overflowPattern:{3:{pattern:[{item:["dw","s","s"]}]},2:{pattern:[{item:["dw","dw"]}]},1:{pattern:[{item:["dw"]}]}}},3:{pattern:[{n:2,item:["dw","s"]},{n:3,item:["s","s","s"]}],overflowPattern:{2:{pattern:[{item:["s","dw"]}]},1:{pattern:[{item:["dw"]}]}}},2:{pattern:[{n:1,item:["dw"]},{n:2,item:["s","s"]},{n:2,item:["s","s"]}],overflowPattern:{1:{pattern:[{item:["dw"]}]}}},1:{pattern:[{n:1,item:["s"]}]}},L.status={active:!1},L.setCollection=function(e){L.status.active&&(g(e.collection),f(e.collection))},L.activate=function(){L.status.active=!0,M.current=-1,M.previous=null},L.deactivate=function(e){L.status.active=!1,-1!==M.current?v({id:M.current},e):void 0!==e&&e()},L.addInitializer(function(e){l(e),c(),d(),u()})}})},{"./models/ItemModel":72,"./views/ItemView":75}],71:[function(e,t,i){t.exports=Backbone.Model.extend({defaults:{src:""}})},{}],72:[function(e,t,i){t.exports=Backbone.Model.extend({defaults:{title:"",description:"",footnote:"",rugs:[]}})},{}],73:[function(e,t,i){t.exports=Backbone.Model.extend({defaults:{title:"",url:"#",img:"",imgs:[],theme:"#CCC"}})},{}],74:[function(e,t,i){var n=e("./templates/HoverTemplate.html");t.exports=Backbone.Marionette.ItemView.extend({template:_.template(n),className:"",tagName:"li",initialize:function(e){},onRender:function(){function e(e,i,n){(t.status.active||!0===e||!0===n)&&(t.status.active=!1,TweenLite.to(t.$el,e?0:1,{delay:void 0!==i?e?0:i:0,opacity:0,z:-1,force3D:app.force3D,onComplete:function(){t.$el.hide(),t.status.shown=!1}}))}var t=this;t.status={active:!1,shown:!1},t.hide=e,t.show=function(e){t.status.active=!0,t.$el.show(),t.$el.parent().append(t.$el),TweenLite.killTweensOf(t.$el),TweenLite.set(t.$el,{opacity:0,z:-1,force3D:app.force3D}),TweenLite.to(t.$el,e?0:1,{opacity:1,z:-1,force3D:app.force3D}),t.status.shown=!0},e(!0)}})},{"./templates/HoverTemplate.html":77}],75:[function(e,t,i){var n=e("./templates/ItemTemplate.html"),o=e("../models/RugModel"),a=e("./RugView"),r=Backbone.Collection.extend({model:o});t.exports=Backbone.Marionette.CompositeView.extend({template:_.template(n),className:"item-view pad-r-l",tagName:"div",childView:a,childViewContainer:".listing",initialize:function(e){this.collection=new r(this.model.get("rugs"))},onRender:function(){function e(){L=!0}function t(){T.options.transitionDuration="0.4s"}function i(){I.start({wait:.5,onComplete:n})}function n(){$("html, body").animate({scrollTop:1},1),I.fadeOut({time:.5}),a(),z.show()}function o(e){I.fadeIn({time:.5,onComplete:function(){$("html, body").animate({scrollTop:1},1),w.hide(),void 0!==e&&e()}}),r(),z.hide()}function a(){for(var e=0,t=M.view.length;e<t;++e)M.view[e].hide(!0),M.view[e].show({delay:.1*e})}function r(){for(var e=0,t=M.view.length;e<t;++e)M.view[e].hide(!1,{delay:.1*e})}function s(){app.vent.on("resize:app",c),u(!0),u()}function l(){app.vent.off("resize:app",c)}function c(e){TweenLite.killDelayedCallsTo(d),TweenLite.delayedCall(e?0:device.touch?0:.3,d)}function d(){requestAnimationFrame(u)}function u(e){y.css({width:"auto"}),C.width=y.width(),C.height=app.win.height,y.css({width:C.width}),C.width>1390&&M.view.length>=6?k.columns=6:C.width>1e3&&M.view.length>=5?k.columns=5:C.width>840&&M.view.length>=4?k.columns=4:C.width>540&&M.view.length>=3?k.columns=3:C.width>=300&&M.view.length>=2?k.columns=2:k.columns=1,k.rowPattern=D.manager.rowPatterns[k.columns],k.columnWidth=Math.min(320,Math.floor(C.width/k.columns)),y.css({width:k.columnWidth*k.columns}),k.lastColumnWidth=C.width-k.columnWidth*(k.columns-1),p(),k.currentColumns=k.columns}function p(e){k.currentColumns!==k.columns&&f(),v(),T.options.masonry.columnWidth=k.columnWidth,T.layout()}function f(){k.rowPatternBest=h(),M.rows.row=[],k.rowPatternIndex=0,k.rowPatternDepth=0,k.currentRow={item:[]};for(var e=0,t=M.view.length;e<t;++e)M.view.length===k.columns?k.currentRow.item.push({pat:"s",view:M.view[e]}):(M.view.length-e<k.rowPattern.pattern[k.rowPatternBest[k.rowPatternIndex]].item.length-k.rowPatternDepth&&(k.remain=M.view.length-e,k.specialPattern=k.remain,k.rowPattern=k.rowPattern.overflowPattern[k.specialPattern],k.rowPatternIndex=0,k.rowPatternDepth=0,k.rowPatternBest=[0,0,0,0,0,0,0],k.currentRow={item:[]}),k.currentRow.item.push({pat:L?"s":k.rowPattern.pattern[k.rowPatternBest[k.rowPatternIndex]].item[k.rowPatternDepth],view:M.view[e]}),k.rowPatternDepth++,k.rowPatternDepth>k.rowPattern.pattern[k.rowPatternBest[k.rowPatternIndex]].item.length-1&&(M.rows.row.push(k.currentRow),k.rowPatternIndex++,k.rowPatternDepth=0,k.rowPatternIndex=k.rowPatternIndex%k.rowPatternBest.length,k.rowPattern.pattern[k.rowPatternBest[k.rowPatternIndex]].item=_.shuffle(k.rowPattern.pattern[k.rowPatternBest[k.rowPatternIndex]].item),k.currentRow={item:[]}));k.currentRow.item.length>0&&M.rows.row.push(k.currentRow)}function h(){for(var e=0,t=!1,i=!1,n=M.view.length,o=k.rowPattern.pattern.length,a=[],r=[],s=n,l=0;s>0;)(s-=k.rowPattern.pattern[l].n)>=0&&(a[l]=l),l++,l%=k.rowPattern.pattern.length;if(0===s)t=!0,i=!0;else for(;!i&&e<50;){for(s=n,r=[],l=0;s>0;)b=Math.floor(Math.random()*o),(s-=k.rowPattern.pattern[b].n)>=0&&(r[l]=b),l++;0===s&&(i=!0),e++}return i&&!t?r:a}function v(){m();for(var e=0,t=M.rows.row.length;e<t;++e)g(M.rows.row[e],e);app.vent.trigger("scroll:trigger")}function m(){$(".row-clear",w).remove()}function g(e,t){for(var i=0,n=e.item.length;i<n;++i)e.item[i].view.update({size:e.item[i].pat,numColumns:k.columns,columnWidth:k.columnWidth}),i!==e.item.length-1||L||$('<div class="row-clear clear"></div>').insertAfter(e.item[i].view.$el)}var w,y,x,b,T,D=this,C={width:0,height:0},L=!1,k={rowPattern:{}},M={dimensions:{column:{}},rows:{row:[]},view:[]},z={},I={};D.controller={},D.manager={},D.status={active:!1},D.setControllers=function(e,t){D.manager=e,D.controller=t},D.hide=function(e){D.status.active?(D.status.active=!1,l(),o(e)):void 0!==e&&e()},D.show=function(){D.status.active||(T.options.transitionDuration="0s",TweenLite.killDelayedCallsTo(t),TweenLite.delayedCall(1,t),D.status.active=!0,w.show(),i(),s())},w=D.$el,y=$(".listing",w),x=$(".whiteout",w),Modernizr.csstransforms||e(),z=app.request("ui:controller:create",{controller:"IntroController",options:{$el:$(".app-section-intro",w)}}),I=app.request("ui:controller:create",{controller:"WipeoutController",options:{$el:$(".app-wipeout",w)}}),D.children.each(function(e){M.view.push(e)}),(T=new Isotope(y[0],{itemSelector:".rug-view",layoutMode:"masonry",animationEngine:"css",transitionDuration:"0s"})).unbindResize()}})},{"../models/RugModel":73,"./RugView":76,"./templates/ItemTemplate.html":78}],76:[function(e,t,i){var n=e("./templates/RugTemplate.html"),o=e("../models/HoverModel"),a=e("./HoverView"),r=Backbone.Collection.extend({model:o});t.exports=Backbone.Marionette.CompositeView.extend({template:_.template(n),className:"rug-view pad-r-t pad-r-r",tagName:"div",attributes:{role:"gridcell"},childView:a,childViewContainer:".hover-list",initialize:function(e){this.collection=new r(this.model.get("imgs"))},onRender:function(){function e(){if(!M.base.loaded&&!M.base.loading){if(M.base.loading=!0,device.touch)return t(),!1;t()}}function t(){M.base.loaded=!0,$("img",w).attr("src",C.model.get("img")),w.show(),TweenLite.set(w,{opacity:0,force3D:app.force3D}),TweenLite.to(w,.5,{delay:.1*Math.random(),opacity:1,force3D:app.force3D}),device.touch||i()}function i(){M.hover.loaded||M.hover.loading||(M.hover.loading=!0,M.hover.loader=app.request("utils:loader:images:load",{list:M.hover.list}),M.hover.loader.on("complete",n).on("error",n),M.hover.loader.load())}function n(){M.hover.loaded=!0,x.each(function(e){$(this).attr("src",M.hover.list[e])}),b.show(),C.status.hover&&l()}function o(){v.on(device.over,r).on(device.out,s),y.on(device.over,r).on(device.out,s)}function a(){v.off(device.over,r).off(device.out,s),y.off(device.over,r).off(device.out,s),s()}function r(){C.status.hover=!0,TweenLite.to($(".rug-dsp",v),.3,{scale:.99,rotationX:5,force3D:app.force3D}),y.addClass("hover"),T.css({visibility:"visible"}),TweenLite.killTweensOf(T),TweenLite.to(T,.3,{x:0,opacity:1,force3D:app.force3D}),M.hover.loaded&&!device.touch&&l()}function s(){C.status.hover=!1,TweenLite.to($(".rug-dsp",v),.3,{scale:1,rotationX:0,force3D:app.force3D}),y.removeClass("hover"),TweenLite.to(T,.3,{x:-10,opacity:0,force3D:app.force3D,onComplete:function(){T.css({visibility:"hidden"})}}),M.hover.loaded&&p()}function l(){k.total&&(TweenLite.killDelayedCallsTo(c),c(!0))}function c(e){d(k.current+1,!1,e)}function d(e,t,i){-1!==k.current&&k.item[k.current].hide(t,1),e>k.total-1&&(e=0),k.current=e,k.item[k.current].show(t),TweenLite.killDelayedCallsTo(u),TweenLite.delayedCall(!0===i&&0===e?.3:1.5,u)}function u(){d(k.current+1)}function p(){k.total&&(TweenLite.killDelayedCallsTo(u),TweenLite.killDelayedCallsTo(c),f())}function f(){for(var e=0,t=k.total;e<t;++e)k.item[e].hide(!1,0,!0)}var h,v,m,g,w,y,x,b,T,D,C=this,L=[],k={item:[],current:-1,total:0},M={base:{loading:!1,loaded:!1,loader:null},hover:{loading:!1,loaded:!1,list:[]}},z={ratio:{x:5,y:6.6}},I={s:function(e){R.width=e.columnWidth,h.css({width:R.width}),R.innerWidth=h.width(),TweenLite.set(m,{rotation:0,y:0,force3D:app.force3D}),D.css({width:R.innerWidth,height:R.height}),m.css({width:R.innerWidth,height:R.height})},dw:function(e){R.width=2*e.columnWidth,h.css({width:R.width}),R.innerWidth=h.width(),TweenLite.set(m,{rotation:-90,y:R.height,force3D:app.force3D}),D.css({width:R.innerWidth,height:R.height}),m.css({width:R.height,height:R.innerWidth})}},P={delay:0},R={width:0,height:0};C.status={active:!1,hover:!1},C.update=function(e){R.height=Math.round(e.columnWidth/z.ratio.x*z.ratio.y),I[e.size](e),v.css({height:R.height})},C.hide=function(e,t){C.status.active&&(C.status.active=!1,t=_.extend({},P,t),device.touch||TweenLite.to(g,!0===e?0:.4+t.delay,{y:100,force3D:app.force3D}),a(),p())},C.show=function(t){C.status.active||(C.status.active=!0,e(),device.touch||TweenLite.to(g,.4+t.delay,{y:0,force3D:app.force3D}),o())},h=C.$el,v=$(".rug-box",h),m=$(".image",v),D=$(".rug-dsp",v),T=$(".v-t",h),x=$(".hover-list img",m),b=$(".hover-list",m),y=$(".title",h),w=$(".image .base",v),g=$(".shift",C.$el),L=C.model.get("imgs"),TweenLite.set(m,{transformOrigin:"0 0"}),device.touch||TweenLite.set(g,{y:100,force3D:app.force3D}),TweenLite.set(v,{perspective:500,force3D:app.force3D}),TweenLite.set(T,{x:-10,opacity:0,force3D:app.force3D}),function(){M.hover.list=[];for(var e=0,t=L.length;e<t;++e)M.hover.list.push(L[e].src);C.children.each(function(e){k.item.push(e)}),k.total=k.item.length}()}})},{"../models/HoverModel":71,"./HoverView":74,"./templates/RugTemplate.html":79}],77:[function(e,t,i){t.exports='<img src=""/>'},{}],78:[function(e,t,i){t.exports='<div class="app-section-intro  pad-r-r" role="heading"><p class="toptitle">The Collections</p><h1 class="title"><%= title %></h1><div class="desc"><%= description %></div><div class="footnote" role="note"><%= footnote %></div></div><div class="listing" role="grid"></div><div class="app-wipeout"></div>'},{}],79:[function(e,t,i){t.exports='<div class="shift"><a class="rug-box" href="<%= url %>" role="button"><div class="rug-dsp"><div class="image"><div class="load-box"></div><div class="base"><img src=""/></div><ul class="hover-list"></ul></div></div></a><div class="rug-content"> <a class="title" href="<%= url %>" title="View <%= simpleTitle %>"><%= title %></a></div></div>'},{}],80:[function(e,t,i){t.exports=e(53)},{}],81:[function(e,t,i){t.exports='<div class="collections"></div>'},{}],82:[function(e,t,i){t.exports=Marionette.Controller.extend({initialize:function(e){function t(){r.width=-1,r.height=-1,app.vent.on("resize:app",o),o()}function i(){app.vent.off("resize:app",o)}function n(e){for(var t=[],i=0,n=a.collectionsData.length;i<n;++i)t.push({title:a.collectionsData[i].t,url:a.collectionsData[i].u,active:e===i});return t}function o(){app.win.width===r.width&&app.win.height===r.height||(r.width=app.win.width,r.height=app.win.height)}var a=this,r={width:-1,height:-1},s={};a.status={active:!1},a.collectionsData={},a.setCollectionsData=function(e){a.collectionsData=e},a.setup=function(e){_.extend(a,e)},a.activate=function(){a.content.activate(),t(),a.controls.activate()},a.deactivate=function(e){a.controls.deactivate(),a.content.deactivate(e),i()},a.setCollection=function(e){a.content.setCollection(e)},a.updateControls=function(e){s.prevCollection=e-1,s.nextCollection=e+1,s.prevCollection<0&&(s.prevCollection=a.collectionsData.length-1),s.nextCollection>a.collectionsData.length-1&&(s.nextCollection=0),a.controls.setOptions({list:n(e),nextTitle:a.collectionsData[s.nextCollection].t,nextURL:a.collectionsData[s.nextCollection].u,previousTitle:a.collectionsData[s.prevCollection].t,previousURL:a.collectionsData[s.prevCollection].u})}}})},{}],83:[function(e,t,i){t.exports=e(41)},{}],84:[function(e,t,i){t.exports=e(53)},{}],85:[function(e,t,i){t.exports='<div class="app-central app-content--standard"><div class="content"></div><div class="app-base-controls"></div></div>'},{}],86:[function(e,t,i){e("./display/Display");var n=e("./views/templates/LayoutTemplate.html"),o=e("./models/LayoutModel"),a=e("./views/LayoutView");t.exports=app.module("Collections",{startWithParent:!1,define:function(e,t,i,r,s,l){function c(e){l.extend(w,e),w.collectionsData={section:t.data.sections.collections,collections:t.data.core.collections.l},m=w.region.$el}function d(){t.cmd.execute("router:route:register",{id:"collections",route:"(/)collections(/)",isHome:!0,controller:{start:f,stop:h}})}function u(){g=new a({template:l.template(n),model:new o(w.data.cn)}),w.region.show(g),g.addRegions({listingRegion:s(".listing",g.$el)})}function p(){w.Display.start({data:w.collectionsData,region:w.region,layout:g})}function f(){w.status.active=!0,m.show(),w.Display.activate(),t.vent.trigger("app:ui:footer:hide"),TweenLite.killDelayedCallsTo(v),TweenLite.delayedCall(.3,v),t.vent.trigger("app:ui:theme:set","dark"),t.vent.trigger("resize:trigger"),t.vent.trigger("app:ui:bar:theme:set",w.data.c),t.cmd.execute("router:pid:set",w.data.pid),t.cmd.execute("router:page:title:set",w.data.ht)}function h(e){w.status.active=!1,TweenLite.killDelayedCallsTo(v),w.Display.deactivate(function(){w.status.active||(m.hide(),void 0!==e&&e())})}function v(){t.vent.trigger("app:section:shown")}var m,g,w=e;w.collectionsData={},w.status={active:!1},w.addInitializer(function(e){c(e),d(),u(),p()})}})},{"./display/Display":87,"./models/LayoutModel":96,"./views/LayoutView":97,"./views/templates/LayoutTemplate.html":98}],87:[function(e,t,i){e("./listing/Listing"),t.exports=app.module("Collections.Display",{startWithParent:!1,define:function(e,t,i,n,o,a){function r(e){a.extend(f,e),d=f.layout.$el}function s(){f.Listing.start({data:f.data,region:f.layout.listingRegion})}function l(){u=t.request("ui:controller:create",{controller:"IntroController",options:{$el:o(".app-section-intro",d)}}),p=t.request("ui:controller:create",{controller:"WipeoutController",options:{$el:o(".app-wipeout",d)}})}function c(){p.fadeOut({time:.5}),f.Listing.activate()}var d,u,p,f=e;f.activate=function(){u.show(),p.start({wait:.5,onComplete:c})},f.deactivate=function(e){p.fadeIn({time:.5,onComplete:function(){o("html, body").animate({scrollTop:1},1),void 0!==e&&e()}}),u.hide(),f.Listing.deactivate()},f.status={active:!1},f.addInitializer(function(e){r(e),s(),l()})}})},{"./listing/Listing":88}],88:[function(e,t,i){var n=e("./models/ItemModel"),o=e("./views/ItemView"),a=e("./views/templates/ItemListTemplate.html"),r=Backbone.Collection.extend({model:n}),s=Marionette.CollectionView.extend({tagName:"div",className:"collections",attributes:{role:"grid"},childView:o});t.exports=app.module("Collections.Display.Listing",{startWithParent:!1,define:function(e,t,i,n,o,l){function c(e,i){if(i||!device.touch)for(var n=0,o=_.data.length;n<o;++n)t.cmd.execute(e,{fn:d,data:{index:n}})}function d(e,i){var n=t.request("utils:loader:image:load",{src:_.data[i.index].image});n.on("complete",function(t){e()}).on("error",function(){e(),console.warn("image missing: "+_.data[i.index].image)}),n.load()}function u(e){l.extend(q,e),B=q.region.$el}function p(){E.screenWidth=screen.width,E.screenHeight=screen.height,E.screenWidth>=768?E.imageSize="l":(E.screenWidth,E.imageSize="m")}function f(e){var t,i;_.data=[];for(var n=0,o=e.length;n<o;++n)t={simpleTitle:(i=e[n]).t,title:i.t,color:i.c,url:i.u,overlays:h(i.s),list:v(i.s),image:i.img.dir+i.img.box[E.imageSize],index:(n+1<10?"0":"")+(n+1)},_.data.push(t)}function h(e){for(var t,i,n=[],o=0,a=e.length;o<a;++o)e[o].c.v.length&&(i={src:(t=e[o].c.v[Math.floor(Math.random()*e[o].c.v.length)]).txd+t.box[E.imageSize]},n.push(i));return n}function v(e){for(var t="",i=0,n=e.length;i<n;++i)t+=l.template(a)({title:e[i].t,url:e[i].u,display:i<e.length-1?"visible":"hidden"});return t}function m(){_.collection=new r(_.data),_.view=new s({collection:_.collection,childViewEventPrefix:"view"}),q.region.show(_.view)}function g(){O=o(".collections",B)}function w(){_.view.children.each(function(e){F.view.push(e)})}function y(){(H=new Isotope(O[0],{itemSelector:".collection",layoutMode:"masonry",animationEngine:"css",transitionDuration:"0s"})).unbindResize()}function x(){TweenLite.killDelayedCallsTo(T);for(var e=0,t=F.view.length;e<t;++e)F.view[e].hide(!0),F.view[e].show({delay:.1*e})}function b(e){for(var t=0,i=F.view.length;t<i;++t)F.view[t].hide(!1,{delay:.01*t});TweenLite.killDelayedCallsTo(T),TweenLite.delayedCall(.4+.01*F.view.length,T,[e])}function T(e){void 0!==e&&e()}function D(){H.options.transitionDuration="0.4s"}function $(){t.vent.on("resize:app",L),M(!0),M()}function C(){t.vent.off("resize:app",L)}function L(e){TweenLite.killDelayedCallsTo(k),TweenLite.delayedCall(e?0:device.touch?0:.3,k)}function k(){requestAnimationFrame(M)}function M(e){O.css({width:"auto"}),W.width=O.width(),W.height=t.win.height,O.css({width:W.width}),W.width>1200&&F.view.length>=4?E.columns=4:W.width>700&&F.view.length>=3?E.columns=3:W.width>450&&F.view.length>=1?E.columns=2:E.columns=1,E.rowPattern=N[E.columns],E.columnWidth=Math.floor(W.width/E.columns),E.lastColumnWidth=W.width-E.columnWidth*(E.columns-1),z(e),E.currentColumns=E.columns}function z(e){E.currentColumns!==E.columns&&I(),E.boxHeight=Math.max(150,Math.min(500,Math.round((W.height-300)/3))),t.win.width<600&&(E.boxHeight=Math.round(.7*E.boxHeight)),R(),H.options.masonry.columnWidth=E.columnWidth,H.layout()}function I(){E.rowPatternBest=P(),F.rows.row=[],E.rowPatternIndex=0,E.rowPatternDepth=0,E.currentRow={type:E.rowPattern.pattern[E.rowPatternBest[E.rowPatternIndex]].type,item:[]};for(var e=0,t=F.view.length;e<t;++e)F.view.length===E.columns?E.currentRow.item.push({pat:"s",view:F.view[e]}):(F.view.length-e<E.rowPattern.pattern[E.rowPatternBest[E.rowPatternIndex]].item.length-E.rowPatternDepth&&(E.remain=F.view.length-e,E.specialPattern=3===E.remain?"three":2===E.remain?"two":"one",E.rowPattern=E.rowPattern.overflowPattern[E.specialPattern],E.rowPatternBest=[0,0,0,0,0],E.rowPatternIndex=0,E.rowPatternDepth=0,E.currentRow={type:E.rowPattern.pattern[E.rowPatternBest[E.rowPatternIndex]].type,item:[]}),E.currentRow.item.push({side:E.rowPattern.pattern[E.rowPatternBest[E.rowPatternIndex]].side||"left",pat:E.rowPattern.pattern[E.rowPatternBest[E.rowPatternIndex]].item[E.rowPatternDepth],view:F.view[e]}),E.rowPatternDepth++,E.rowPatternDepth>E.rowPattern.pattern[E.rowPatternBest[E.rowPatternIndex]].item.length-1&&(F.rows.row.push(E.currentRow),E.rowPatternIndex++,E.rowPatternDepth=0,E.rowPatternIndex=E.rowPatternIndex%E.rowPatternBest.length,E.currentRow={type:E.rowPattern.pattern[E.rowPatternBest[E.rowPatternIndex]].type,item:[]}));E.currentRow.item.length>0&&F.rows.row.push(E.currentRow)}function P(){for(var e=0,t=!1,i=F.view.length,n=E.rowPattern.pattern.length,o=[],a=[],r=i,s=0;r>0;)(r-=E.rowPattern.pattern[s].n)>=0&&(o[s]=s),s++,s%=E.rowPattern.pattern.length;for(0===r&&!0;!t&&e<50;){for(r=i,a=[],s=0;r>0;)V=Math.floor(Math.random()*n),(r-=E.rowPattern.pattern[V].n)>=0&&(a[s]=V),s++;0===r&&(t=!0),e++}return t?a:o}function R(){S();for(var e=0,t=F.rows.row.length;e<t;++e)F.update[F.rows.row[e].type](F.rows.row[e],e)}function S(){o(".row-clear",B).remove()}var H,V,B,O,q=e,W={},E={columns:3,currentColumns:-1},N={4:{pattern:[{n:3,type:"standard",item:["s","s","dw"]},{n:4,type:"standard",item:["s","s","s","s"]},{n:5,type:"doubleHeight",side:"left",item:["dwh","s","s","s","s"]},{n:4,type:"doubleHeight",side:"left",item:["dwh","s","s","dw"]}],overflowPattern:{three:{pattern:[{type:"standard",item:["dw","s","s"]}]},two:{pattern:[{type:"standard",item:["dw","dw"]}]},one:{pattern:[{type:"standard",item:["fw"]}]}}},3:{pattern:[{n:3,type:"doubleHeight",side:"left",item:["dwh","s","s"]},{n:3,type:"doubleHeight",side:"right",item:["dwh","s","s"]},{n:2,type:"standard",item:["s","dw"]},{n:2,type:"standard",item:["dw","s"]},{n:3,type:"standard",item:["s","s","s"]},{n:3,type:"doubleHeight",side:"right",item:["dwh","s","s"]}],overflowPattern:{two:{pattern:[{type:"standard",item:["dw","s"]}]},one:{pattern:[{type:"standard",item:["fw"]}]}}},2:{pattern:[{n:2,type:"standard",item:["s","s"]},{n:1,type:"standard",item:["dw"]},{n:2,type:"standard",item:["s","s"]}],overflowPattern:{one:{pattern:[{type:"standard",item:["dw"]}]}}},1:{pattern:[{n:1,type:"standard",item:["s"]}]}},_={data:[],collection:{},view:{}},F={update:{standard:function(e,i){for(var n=0,a=e.item.length;n<a;++n)e.item[n].view.update({boxHeight:Math.round(t.win.width>600?E.boxHeight*(i%2==0?.9:1.2):1.2*E.boxHeight),size:e.item[n].pat,numColumns:E.columns,columnWidth:E.columnWidth}),n===e.item.length-1&&o('<div class="row-clear clear"></div>').insertAfter(e.item[n].view.$el)},doubleHeight:function(e,t){var i,n,a=[],r=0;for(i=0,n=e.item.length;i<n;++i)e.item[i].view.update({boxHeight:E.boxHeight,size:e.item[i].pat,side:e.item[i].side,numColumns:E.columns,columnWidth:E.columnWidth}),"dwh"!==e.item[i].pat&&a.push(e.item[i].view.getHeight()),i===e.item.length-1&&o('<div class="row-clear clear"></div>').insertAfter(e.item[i].view.$el);if(a.length>1)for(r=a[0].outer+a[a.length-1].box,i=0,n=e.item.length;i<n;++i)"dwh"===e.item[i].pat&&e.item[i].view.setBoxHeight(r)}},dimensions:{column:{}},rows:{row:[]},view:[]};q.status={active:!1},q.activate=function(){q.status.active=!0,H.options.transitionDuration="0s",TweenLite.killDelayedCallsTo(D),TweenLite.delayedCall(1,D),x(),$()},q.deactivate=function(e){b(e),C()},q.addInitializer(function(e){u(e),m(),g(),w(),y()}),t.vent.on("app:loader:core:complete",function(){var e="/collections/"===i.history.location.pathname;p(),f(t.data.core.collections.l),c(e?"loader:preload:add":"loader:silent:add",e)})}})},{"./models/ItemModel":90,"./views/ItemView":92,"./views/templates/ItemListTemplate.html":94}],89:[function(e,t,i){t.exports=Backbone.Model.extend({defaults:{src:""}})},{}],90:[function(e,t,i){t.exports=Backbone.Model.extend({defaults:{simpleTitle:"",title:"",color:"#000",image:"",url:"#"}})},{}],91:[function(e,t,i){var n=e("./templates/HoverTemplate.html");t.exports=Backbone.Marionette.ItemView.extend({tagName:"div",className:"hover-item",template:_.template(n),onRender:function(){function e(e,i,n){(t.status.active||!0===e||!0===n)&&(t.status.active=!1,device.touch?TweenLite.to(t.$el,e?0:.5,{delay:void 0!==i?e?0:i:0,y:"100%",force3D:app.force3D,onComplete:function(){t.status.shown=!1}}):TweenLite.to(t.$el,e?0:1,{delay:void 0!==i?e?0:i:0,opacity:0,z:-1,force3D:app.force3D,onComplete:function(){t.$el.hide(),t.status.shown=!1}}))}var t=this;t.status={active:!1,shown:!1},t.hide=e,t.show=function(e){t.status.active=!0,t.$el.show(),t.$el.parent().append(t.$el),TweenLite.killTweensOf(t.$el),device.touch?TweenLite.to(t.$el,e?0:.5,{y:"0%",force3D:app.force3D}):TweenLite.to(t.$el,e?0:1,{opacity:1,z:-1,force3D:app.force3D}),t.status.shown=!0},e(!0)}})},{"./templates/HoverTemplate.html":93}],92:[function(e,t,i){var n=e("./templates/ItemTemplate.html"),o=e("../models/HoverModel"),a=e("./HoverView"),r=Backbone.Collection.extend({model:o});t.exports=Backbone.Marionette.CompositeView.extend({template:_.template(n),className:"collection pad-r-t pad-r-r",tagName:"div",attributes:{role:"gridcell"},childView:a,childViewContainer:".hover-items",initialize:function(e){var t=this;this.collection=new r(t.model.get("overlays"))},onRender:function(){function e(){y.status.hover=!0,TweenLite.to(k.boxOverlay,device.touch?0:.3,{opacity:0}),TweenLite.killTweensOf(k.tabShift),TweenLite.to(k.tabShift,device.touch?0:.3,{x:"100%"}),k.title.addClass("hover"),y.status.active&&x.hover.loaded&&!device.touch&&c()}function t(){y.status.hover=!1,TweenLite.to(k.boxOverlay,device.touch?0:.3,{opacity:.11}),TweenLite.to(k.tabShift,device.touch?0:.3,{delay:.3,x:"0%"}),k.title.removeClass("hover"),y.status.active&&x.hover.loaded&&!device.touch&&f()}function i(){x.hover.loaded&&!device.touch&&v($(this).data("id"))}function n(){x.hover.loaded&&!device.touch&&g($(this).data("id"))}function o(){for(var e=0,t=b.length;e<t;++e)e<b.length-2&&(b[e+1].position().top>0&&0===b[e].position().top?$(".sep",b[e]).css({visibility:"hidden"}):$(".sep",b[e]).css({visibility:"visible"}))}function a(){x.base.loaded||x.base.loading||(x.base.loading=!0,x.base.loader=app.request("utils:loader:image:load",{src:y.model.get("image")}),x.base.loader.on("complete",r),x.base.loader.load())}function r(){x.base.loaded=!0,k.base.css({backgroundImage:"url("+y.model.get("image")+")"}),k.base.show(),TweenLite.set(k.base,{opacity:0,force3D:app.force3D}),TweenLite.to(k.base,.5,{delay:.1*Math.random(),opacity:1,force3D:app.force3D}),device.touch||s()}function s(){x.hover.loaded||x.hover.loading||(x.hover.loading=!0,x.hover.loader=app.request("utils:loader:images:load",{list:x.hover.list}),x.hover.loader.on("complete",l).on("error",l),x.hover.loader.load())}function l(){x.hover.loaded=!0,k.hoverImgs.each(function(e){$(this).css({backgroundImage:"url("+x.hover.list[e]+")"})}),k.hoverList.show(),y.status.hover&&c()}function c(){TweenLite.killDelayedCallsTo(d),TweenLite.delayedCall(.2,d)}function d(){L.total&&u(L.current+1)}function u(e,t){-1!==L.current&&L.item[L.current].hide(t,1),e>L.total-1&&(e=0),L.current=e,L.item[L.current].show(t),TweenLite.killDelayedCallsTo(p),TweenLite.delayedCall(1,p)}function p(){u(L.current+1)}function f(){L.total&&(TweenLite.killDelayedCallsTo(p),TweenLite.killDelayedCallsTo(d),h())}function h(){for(var e=0,t=L.total;e<t;++e)L.item[e].hide(!1,0,!0)}function v(e){L.total<e||(TweenLite.killDelayedCallsTo(m),TweenLite.delayedCall(.1,m,[e]))}function m(e){e>L.total||!L.total||L.item[e].show()}function g(e){e>L.total||!L.total||(TweenLite.killDelayedCallsTo(m),L.item[e].hide())}var w,y=this,x={base:{loading:!1,loaded:!1,loader:null},hover:{loading:!1,loaded:!1,list:[]}},b=[],T={width:0},D={delay:0},C={s:function(e){T.width=e.columnWidth,y.$el.css({width:T.width})},dw:function(e){T.width=2*e.columnWidth,y.$el.css({width:T.width})},dwh:function(e){T.width=2*e.columnWidth,y.$el.css({width:T.width,float:e.side}),$(".item-box",y.$el).css({height:2*e.boxHeight})},fw:function(e){T.width=e.columnWidth*e.numColumns,y.$el.css({width:T.width})}},L={item:[],current:-1,total:0},k={};y.update=function(e){$(".item-box",y.$el).css({height:e.boxHeight}),C[e.size](e),clearTimeout(T.timeout),T.timeout=setTimeout(o,300)},y.getHeight=function(){return{box:$(".item-box",y.$el).height(),outer:y.$el.outerHeight(!0)}},y.setBoxHeight=function(e){$(".item-box",y.$el).css({height:e})},y.hide=function(e,t){y.status.active=!1,t=_.extend({},D,t),device.touch||TweenLite.to(w,!0===e?0:.4+t.delay,{y:100,force3D:app.force3D}),f()},y.show=function(e){y.status.active=!0,device.touch||TweenLite.to(w,.4+e.delay,{y:0,force3D:app.force3D}),a()},y.status={active:!1,hover:!1},k.box=$(".item-box",y.$el),k.boxOverlay=$(".box-overlay",k.box),k.base=$(".bg",k.box),k.title=$(".title",y.$el),k.list=$(".list li a",y.$el),k.tabShift=$(".tab-display",y.$el),w=$(".shift",y.$el),k.hoverImgs=$(".hover-items .hover-item img",y.$el),k.hoverList=$(".hover-items",y.$el),k.list.each(function(e){$(this).data("id",e)}),L.total=L.item.length,function(){x.hover.data=y.model.get("overlays"),x.hover.list=[];for(var e=0,t=x.hover.data.length;e<t;++e)x.hover.list.push(x.hover.data[e].src);y.children.each(function(e){L.item.push(e)}),L.total=L.item.length}(),TweenLite.set(k.boxOverlay,{opacity:.11}),$(".list li",y.$el).each(function(e){b.push($(this))}),k.box.on(device.over,e).on(device.out,t),k.title.on(device.over,e).on(device.out,t),k.list.on(device.over,i).on(device.out,n)}})},{"../models/HoverModel":89,"./HoverView":91,"./templates/ItemTemplate.html":95}],93:[function(e,t,i){t.exports='<div class="img" style="background-image:url(<%= src %>);"></div>'},{}],94:[function(e,t,i){t.exports='<li><a href="<%= url %>"><%= title %></a><div class="sep" style="visibility:<%= display %>;">|</div></li>'},{}],95:[function(e,t,i){t.exports='<div class="shift"><a class="item-box" href="<%= url %>" role="button"><div class="load-box"></div><div class="bg"></div><div class="hover-items"></div><div class="box-overlay"></div><div class="tab" style="background-color:<%= color %>;"><div class="tab-display"><div class="tab-index"><%= index %></div><div class="tab-go"><div class="icon icon--go-arrow"></div></div></div></div></a><div class="item-content"> <a class="title" href="<%= url %>" title="Discover the <%= simpleTitle %>."><%= title %></a><ul class="list"><%= list %></ul></div></div>'},{}],96:[function(e,t,i){t.exports=Backbone.Model.extend({defaults:{}})},{}],97:[function(e,t,i){t.exports=Backbone.Marionette.LayoutView.extend({className:"container"})},{}],98:[function(e,t,i){t.exports='<div class="app-central app-content--standard"><div class="app-section-intro pad-r-lr" role="heading"><h1 class="title"><%= t %></h1><div class="desc"> <%= c %></div></div><div class="listing pad-r-l pad-r-t"></div><div class="clear"></div><div class="app-wipeout"></div></div>'},{}],99:[function(e,t,i){e("./display/Display");var n=e("./views/templates/LayoutTemplate.html"),o=e("./models/LayoutModel"),a=e("./views/LayoutView");t.exports=app.module("Contact",{startWithParent:!1,define:function(e,t,i,r,s,l){function c(e){l.extend(y,e),g=y.region.$el}function d(){t.cmd.execute("router:route:register",{id:"contact",route:"(/)contact(/)",isHome:!0,controller:{start:f,stop:v}})}function u(){w=new a({template:l.template(n),model:new o(y.data.cn)}),y.region.show(w),w.addRegions({mapRegion:s(".layout .map-region",w.$el)})}function p(){y.Display.start({region:y.region,layout:w,data:y.data,$el:g})}function f(){t.vent.trigger("resize:trigger"),h(),t.vent.trigger("app:ui:bar:theme:set",y.data.c),t.cmd.execute("router:pid:set",y.data.pid),t.cmd.execute("router:page:title:set",y.data.ht)}function h(){g.show(),y.Display.activate(),t.vent.trigger("app:ui:footer:hide"),TweenLite.killDelayedCallsTo(m),TweenLite.delayedCall(.3,m),t.vent.trigger("app:ui:theme:set","dark"),t.vent.trigger("resize:trigger")}function v(e){TweenLite.killDelayedCallsTo(h),TweenLite.killDelayedCallsTo(m),y.Display.deactivate(function(){g.hide(),e()})}function m(){t.vent.trigger("resize:trigger"),t.vent.trigger("app:section:shown")}var g,w,y=e;y.addInitializer(function(e){c(e),d(),u(),p()})}})},{"./display/Display":100,"./models/LayoutModel":106,"./views/LayoutView":107,"./views/templates/LayoutTemplate.html":108}],100:[function(e,t,i){e("./map/Map"),t.exports=app.module("Contact.Display",{startWithParent:!1,define:function(e,t,i,n,o,a){function r(e){a.extend(w,e)}function s(){h=w.$el}function l(){w.Map.start({$el:w.$el,layout:w.layout,data:w.data})}function c(){v=t.request("ui:controller:create",{controller:"IntroController",options:{$el:o(".app-section-intro",h)}}),m=t.request("ui:controller:create",{controller:"WipeoutController",options:{$el:o(".app-wipeout",h)}}),g=t.request("ui:controller:create",{controller:"ShifterController",options:{$selectors:o(".block-shift, .app-map, .site-credit",w.layout.$el),delayMultiplier:.1,startOffset:60}})}function d(){m.fadeOut({time:.5})}function u(){t.vent.on("resize:app",f),f()}function p(){t.vent.off("resize:app",f)}function f(){}var h,v,m,g,w=e;w.activate=function(){w.status.active=!0,v.show(),g.show(),w.Map.activate(),m.start({wait:.5,onComplete:d}),u()},w.deactivate=function(e){w.status.active=!1,m.fadeIn({time:.5,onComplete:function(){o("html, body").animate({scrollTop:1},1),void 0!==e&&e()}}),v.hide(),g.hide(),w.Map.deactivate(),p()},w.status={active:!1},w.addInitializer(function(e){r(e),l(),c(),s()})}})},{"./map/Map":101}],101:[function(e,t,i){var n=e("./models/MapModel"),o=e("./views/MapView");t.exports=app.module("Contact.Display.Map",{startWithParent:!1,define:function(e,t,i,a,r,s){function l(e,i){if(i||!device.touch)for(var n=0,o=m.length;n<o;++n)t.cmd.execute(e,{fn:c,data:{index:n}})}function c(e,i){var n=t.request("utils:loader:image:load",{src:m[i.index]});n.on("complete",function(t){e()}).on("error",function(){e(),console.warn("image missing: "+m[i.index])}),n.load()}function d(e){s.extend(v,e)}function u(){f=v.$el}function p(){var e=t.data.core.contact;h=new o({model:new n({info:v.data.cn.inf,address:e.adr.f,hq:e.hq,telFull:e.tel.f,tel:e.tel.d,faxFull:e.fax.f,fax:e.fax.d,width:889,height:528,accountsEmail:e.ae,generalEmail:e.e,img:{base:{l:g+"base-large.png",m:g+"base-medium.png"},overlay:{l:g+"text-large.png",m:g+"text-medium.png"},hover:[g+"overlay/1.png",g+"overlay/2.png",g+"overlay/3.png",g+"overlay/4.png"]},areas:[{t:"Canada East",c:"Ontario / Quebec / Atlantic Provinces",e:e.rg.ce},{t:"Canada Central",c:"Alberta / Saskatchewan / Manitoba",e:e.rg.cc},{t:"Canada West",c:"British Columbia / Yukon / Northwest Territories",e:e.rg.cw},{t:"United States of America",c:"Dealer / Product Enquiries:",e:e.rg.usa}]})}),v.layout.mapRegion.show(h)}var f,h,v=e,m=[],g="";v.activate=function(){v.status.active=!0,h.activate()},v.deactivate=function(e){v.status.active=!1,h.deactivate(e)},v.status={active:!1},v.addInitializer(function(e){d(e),u(),p()}),g=t.paths.img+"ui/singular/"+(device.retina?"2x":"1x")+"/contact/map/",t.vent.on("app:loader:core:complete",function(){var e=i.history.location.pathname.search("contact")>-1;m=[g+"base-large.png",g+"base-medium.png",g+"text-large.png",g+"text-medium.png",g+"overlay/1.png",g+"overlay/2.png",g+"overlay/3.png",g+"overlay/4.png"],l(e?"loader:preload:add":"loader:silent:add",e)})}})},{"./models/MapModel":102,"./views/MapView":103}],102:[function(e,t,i){t.exports=Backbone.Model.extend({defaults:{}})},{}],103:[function(e,t,i){var n=e("./templates/MapTemplate.html"),o=e("./templates/TabTemplate.html");t.exports=Backbone.Marionette.ItemView.extend({template:_.template(n),className:"app-map",tagName:"div",initialize:function(e){},onRender:function(){function e(){app.vent.on("resize:app",v),v()}function t(){app.vent.off("resize:app",v)}function i(){l($(this).data("id"))}function n(){u($(this).data("id"))}function a(){l($(this).data("id"),!0)}function r(){u($(this).data("id"),!0)}function s(){return!1}function l(e,t){var i=D.areas[e];TweenLite.killTweensOf(i),t&&i.tabHiding||(TweenLite.killDelayedCallsTo(c),TweenLite.delayedCall(.15,c,[i,t,e]))}function c(e,t,i){f(e),e.$hover.show(),TweenLite.killTweensOf(e.$hover),TweenLite.to(e.$hover,.6,{opacity:1,force3D:app.force3D}),d(i)}function d(e){for(var t=0,i=D.areas.length;t<i;++t)t!==e&&u(t,!1)}function u(e,t){var i=D.areas[e];TweenLite.killDelayedCallsTo(c),TweenLite.killTweensOf(i),TweenLite.to(i,0,{delay:.1,onComplete:function(){p(i,t)}})}function p(e,t){h(e),TweenLite.to(e.$hover,.6,{opacity:0,force3D:app.force3D,onComplete:function(){e.$hover.hide()}})}function f(e){var t={x:0,y:0};e.tabHiding=!1,e.$tab.show(),e.bounds=app.request("utils:image:map:area:bounds:get",e.$el),t.x=e.bounds.centerX,t.x=Math.max(20,Math.min(app.win.width-e.$tab.parent().offset().left-e.$tab.width()-20,e.bounds.centerX)),t.y=e.bounds.centerY,TweenLite.killTweensOf($(".tab-shift",e.$tab)),TweenLite.set(e.$tab.show(),{x:Math.round(t.x),y:Math.round(t.y),force3D:app.force3D}),TweenLite.to($(".tab-shift",e.$tab),.3,{y:0,opacity:1,force3D:app.force3D})}function h(e){e.tabHiding=!0,TweenLite.to($(".tab-shift",e.$tab),.3,{y:0,opacity:0,force3D:app.force3D,onComplete:function(){e.$tab.hide()}})}function v(){x.width=g.width(),m(),app.win.width<1e3&&!b.contentReduced?b.contentReduced=!0:app.win.width>=1e3&&b.contentReduced&&(b.contentReduced=!1),b.width=Math.min(D.width,Math.round(x.width-(b.contentReduced?20:b.contentWidth))),b.ratio=Math.min(1,b.width/D.width),b.height=Math.round(D.height*b.ratio),y.sizer.css({width:b.width,height:b.height}),y.mapDisplay.height(b.height),T.update()}function m(){x.width<700&&!b.reduced?(b.reduced=!0,y.baseImg.attr("src",D.img.base.m),y.overlayImg.attr("src",D.img.overlay.m)):x.width>=700&&b.reduced&&(b.reduced=!1,y.baseImg.attr("src",D.img.base.l),y.overlayImg.attr("src",D.img.overlay.l))}var g,w=this,y={},x={width:100,height:100},b={width:0,height:0,reduced:!1,contentReduced:!1,contentWidth:250},T={},D={};w.status={active:!1,hover:!1},w.activate=function(){w.status.active=!0,T.start(),e()},w.deactivate=function(){w.status.active=!1,T.stop(),t(),d(-1)},g=w.$el,y.mapDisplay=$(".map-display",g),y.base=$(".base",g),y.overlay=$(".overlay",g),y.sizer=$(".map-sizer",g),y.simpleRegion=$(".map-simple .regions",g),y.tabsRegion=$(".map-tabs",g),y.hoverRegions=$(".hover-regions",g),y.hoverMapImg=$(".hover-map img[usemap]",g),y.hoverAreas=$(".hover-map map area",g),y.hoverMap=$(".hover-map map",g),D=w.model.attributes,function(){for(var e="",t=0,i=D.img.hover.length;t<i;++t)e+=_.template('<div class="hover-region"><img src="<%= img %>" /></div>')({img:D.img.hover[t]});y.hoverRegions.append($(e))}(),function(){for(var e="",t=0,i=D.areas.length;t<i;++t)e+=_.template(o)(D.areas[t]);y.simpleRegion.append($(e)),y.tabsRegion.append($(e)),y.tabs=$(".tab",y.tabsRegion),y.tabs.each(function(e){$(this).data("id",e),TweenLite.set($(".tab-shift",this),{y:0,opacity:0,force3D:app.force3D})})}(),y.base.append($(_.template('<img class="base-img" src="<%= img %>" />')({img:D.img.base.l}))),y.overlay.append($(_.template('<img class="overlay-img" src="<%= img %>" />')({img:D.img.overlay.l}))),y.baseImg=$(".base-img",y.base),y.overlayImg=$(".overlay-img",y.overlay),T=app.request("utils:image:map:reponsive:create",{$el:y.hoverMapImg,$map:y.hoverMap,baseWidth:D.width,baseHeight:D.height}),function(){for(var e=0,t=D.areas.length;e<t;++e)D.areas[e].$hover=$(".hover-region:eq("+e+")",y.hoverRegions),D.areas[e].$el=$(".hover-map map area:eq("+e+")",g),D.areas[e].$el.data("id",e),D.areas[e].$tab=$(".tab:eq("+e+")",y.tabsRegion),TweenLite.set(D.areas[e].$hover,{opacity:0,force3D:app.force3D})}(),y.hoverAreas.on(device.over,i),y.tabs.on(device.over,a).on(device.out,r),device.touch||(y.hoverAreas.on(device.out,n).on("click",s),y.tabs.on(device.out,r)),y.hoverAreas.on("click",s),$("a",g).on("click",function(){app.track("event","Map","Link Clicked",$(this).attr("href"))})}})},{"./templates/MapTemplate.html":104,"./templates/TabTemplate.html":105}],104:[function(e,t,i){t.exports='<div class="map-info"> <%= info %></div><div class="map-outer"><div class="map-display"><div class="map-sizer"><div class="hover-regions"></div><div class="base"></div><div class="overlay"></div><div class="hover-map"> <img src="/assets/themes/cr/dist/img/app/core/placeholder.gif" border="0" usemap="#maphover" alt=""/><map name="maphover"><area class="m-area-1" alt="Canada East" href="#" shape="poly" coords="410,400,407,331,466,256,504,271,543,275,557,255,555,205,555,184,543,143,570,141,584,133,627,148,635,172,656,173,657,135,727,174,747,191,776,188,815,212,826,245,862,235,887,257,888,281,861,306,818,313,823,326,855,360,849,371,807,380,788,415,768,400,753,391,729,364,714,369,711,407,704,418,664,429,653,446,627,458,614,475,627,483,613,489,575,513,573,508,581,486,579,447,599,451,585,435,554,435,535,426,504,401,480,414,456,414" style="outline:none;" target="_self"/><area class="m-area-2" alt="Canada Central" href="#" shape="poly" coords="473,258,411,332,412,398,340,395,241,379,194,366,189,355,193,339,160,267,205,164,287,191,355,203,417,207,418,226,431,225,436,253,458,250" style="outline:none;" target="_self"/><area class="m-area-3" alt="Canada West" href="#" shape="poly" coords="195,365,194,354,198,342,165,268,205,167,287,194,355,204,363,131,309,112,305,99,292,96,254,37,266,12,251,0,3,2,3,25,27,36,59,116,54,161,42,220,52,273,78,329,101,329,149,351" style="outline:none;" target="_self"/><area class="m-area-4" alt="U.S.A" href="#" shape="poly" coords="14,529,9,459,47,393,79,324,109,331,198,364,281,384,408,393,424,402,483,411,468,433,496,417,554,437,580,485,578,505,619,478,632,469,652,452,652,444,667,425,708,405,712,362,733,360,749,383,761,397,738,434,735,453,753,468,709,505,706,531" style="outline:none;" target="_self"/></map></div></div><div class="map-tabs"></div><div class="map-content map-content-style"><div class="region-top"><div class="pad-m-a"><div class="mc-title"><%= hq %>:</div><div class="mc-content"><div class="addr"><p><%= address %></p></div><div class="tel">T: <a href="tel:<%= telFull %>"><%= tel %></a></div><div class="fax">F: <a href="tel:<%= faxFull %>"><%= fax %></a></div><div class="c-block"><div class="mc-title">General Inquiries:</div><div class="email"> E: <a href="mailto:<%= generalEmail %>"><%= generalEmail %></a></div></div><div class="c-block"><div class="mc-title">Accounting Department:</div><div class="email"> E: <a href="mailto:<%= accountsEmail %>"><%= accountsEmail %></a></div></div></div></div></div><div class="region-bottom"><div class="pad-m-a"><div class="map-inline-info"> <%= info %></div></div></div></div></div></div><article class="map-secondary-content map-content-style"><div class="mc-title"><%= hq %>:</div><hr/><div class="mc-content"><div class="addr"><p><%= address %></p></div><div class="tel">T: <a href="tel:<%= telFull %>"><%= tel %></a></div><div class="fax">F: <a href="tel:<%= faxFull %>"><%= fax %></a></div><div class="c-block"><div class="mc-title">General Inquiries:</div><hr/><div class="email"> E: <a href="mailto:<%= generalEmail %>"><%= generalEmail %></a></div></div><div class="c-block"><div class="mc-title">Accounting Department:</div><hr/><div class="email"> E: <a href="mailto:<%= accountsEmail %>"><%= accountsEmail %></a></div></div></div></article><article class="map-simple"><div class="map-content-style"><div class="mc-title">Regional Enquiries</div><hr/></div><div class="regions"></div></article>'},{}],105:[function(e,t,i){t.exports='<div class="tab"><div class="tab-shift"><div class="tab-box pad-m-a"><div class="tb-content"><div class="tb-title"><%= t %></div><div class="tb-info"><%= c %></div><div class="tb-close"><div class="icon icon--close-small"></div></div></div><div class="tb-link"><a class="btn--bluebox" href="mailto:<%= e %>"><%= e %></a></div></div></div></div>'},{}],106:[function(e,t,i){t.exports=e(24)},{}],107:[function(e,t,i){t.exports=e(25)},{}],108:[function(e,t,i){t.exports='<div class="app-central app-content--standard"><div class="app-section-intro pad-r-lr" role="heading"><h1 class="title"><%= t %></h1><div class="desc"> <%= c %></div></div><div class="layout app-content--layout"><div class="map-region pad-r-lr"></div><article class="site-credit contact-site-credit"><%= credit %></article></div><div class="clear"></div><div class="app-wipeout"></div></div>'},{}],109:[function(e,t,i){e("./display/Display");var n=e("./views/templates/LayoutTemplate.html"),o=e("./models/LayoutModel"),a=e("./views/LayoutView");t.exports=app.module("Dealers",{startWithParent:!1,define:function(e,t,i,r,s,l){function c(e){s.getJSON(b+t.versionQuery,function(t){t.success&&(T.active=!0,T.data=t),void 0!==e&&e()})}function d(e){l.extend(x,e),w=x.region.$el}function u(){t.cmd.execute("router:route:register",{id:"dealers",route:"(/)dealer-information(/)",isHome:!0,controller:{start:h,stop:m}})}function p(){y=new a({template:l.template(n),model:new o(x.data.cn)}),x.region.show(y),y.addRegions({bannerRegion:s(".layout .banner-region",y.$el),formRegion:s(".app-form",y.$el),portalRegion:s(".layout .portal-region",y.$el),loginRegion:s(".layout .dealer-login",y.$el)})}function f(){x.Display.start({region:x.region,layout:y,data:x.data,portalActive:T.active,portalData:T.data,$el:w})}function h(){t.vent.trigger("resize:trigger"),v(),t.vent.trigger("app:ui:bar:theme:set",x.data.c),t.cmd.execute("router:pid:set",x.data.pid),t.cmd.execute("router:page:title:set",x.data.ht)}function v(){w.show(),x.Display.activate(),t.vent.trigger("app:ui:footer:hide"),TweenLite.killDelayedCallsTo(g),TweenLite.delayedCall(.3,g),t.vent.trigger("app:ui:theme:set","dark"),t.vent.trigger("resize:trigger")}function m(e){TweenLite.killDelayedCallsTo(v),TweenLite.killDelayedCallsTo(g),x.Display.deactivate(function(){w.hide(),e()})}function g(){t.vent.trigger("resize:trigger"),t.vent.trigger("app:section:shown")}var w,y,x=e,b=t.paths.base+"dist/data/login/dealer.php",T={active:!1,data:{}};x.addInitializer(function(e){d(e),u(),p(),f()}),t.vent.on("app:loader:core:complete",function(){t.cmd.execute("loader:preload:add",c)})}})},{"./display/Display":110,"./models/LayoutModel":123,"./views/LayoutView":124,"./views/templates/LayoutTemplate.html":125}],110:[function(e,t,i){var n=e("./models/LoginModel"),o=e("./models/PortalModel"),a=e("./views/LoginView"),r=e("./views/PortalView");t.exports=app.module("Dealers.Display",{startWithParent:!1,define:function(e,t,i,s,l,c){function d(e){c.extend(H,e)}function u(){k=H.$el}function p(){V.portal=l(".portal-region",k),V.form=l(".form-block",k),V.login=l(".view-login",k),V.logout=l(".view-logout",k),V.logoutButton=l(".go-logout",k)}function f(){M=t.request("ui:view:create",{view:"FormView",model:"FormModel",modelProps:c.extend({},H.data.frm,{submitPath:t.paths.base+"dist/data/submit/dealer.php",tokenPath:t.paths.base+"dist/data/submit/token.php"}),options:{}}),H.layout.formRegion.show(M)}function h(){S=t.request("ui:view:create",{view:"BannerView",model:"BannerModel",modelProps:H.data.cn.bn,options:{}}),H.layout.bannerRegion.show(S)}function v(){z=new a({model:new n(c.extend({loginPath:t.paths.base+"dist/data/login/dealer.php"+t.versionQuery},t.data.core.portals.dealer.lg))}),H.layout.loginRegion.show(z)}function m(){I=t.request("ui:controller:create",{controller:"IntroController",options:{$el:l(".app-section-intro",k)}}),P=t.request("ui:controller:create",{controller:"WipeoutController",options:{$el:l(".app-wipeout",k)}}),R=t.request("ui:controller:create",{controller:"ShifterController",options:{$selectors:l(".block .block-shift, .app-banner",O.$el),delayMultiplier:.04,startOffset:60}})}function g(){z.on("event:login",w)}function w(e){t.track("event","Dealers","User logged in",e.name),y(e),b()}function y(e){B.active=!0,B.hasData=!0,B.data=e,B.view=new r({model:new o(c.extend({},B.data,{g:c.template(t.data.core.portals.dealer.pr.g)({name:B.data.name}),t:c.template(t.data.core.portals.dealer.pr.t)({name:B.data.name})}))}),H.layout.portalRegion.show(B.view),R=t.request("ui:controller:create",{controller:"ShifterController",options:{$selectors:l(".block .block-shift, .app-banner, .asset-group",O.$el),delayMultiplier:.04,startOffset:60}})}function x(){return t.track("event","Dealers","User logged out"),B.active=!1,z.logout(),T(),!1}function b(e){V.portal.stop(!0,!0).slideDown(e?0:300),V.form.stop(!0,!0).slideUp(e?0:300),V.login.stop(!0,!0).slideUp(e?0:300),V.logout.stop(!0,!0).slideDown(e?0:300)}function T(e){V.portal.stop(!0,!0).slideUp(e?0:300),V.form.stop(!0,!0).slideDown(e?0:300),V.login.stop(!0,!0).slideDown(e?0:300),V.logout.stop(!0,!0).slideUp(e?0:300)}function D(){P.fadeOut({time:1})}function $(){V.logoutButton.on("click",x),t.vent.on("resize:app",L),L()}function C(){V.logoutButton.off("click",x),t.vent.off("resize:app",L)}function L(){}var k,M,z,I,P,R,S,H=e,V={},B={view:{},active:!1,hasData:!1,data:{}},O={};H.activate=function(){H.status.active=!0,I.show(),R.show(),S.activate(),M.activate(),z.activate(),P.start({wait:.5,onComplete:D}),B.active&&b(!0),$()},H.deactivate=function(e){H.status.active=!1,M.deactivate(),z.deactivate(),P.fadeIn({time:.5,onComplete:function(){l("html, body").animate({scrollTop:1},1),void 0!==e&&e()}}),I.hide(),R.hide(),S.deactivate(),C()},H.status={active:!1},H.addInitializer(function(e){d(e),u(),f(),h(),v(),m(),g(),H.portalActive&&y(H.portalData),p()})}})},{"./models/LoginModel":111,"./models/PortalModel":112,"./views/LoginView":115,"./views/PortalView":116}],111:[function(e,t,i){t.exports=Backbone.Model.extend({defaults:{lid:"",lit:"",lod:"",lot:""}})},{}],112:[function(e,t,i){t.exports=e(102)},{}],113:[function(e,t,i){t.exports=e(29)},{}],114:[function(e,t,i){t.exports=e(29)},{}],115:[function(e,t,i){var n=e("./templates/LoginTemplate.html");t.exports=Backbone.Marionette.ItemView.extend({template:_.template(n),className:"",tagName:"div",initialize:function(e){},onRender:function(){function e(){if(!m.submitting){if(!l())return n(f.model.get("err")),!1;i(),r(),t()}return!1}function t(e){$.ajax({url:f.model.get("loginPath"),type:"post",dataType:"json",data:p.serialize(),success:function(e){e.success?o(e):(app.track("event","Dealers","Dealer login attempt fail"),a(e))},error:function(){app.track("event","Dealers","Dealer login unknown error"),a({success:!1,message:"An unknown error occured. Please try again later."})}})}function i(){h.validator.stop(!0,!0).slideUp(300)}function n(e){$(".error",h.validator).text(e),h.validator.stop(!0,!0).slideDown(200)}function o(e){f.trigger("event:login",e),s()}function a(e){m.submitting=!1,n(e.message),h.submit.text("Submit").removeClass("submitting")}function r(){m.submitting=!0,h.submit.text("Logging in...").addClass("submitting")}function s(){d(),m.submitting=!1,h.submit.text("Submit").removeClass("submitting")}function l(){var e;m.validated=!0,m.data={};for(var t=0,i=v.field.length;t<i;++t)(e=v.field[t].getData()).validated||(m.validated=!1),m.data[e.key]=e.value;return m.validated}function c(){h.validator.stop(!0,!0).hide();for(var e=0,t=v.field.length;e<t;++e)v.field[e].reset()}function d(){setTimeout(function(){$("input",u).attr("autocomplete","off").val(" ")},1),setTimeout(function(){$("input",u).attr("autocomplete","off").val("")},100),p.trigger("reset");for(var e=0,t=v.field.length;e<t;++e)v.field[e].reset()}var u,p,f=this,h={},v={field:[]},m={validated:!1,data:{},submitting:!1};f.status={active:!1,hover:!1},f.logout=function(){$.ajax({url:f.model.get("loginPath"),type:"post",dataType:"json",data:$.param({logout:!0}),success:function(e){}})},f.activate=function(){f.status.active=!0,m.submitting||(d(),c())},f.deactivate=function(){f.status.active=!1},u=f.$el,p=$("form",u),h.fields=$(".form-group",u),h.submit=$("button.btn--submit",u),h.validator=$(".form-validator",u),h.fields.each(function(){v.field.push(app.request("ui:controller:create",{controller:"FormFieldController",options:{$el:$(this)}}))}),p.on("submit",e),h.submit.on("click",e),$.getJSON(f.model.get("tokenPath"),function(e){h.token.val(e.token)})}})},{"./templates/LoginTemplate.html":119}],116:[function(e,t,i){var n=e("./templates/PortalTemplate.html"),o=e("../models/portal/AssetGroupModel"),a=e("./portal/AssetGroupView"),r=Backbone.Collection.extend({model:o});t.exports=Backbone.Marionette.CompositeView.extend({template:_.template(n),className:"dealer-portal",tagName:"div",childView:a,childViewContainer:".asset-groups",initialize:function(e){var t=this;t.collection=new r(t.model.get("assets"))},onRender:function(){var e=this;e.status={active:!1,hover:!1},e.activate=function(){e.status.active=!0},e.deactivate=function(){e.status.active=!1},e.$el}})},{"../models/portal/AssetGroupModel":113,"./portal/AssetGroupView":117,"./templates/PortalTemplate.html":120}],117:[function(e,t,i){var n=e("../templates/portal/AssetGroupTemplate.html"),o=e("../../models/portal/AssetModel"),a=e("./AssetView"),r=Backbone.Collection.extend({model:o});t.exports=Backbone.Marionette.CompositeView.extend({template:_.template(n),className:"asset-group",tagName:"div",childView:a,childViewContainer:".assets",initialize:function(e){var t=this;t.collection=new r(t.model.get("a"))},onRender:function(){var e=this;e.status={active:!1,hover:!1},e.activate=function(){e.status.active=!0},e.deactivate=function(){e.status.active=!1},e.$el}})},{"../../models/portal/AssetModel":114,"../templates/portal/AssetGroupTemplate.html":121,"./AssetView":118}],118:[function(e,t,i){var n=e("../templates/portal/AssetTemplate.html");t.exports=Backbone.Marionette.ItemView.extend({template:_.template(n),className:"asset",tagName:"li",initialize:function(e){},onRender:function(){var e=this;e.status={active:!1,hover:!1},e.activate=function(){e.status.active=!0},e.deactivate=function(){e.status.active=!1},e.$el}})},{"../templates/portal/AssetTemplate.html":122}],119:[function(e,t,i){t.exports='<div class="view-login"><h2 class="title"><%= lit %></h2><hr/> <%= lid %><form id="login" action="<%= loginPath %>" autocomplete="off" method="post"><div class="form-group"> <label for="user">Your Username*:</label> <input data-validation="text" data-validation-error="Please enter your username." type="text" class="form-control" id="user" name="user" placeholder="Username" value=""></div><div class="form-group"> <label for="pass">Your Password*:</label> <input data-validation="text" data-validation-error="Please enter your password." type="password" class="form-control" id="pass" name="pass" placeholder="Password" value=""></div><div class="form-validator" style="display: none;"><div class="error">Please complete all required fields before submitting.</div></div> <button type="submit" class="go-login btn btn--submit">Login</button></form></div><div class="view-logout"><h2 class="title"><%= lot %></h2><hr/> <%= lod %> <a class="btn--boxstandard go-logout" href="#logout" role="button"><span>Logout</span><span class="l-arr"><div class="icon icon--link"></div></span></a></div>'},{}],120:[function(e,t,i){t.exports='<div class="block"><div class="block-shift"><h2 class="title"><%= t %></h2><hr/><div class="block-content"><p><%= g %></p></div></div></div><div class="asset-groups"></div>'},{}],121:[function(e,t,i){t.exports='<div class="block"><div class="block-content"><div class="grp-img"><img src="<%= img %>"/></div><div class="grp-info"><div class="grp-title"><%= t %></div><div class="grp-descrip"> <%= d %></div><div class="grp-assets"><ul class="assets"></ul></div></div><div class="clear"></div></div></div>'},{}],122:[function(e,t,i){t.exports='<a class="btn--boxstandard ignore-link" href="<%= a %>" target="_blank" role="button"><%= t %></a>'},{}],123:[function(e,t,i){t.exports=Backbone.Model.extend({defaults:{t:"",c:"",ft:"",fd:""}})},{}],124:[function(e,t,i){t.exports=e(25)},{}],125:[function(e,t,i){t.exports='<div class="app-central app-content--standard"><div class="app-section-intro pad-r-lr"></div><div class="layout app-content--layout"><div class="banner-region pad-r-lr"></div><article class="content-region"><div class="column pad-r-lr info"><div class="display"><div class="block"><div class="block-shift"><h2 class="title"><%= t %></h2><hr/><div class="block-content"> <%= c %></div></div></div><div class="block"><div class="block-shift"><div class="block-content"><div class="dealer-login" role="form"></div></div></div></div></div></div><div class="column pad-r-lr dl-assets"><div class="display"><div class="portal-region"></div><div class="block form-block"><div class="block-shift"><h2 class="title"><%= ft %></h2><hr/><div class="block-content"> <%= fd %></div><div class="app-form" role="form"></div></div></div></div></div></article></div><div class="clear"></div><div class="app-wipeout"></div></div>'},{}],126:[function(e,t,i){e("./display/Display");var n=e("./views/templates/LayoutTemplate.html"),o=e("./models/LayoutModel"),a=e("./views/LayoutView");t.exports=app.module("Events",{startWithParent:!1,define:function(e,t,i,r,s,l){function c(e){l.extend(y,e),g=y.region.$el}function d(){t.cmd.execute("router:route:register",{id:"events",route:"(/)about/events(/)",isHome:!0,controller:{start:f,stop:v}})}function u(){w=new a({template:l.template(n),model:new o}),y.region.show(w),w.addRegions({bannerRegion:s(".layout .banner-region",w.$el),contentRegion:s(".layout .content-region",w.$el)})}function p(){y.Display.start({region:y.region,layout:w,data:y.data,$el:g})}function f(){t.vent.trigger("resize:trigger"),h(),t.vent.trigger("app:ui:bar:theme:set",y.data.c),t.cmd.execute("router:pid:set",y.data.pid),t.cmd.execute("router:page:title:set",y.data.ht)}function h(){g.show(),y.Display.activate(),t.vent.trigger("app:ui:footer:hide"),TweenLite.killDelayedCallsTo(m),TweenLite.delayedCall(.3,m),t.vent.trigger("app:ui:theme:set","dark"),t.vent.trigger("resize:trigger")}function v(e){TweenLite.killDelayedCallsTo(h),TweenLite.killDelayedCallsTo(m),y.Display.deactivate(function(){g.hide(),e()})}function m(){t.vent.trigger("resize:trigger"),t.vent.trigger("app:section:shown")}var g,w,y=e;y.addInitializer(function(e){c(e),d(),u(),p()})}})},{"./display/Display":127,"./models/LayoutModel":134,"./views/LayoutView":135,"./views/templates/LayoutTemplate.html":136}],127:[function(e,t,i){var n=e("./models/ContentModel"),o=e("./views/ContentView");t.exports=app.module("Events.Display",{startWithParent:!1,define:function(e,t,i,a,r,s){function l(e){s.extend(k,e)}function c(){b={title:k.data.cn.t,content:k.data.cn.c,linkDisplay:k.data.cn.lnk.inc?"inline-block":"none",linkTitle:k.data.cn.lnk.inc?k.data.cn.lnk.t:"",linkURL:k.data.cn.lnk.inc?k.data.cn.lnk.u:"",items:d(k.data.cn.lst)}}function d(e){for(var t=[],i=0,n=e.length;i<n;++i)e[i],t.push({title:e[i].t,content:e[i].c,img:e[i].img,links:u(e[i].lnks)});return t}function u(e){for(var t="",i=0,n=e.length;i<n;++i)t+=s.template('<li class="asset"><a class="btn--boxstandard" href="<%= url %>" target="_blank" role="button"><%= title %></a></li>')({title:e[i].t,url:e[i].u});return t}function p(){L=new o({model:new n(b)}),k.layout.contentRegion.show(L)}function f(){C=t.request("ui:view:create",{view:"BannerView",model:"BannerModel",modelProps:k.data.cn.bn,options:{}}),k.layout.bannerRegion.show(C)}function h(){x=k.$el}function v(){T=t.request("ui:controller:create",{controller:"IntroController",options:{$el:r(".app-section-intro",x)}}),D=t.request("ui:controller:create",{controller:"WipeoutController",options:{$el:r(".app-wipeout",x)}}),$=t.request("ui:controller:create",{controller:"ShifterController",options:{$selectors:r(".block-shift, .app-banner",k.layout.$el),delayMultiplier:.1,startOffset:60}})}function m(){D.fadeOut({time:.5})}function g(){t.vent.on("resize:app",y),y()}function w(){t.vent.off("resize:app",y)}function y(){}var x,b,T,D,$,C,L,k=e;k.activate=function(){k.status.active=!0,C.activate(),T.show(),$.show(),D.start({wait:.5,onComplete:m}),g()},k.deactivate=function(e){k.status.active=!1,D.fadeIn({time:.5,onComplete:function(){r("html, body").animate({scrollTop:1},1),void 0!==e&&e()}}),T.hide(),$.hide(),C.deactivate(),w()},k.status={active:!1},k.addInitializer(function(e){l(e),c(),p(),f(),h(),v()})}})},{"./models/ContentModel":129,"./views/ContentView":131}],128:[function(e,t,i){t.exports=e(29)},{}],129:[function(e,t,i){t.exports=e(19)},{}],130:[function(e,t,i){t.exports=e(31)},{"./templates/AssetGroupTemplate.html":132}],131:[function(e,t,i){t.exports=e(32)},{"../models/AssetGroupModel":128,"./AssetGroupView":130,"./templates/ContentTemplate.html":133}],132:[function(e,t,i){t.exports=e(33)},{}],133:[function(e,t,i){t.exports=e(34)},{}],134:[function(e,t,i){t.exports=e(24)},{}],135:[function(e,t,i){t.exports=e(25)},{}],136:[function(e,t,i){t.exports=e(26)},{}],137:[function(e,t,i){e("./display/Display");var n=e("./views/templates/LayoutTemplate.html"),o=e("./models/LayoutModel"),a=e("./views/LayoutView");t.exports=app.module("Home",{startWithParent:!1,define:function(e,t,i,r,s,l){function c(e){l.extend(y,e),g=y.region.$el}function d(){t.cmd.execute("router:route:register",{id:"home",route:"(/)",isHome:!0,controller:{start:f,stop:v}})}function u(){w=new a({template:l.template(n),model:new o(y.data.cn)}),y.region.show(w),w.addRegions({sceneRegion:s(".scene-home",w.$el),particlesRegion:s(".particles-home",w.$el),overlaysRegion:s(".overlays-home",w.$el),contentRegion:s(".content-home",w.$el)})}function p(){y.Display.start({$el:y.region.$el,region:y.region,layout:w,data:y.data})}function f(){TweenLite.killDelayedCallsTo(h),t.vent.trigger("resize:trigger"),"webgl"===y.Display.mode?t.vent.trigger("app:ui:theme:set","darkSoft"):t.vent.trigger("app:ui:theme:set","light"),t.vent.trigger("app:ui:bar:theme:set",y.data.c),t.cmd.execute("router:pid:set",y.data.pid),t.cmd.execute("router:page:title:set",y.data.ht),h()}function h(){g.show(),y.Display.activate(),t.vent.trigger("app:ui:footer:hide"),TweenLite.killDelayedCallsTo(m),TweenLite.delayedCall(1.5,m),t.vent.trigger("resize:trigger")}function v(e){TweenLite.killDelayedCallsTo(h),TweenLite.killDelayedCallsTo(m),t.vent.trigger("app:ui:theme:set","dark",!1,!0),y.Display.deactivate(function(){g.hide(),e()})}function m(){t.vent.trigger("resize:trigger"),t.vent.trigger("app:section:shown")}var g,w,y=e;y.addInitializer(function(e){c(e),d(),u(),p()})}})},{"./display/Display":138,"./models/LayoutModel":149,"./views/LayoutView":150,"./views/templates/LayoutTemplate.html":151}],138:[function(e,t,i){e("./content/Content"),e("./scene/Scene"),e("./particles/Particles");var n=e("./controllers/Slideshow");t.exports=app.module("Home.Display",{startWithParent:!1,define:function(e,t,i,o,a,r){function s(){v.begin({data:t.data.sections.home.ss,list:t.data.core.collections.l.slice(0)})}function l(){g.Particles.addToPreload()}function c(e){r.extend(g,e),f=g.$el,h=g.layout.overlaysRegion.$el}function d(){g.Content.start({region:g.layout.contentRegion,mode:w}),"standard"===w?(a(".standard-scene",g.layout.$el).show(),g.Scene.start({settings:g.data.ss,region:g.layout.sceneRegion}),v.registerModules({scene:g.Scene,particles:g.Particles})):g.Particles.start({mode:w,data:g.data.cn.pr,region:g.layout.particlesRegion})}function u(){m=t.request("ui:controller:create",{controller:"WipeoutController",options:{$el:a(".app-wipeout",f)}})}function p(){m.fadeOut({time:.5})}var f,h,v,m,g=e,w={};g.activate=function(){g.status.active=!0,m.start({delay:.2,onComplete:p}),g.Content.activate(),"standard"===w?(g.Scene.activate(),v.activate()):g.Particles.activate()},g.deactivate=function(e){g.status.active=!1,g.Content.deactivate(),g.Particles.deactivate(),m.fadeIn({time:.5,onComplete:function(){a("html, body").animate({scrollTop:1},1),"standard"===w&&(v.deactivate(),g.Scene.deactivate()),void 0!==e&&e()}})},g.mode={},g.status={active:!1},g.addInitializer(function(e){c(e),d(),u()}),w=device.webGL?"webgl":"standard",g.mode=w,"webgl"!==w?(v=new n,t.vent.on("app:loader:core:complete",s)):t.vent.on("app:loader:core:complete",l)}})},{"./content/Content":139,"./controllers/Slideshow":141,"./particles/Particles":142,"./scene/Scene":145}],139:[function(e,t,i){t.exports=app.module("Home.Display.Content",{startWithParent:!1,define:function(e,t,i,n,o,a){function r(e){a.extend(h,e),p=h.region.$el,v.shift=o(".region",p),v.info=o(".info",p),v.title=o(".title",p),"webgl"===h.mode&&p.addClass("content-dark")}function s(){f=t.request("ui:controller:create",{controller:"ShifterController",options:{$selectors:o(".title, .description, .link",p),delayMultiplier:.2,startOffset:10,endOffset:60,useOpacity:!0}})}function l(){t.vent.on("resize:app",d),d(!0),o("a",p).on("click",function(){t.track("event","Home","Center Link Clicked",o(this).attr("href"))})}function c(){t.vent.off("resize:app",d)}function d(e){m.height=t.win.height,m.infoHeight=v.info.height(),m.titleHeight=v.title.height(),m.offset=Math.round(.5*m.height-.5*m.infoHeight),u(e)}function u(e){TweenLite.to(v.shift,e?0:.3,{y:m.offset,force3D:t.forc3D})}var p,f,h=e,v={},m={height:0};h.status={active:!1},h.updateDimensions=d,h.activate=function(){h.status.active=!0,f.show({delay:"webgl"===h.mode?1.5:.5}),l()},h.deactivate=function(){h.status.active=!1,f.hide(),c()},h.addInitializer(function(e){r(e),s()})}})},{}],140:[function(e,t,i){t.exports=Marionette.Controller.extend({initialize:function(e){var t=this;t.show=function(e){t.status.active=!0,t.scene.showSlide(t.index,e)},t.hide=function(e,i){t.status.active=!1,i&&t.scene.hideSlide(t.index,!0),t.status.active||(!0!==i&&t.scene.hideSlide(t.index),void 0!==e&&e())},t.status={active:!1},_.extend(t,e),t.scene.trigger("slide:create",{index:t.index,image:t.data.img,src:t.data.src})}})},{}],141:[function(e,t,i){var n=e("./Slide");t.exports=Marionette.Controller.extend({initialize:function(e){function t(){w.screenWidth=screen.width,w.screenHeight=screen.height,w.screenWidth>=1920?w.imageSize=device.webGL?"l":"chrome"===device.browser?"l":"m":w.screenWidth>=550?w.imageSize="m":w.imageSize="s"}function i(e){for(var t,i=0,n=e.length;i<n;++i)t=e[i],x.list.push({img:t.img.dir+t.img.bg[w.imageSize],loaded:!1,error:!1,created:!1,title:t.t});x.list=_.shuffle(x.list)}function o(){for(var e=0,t=Math.min(x.list.length,w.numToPreload);e<t;++e)app.cmd.execute("loader:preload:add",{fn:s,data:{index:e}})}function a(){if(x.numLoaded!==x.list.length){y.list=[];for(var e=x.numLoaded,t=x.list.length;e<t;++e)y.list.push({fn:s,data:{index:e}});y.queue=app.request("utils:queue:create",{queue:y.queue,list:y.list,sync:!0}),y.queue.on("task:complete:callback",d),y.queue.start()}}function r(){x.numLoaded!==x.list.length&&y.queue.stop()}function s(e,t){var i;(i=app.request("utils:queue:create",{queue:i,list:[{fn:l,data:{index:t.index}}],sync:!1})).on("complete",function(){x.list[t.index].loaded=!0,x.numLoaded++,e(t.index)}),i.start()}function l(e,t){var i=app.request("utils:loader:image:load",{src:x.list[t.index].img});i.on("complete",function(i){x.list[t.index].src=x.list[t.index].img,x.list[t.index].img=i,e()}).on("error",function(){x.list[t.index].error=!0,e()}),i.load()}function c(){for(var e=0,t=x.list.length;e<t;++e)x.list[e].loaded&&!x.list[e].error&&d(e)}function d(e){x.list[e].error||x.list[e].created||(x.list[e].created=!0,x.slide.push(new n({index:e,data:x.list[e],scene:m})),x.total++)}function u(){f(x.current,!0)}function p(e){TweenLite.killDelayedCallsTo(v),void 0!==e&&e()}function f(e,t){e>x.total-1&&(e=0),x.current=e,x.slide[e].show(t),TweenLite.killDelayedCallsTo(v),TweenLite.delayedCall(Number(w.settings.tm),v)}function h(e,t){x.slide[e].hide(t)}function v(){h(x.current,function(){f(x.current+1)})}var m,g=this,w={settings:{},numToPreload:2,imageSize:"m"},y={data:{},queue:null,list:[]},x={list:[],slide:[],current:0,total:0,numLoaded:0};g.status={active:!1},g.begin=function(e){w.settings=e.data,i(e.list),o()},g.registerModules=function(e){m=e.scene,c()},g.activate=function(){x.slide=_.shuffle(x.slide),g.status.active=!0,x.current=0,a(),u()},g.deactivate=function(e){g.status.active=!1,r(),p(e)},_.extend(g,e),t()}})},{"./Slide":140}],142:[function(e,t,i){var n=e("./controllers/ParticleSystemController");t.exports=app.module("Home.Display.Particles",{startWithParent:!1,define:function(e,t,i,o,a,r){function s(e){var i=t.request("utils:loader:image:load",{src:C});i.on("complete",function(t){b=t,e()}).on("error",function(){e()}),i.load()}function l(e){r.extend(T,e)}function c(){L.renderer=t.request("utils:three:renderer:create",{options:{alpha:!0,devicePixelRatio:device.retina?device.touch?1:1.1:1}}),L.renderer.setSize(t.win.width,t.win.height),L.scene=new THREE.Scene,L.container=new THREE.Object3D,L.scene.add(L.container),L.camera=new THREE.PerspectiveCamera(30,t.win.width/t.win.height,.1,1e4),L.camera.position.z=160,L.tanFOV=Math.tan(Math.PI/180*L.camera.fov/2),L.windowHeight=540,L.camera.aspect=t.win.width/t.win.height,L.camera.fov=360/Math.PI*Math.atan(L.tanFOV*(t.win.height/L.windowHeight)),L.camera.updateProjectionMatrix()}function d(){x=new n({data:T.data,container:L.container,particleMap:b})}function u(){T.region.$el.append(a(L.renderer.domElement))}function p(){T.region.$el.empty()}function f(){$.prevWidth=null,$.prevHeight=null,t.vent.on("resize:app",g),g(!0)}function h(){t.vent.off("resize:app",g)}function v(){D.enabled=!0,D.now||y()}function m(){D.enabled=!1}function g(e){$.width=t.win.width,$.height=t.win.height,($.width!==$.prevWidth||$.height!==$.prevHeight||!0===e||device.touch)&&(TweenLite.killDelayedCallsTo(w),TweenLite.delayedCall(e?0:D.resizeDelay,w),$.prevWidth=$.width,$.prevHeight=$.height)}function w(){L.renderer.setSize($.width,$.height),L.camera.aspect=$.width/$.height,L.camera.fov=360/Math.PI*Math.atan(L.tanFOV*($.height/L.windowHeight)),L.camera.updateProjectionMatrix(),x.updateDimensions(),L.renderer.render(L.scene,L.camera)}function y(){D.enabled?(D.now=!0,x.render(L.renderer,L.scene),L.renderer.render(L.scene,L.camera)):D.now=!1,D.enabled&&requestAnimationFrame(y)}var x,b,T=e,D={resizeDelay:.3,enabled:!1,now:!1},$={width:0,height:0,prevWidth:-1,prevHeight:-1},C=t.paths.img+"app/sections/home/particles/1.png",L={tanFOV:0,windowHeight:0,renderer:{},scene:{},container:{}};T.addToPreload=function(){t.cmd.execute("loader:preload:add",{fn:s})},T.activate=function(){"webgl"===T.mode&&(T.status.active=!0,u(),v(),f(),x.activate())},T.deactivate=function(e){"webgl"===T.mode?(T.status.active=!1,x.deactivate(function(){T.status.active||(m(),p(),h(),void 0!==e&&e())})):void 0!==e&&e()},T.status={active:!1},T.addInitializer(function(e){l(e),"webgl"===T.mode&&(c(),d())})}})},{"./controllers/ParticleSystemController":144}],143:[function(e,t,i){t.exports=Marionette.Controller.extend({initialize:function(e){var t,i,n,o,a,r,s=this,l={loopTime:1e3*(100+200*Math.random()),scaleMultiplier:1},c={x:0,y:0,z:0,multiplyX:1,multiplyY:1,time:1+2*Math.random()},d={radius:10,angle:0,pos:{x:0,y:0},offset:{x:0,y:0}},u=20*Math.random()-10,p=new THREE.Vector3,f=new THREE.Vector3,h=0,v=0;s.update=function(e,l){h=e%s.loopTime/s.loopTime,r=s.tube.parameters.path.getPointAt(h),n=h*v,o=Math.floor(n),a=(o+1)%v,p.subVectors(s.tube.binormals[a],s.tube.binormals[o]),p.multiplyScalar(n-o).add(s.tube.binormals[o]),t=s.tube.parameters.path.getTangentAt(h),f.copy(p).cross(t),r.add(f.clone().multiplyScalar(u)),i=Math.sqrt(Math.pow(r.x,2)+Math.pow(r.y,2)),r.z=r.z*(1.2+.04*i)*s.scaleMultiplier,d.multiplier=1-.0065*r.z,d.pos.x=l.x*d.multiplier,d.pos.y=l.y*d.multiplier,d.a=d.pos.x-r.x,d.b=d.pos.y-r.y,d.dist=Math.sqrt(Math.pow(d.a,2)+Math.pow(d.b,2)),d.dist<d.radius&&l.over&&(d.angle=180*Math.atan2(d.a,d.b)/Math.PI,d.offset.x+=(d.radius-d.dist)*Math.cos(d.angle*Math.PI/180)*.7,d.offset.y+=(d.radius-d.dist)*Math.sin(d.angle*Math.PI/180)*.7,d.offset.x*=.4+l.currVelocity,d.offset.y*=.4+l.currVelocity),d.offset.x*=.9,d.offset.y*=.9,r.x+=d.offset.x,r.y-=d.offset.y,s.vertex.x=r.x*c.multiplyX+c.x,s.vertex.y=r.y*c.multiplyY+c.y,s.vertex.z=r.z+c.z},s.reveal=function(){TweenLite.set(c,{multiplyX:0,multiplyY:0,x:300*Math.random()-150,y:300*Math.random()-150,z:0}),TweenLite.to(c,c.time,{multiplyX:1,multiplyY:1,x:0,y:0,z:0,ease:Quad.easeOut})},s.hide=function(){TweenLite.to(c,c.time,{x:100*Math.random()-50,y:100*Math.random()-50})},_.extend(s,l,e),v=s.tube.tangents.length}})},{}],144:[function(e,t,i){var n=e("./ParticleController");t.exports=Marionette.Controller.extend({initialize:function(e){function t(){var e=[[-21.43,-17.51,0],[-21.43,-12.6,0],[-19.09,-8.25,0],[-14.08,-6.08,0],[-7.57,-8.75,0],[-5.9,-13.44,0],[-7.73,-19.62,0],[-13.66,-21.46,0],[-30.73,-21.46,0],[-39.98,-17.95,0],[-46.32,-11.43,0],[-49.5,-4.91,0],[-50,-.06,0],[-49.5,4.8,0],[-46.32,11.32,0],[-39.98,17.84,0],[-30.73,21.35,0],[-17.43,21.42,0],[-12.52,21.42,0],[-8.18,19.08,0],[-6,14.06,0],[-8.68,7.54,0],[-13.35,5.87,0],[-19.54,7.71,0],[-21.37,13.64,0],[-21.37,30.72,0],[-17.86,39.97,0],[-11.35,46.32,0],[-4.83,49.5,0],[.02,50,0],[4.87,49.5,0],[11.38,46.32,0],[17.9,39.97,0],[21.41,30.72,0],[21.41,13.64,0],[19.57,7.71,0],[13.39,5.87,0],[8.71,7.54,0],[6.04,14.06,0],[8.21,19.08,0],[12.55,21.42,0],[17.46,21.42,0],[30.73,21.46,0],[39.98,17.95,0],[46.32,11.43,0],[49.5,4.91,0],[50,.06,0],[49.5,-4.8,0],[46.32,-11.32,0],[39.98,-17.84,0],[30.73,-21.35,0],[17.43,-21.42,0],[12.52,-21.42,0],[8.18,-19.08,0],[6,-14.06,0],[8.68,-7.54,0],[13.35,-5.87,0],[19.54,-7.71,0],[21.37,-13.64,0],[21.37,-30.72,0],[17.86,-39.97,0],[11.35,-46.32,0],[4.83,-49.5,0],[-.02,-50,0],[-4.87,-49.5,0],[-11.38,-46.32,0],[-17.9,-39.97,0],[-21.41,-30.72,0],[-21.43,-17.51,0]];m.points=[];for(var t=0,i=e.length;t<i;++t)m.points.push(new THREE.Vector3(e[t][0],e[t][1],e[t][2]))}function i(){for(var e,t,i,o,a,r=0,s=x.count;r<s;++r)a=Math.random()*Math.PI*2,t=30*Math.cos(a)*(1+.3*Math.random()),i=30*Math.sin(a)*(1+.3*Math.random()),o=200*Math.random()-100,e=new THREE.Vector3(t,i,o),x.particle.push(new n({vertex:e,tube:m.geometry,scaleMultiplier:r%10<2?1+1.3*Math.random():1})),x.vertices.push(e)}function o(){for(var e=Math.floor(x.count/x.systems.list.length),t=0,i=x.systems.list.length;t<i;++t)start=t*e,new THREE.Geometry,a({index:t,start:t*e,count:t===x.systems.list.length-1?x.count-e*t:e})}function a(e){for(var t,i,n,o=x.systems.list[e.index],a=new THREE.Geometry,r=e.start,s=e.count+e.start;r<s;++r)a.vertices.push(x.vertices[r]);device.touch&&(o.size=1.4*o.size),(t=new THREE.Texture(v.particleMap)).needsUpdate=!0,(i=new THREE.PointCloudMaterial({color:o.color,size:o.size,map:t,depthTest:!1,transparent:!0,opacity:o.opacity})).defaultSize=o.size,i.baseSize=o.size,n=new THREE.PointCloud(a,i),x.systems.system.push(n),v.container.add(n)}function r(){var e,t,i;for(TweenLite.killDelayedCallsTo(l),e=0,t=x.systems.system.length;e<t;++e)i=x.systems.system[e].material,TweenLite.killTweensOf(i),TweenLite.set(i,{size:0});for(e=0,t=x.particle.length;e<t;++e)x.particle[e].reveal()}function s(e){var t,i,n;for(TweenLite.killDelayedCallsTo(l),t=0,i=x.systems.system.length;t<i;++t)n=x.systems.system[t].material,TweenLite.killTweensOf(n),TweenLite.to(n,.5,{delay:.03*t,size:0});for(t=0,i=x.particle.length;t<i;++t)x.particle[t].hide();TweenLite.delayedCall(.5+.03*x.systems.system.length,l,[e])}function l(e){void 0!==e&&e()}function c(){$(document).on(device.move,$.throttle(5,y[y.type])).on(device.out,y[y.type+"Out"])}function d(){$(document).off(device.move,$.throttle(5,y[y.type])).off(device.out,y[y.type+"Out"])}function u(e,t){w.over||(w.x=(e-.5*app.win.width)*(.16*(1-g.ratio+1)),w.y=-(t-.5*app.win.height)*(.16*(1-g.ratio+1)),w.time=Date.now()),w.over=!0,w.newX=(e-.5*app.win.width)*(.16*(1-g.ratio+1)),w.newY=-(t-.5*app.win.height)*(.16*(1-g.ratio+1)),w.newTime=Date.now(),w.interval=w.newTime-w.time,w.velocity=Math.sqrt(Math.pow(w.newX-w.x,2),Math.pow(w.newY-w.y,2))/w.interval*5,isNaN(w.velocity)&&(w.velocity=0),w.velocity=Math.min(w.velocity,1.2),w.time=w.newTime,w.x=(e-.5*app.win.width)*(.16*(1-g.ratio+1)),w.y=-(t-.5*app.win.height)*(.16*(1-g.ratio+1))}function p(){f()}function f(){var e;g.ratio=1.2*Math.min(app.win.width/g.base.width,app.win.height/g.base.height),g.ratio=Math.max(.7,Math.min(1.2,g.ratio)),x.sizeMultiplier=Math.max(g.particleBase.width/app.win.width,g.particleBase.height/app.win.height),x.sizeMultiplier=Math.max(1,x.sizeMultiplier*(.8*g.ratio)),v.container.scale.set(g.ratio,g.ratio,g.ratio);for(var t=0,i=x.systems.system.length;t<i;++t)e=x.systems.system[t].material,TweenLite.to(e,.3+.2*t,{delay:.4*t,size:e.defaultSize*x.sizeMultiplier,ease:Expo.easIn})}var h,v=this,m={points:[],spline:{}},g={particleBase:{width:800,height:1424},base:{width:800,height:1e3}},w={over:!1,x:0,y:0,velocity:0,currVelocity:0,multiplier:1},y={type:"mouse",mouse:function(e){u(e.clientX,e.clientY)},mouseOut:function(e){w.over=!1,w.x=-9999,w.y=-9999},touch:function(e){device.mobile||(w.over=!0,u(e.originalEvent.touches[0].clientX,e.originalEvent.touches[0].clientY),e.preventDefault())},touchOut:function(e){w.over=!1,w.x=-9999,w.y=-9999}},x={spline:{},particle:[],vertices:[],count:device.touch?1900:"chrome"===device.browser?3500:3200,systems:{list:[{color:2917559,size:2.2,opacity:.3},{color:15446569,size:1.2,opacity:.6},{color:13837203,size:2,opacity:.4},{color:16750848,size:1.4,opacity:.3},{color:2917559,size:1.3,opacity:.3},{color:6583347,size:1,opacity:.6},{color:13421772,size:2.1,opacity:.3}],system:[]}};v.status={active:!1},v.activate=function(){v.status.active=!0,r(),c(),p()},v.deactivate=function(e){v.status.active=!1,d(),s(e)},v.updateDimensions=p,v.render=function(e,t){var i,n;for(h=Date.now(),w.velocity*=.9,TweenLite.to(w,2,{currVelocity:w.velocity}),w.velocity<.001&&(w.velocity=0),i=0,n=x.systems.system.length;i<n;++i)x.systems.system[i].geometry.verticesNeedUpdate=!0;for(i=0,n=x.particle.length;i<n;++i)x.particle[i].update(h,w)},_.extend(v,e),function(){for(var e=[],t={},i=0,n=v.data.l.length;i<n;++i)t=v.data.l[i],e.push({color:t.c.toString(16),opacity:.01*Number(t.o),size:Number(t.s)});x.systems.list=e}(),y.type=device.touch?"touch":"mouse",t(),m.spline=new THREE.SplineCurve3(m.points),m.geometry=new THREE.TubeGeometry(m.spline,70,2,6,!0),i(),o()}})},{"./ParticleController":143}],145:[function(e,t,i){var n=e("./models/SlideModel"),o=e("./views/SlideView"),a=Backbone.Collection.extend({model:n}),r=Marionette.CollectionView.extend({tagName:"div",className:"slide-list",childView:o,onAddChild:function(e){this.trigger("child:added",e)}});t.exports=app.module("Home.Display.Scene",{startWithParent:!1,define:function(e,t,i,n,o,s){function l(e){s.extend(h,e)}function c(){v.slideCollection=new a([]),v.slideView=new r({collection:v.slideCollection,childViewEventPrefix:"view"}),h.region.show(v.slideView)}function d(){h.on("slide:create",u),v.slideView.on("child:added",p)}function u(e){v.slideCollection.add(f(e))}function p(e){v.slide.push(e)}function f(e){var t={};return t.img=e.src,t}var h=e,v={slideCollection:{},slideView:{},current:-1,slide:[]};h.Scene={},h.activate=function(){},h.deactivate=function(){},h.showSlide=function(e,t,i){v.slide[e].show(i,h.region.$el,t)},h.hideSlide=function(e,t,i){v.slide[e].hide(i,t)},h.addInitializer(function(e){l(e),c(),d()})}})},{"./models/SlideModel":146,"./views/SlideView":147}],146:[function(e,t,i){t.exports=Backbone.Model.extend({defaults:{img:""}})},{}],147:[function(e,t,i){var n=e("./templates/SlideTemplate.html");t.exports=Backbone.Marionette.ItemView.extend({template:_.template(n),className:"slide",tagName:"div",initialize:function(e){},onShow:function(){function e(e,o){n.show(),TweenLite.killTweensOf(n),TweenLite.set(n,{opacity:0,force3D:app.force3D}),TweenLite.to(n,o?0:1.5,{opacity:1,force3D:app.force3D}),TweenLite.killDelayedCallsTo(i),TweenLite.killDelayedCallsTo(t),TweenLite.delayedCall(2,t,[e])}function t(e){void 0!==e&&e()}function i(e){n.hide(),void 0!==e&&e()}var n,o=this;o.show=function(o,a,r){n.show(),n.parent().append(n),TweenLite.killTweensOf(n),TweenLite.set(n,{opacity:0,force3D:app.force3D}),TweenLite.killDelayedCallsTo(t),TweenLite.killDelayedCallsTo(i),TweenLite.killDelayedCallsTo(e),e(o,r)},o.hide=function(o,a){TweenLite.killDelayedCallsTo(e),TweenLite.killTweensOf(n),a&&TweenLite.to(n,1,{opacity:0,force3D:app.force3D}),TweenLite.killDelayedCallsTo(t),TweenLite.killDelayedCallsTo(i),TweenLite.delayedCall(2,i,[o])},o.reset=function(){n.hide(),TweenLite.killTweensOf(n),TweenLite.set(n,{opacity:0,force3D:app.force3D}),TweenLite.killDelayedCallsTo(t),TweenLite.killDelayedCallsTo(i),TweenLite.killDelayedCallsTo(e)},n=o.$el}})},{"./templates/SlideTemplate.html":148}],148:[function(e,t,i){t.exports='<div class="img" style="background-image:url(<%= img %>);"></div>'},{}],149:[function(e,t,i){t.exports=Backbone.Model.extend({defaults:{lt:"",lu:"#"}})},{}],150:[function(e,t,i){t.exports=e(97)},{}],151:[function(e,t,i){t.exports='<div class="app-content--fill"><div class="standard-scene"><div class="scene scene-home"></div><div class="overlays overlays-home"><div class="gradient-top"></div><div class="gradient-bottom"></div><div class="base-overlay"></div></div></div><div class="particles particles-home"></div><div class="content content-home"><div class="soften"></div><div class="region"><div class="offset pad-r-lr"><div class="info" role="heading"><h1 class="title"><%= t %></h1><p class="description"><%= st %></p></div><div class="link"><a class="btn--boxstandard home-box" href="<%= lu %>"><div class="home-box-bg"></div><span><%= lt %></span><span class="l-arr"><div class="icon icon--link"></div></span></a></div></div></div></div><div class="app-wipeout"></div></div>'},{}],152:[function(e,t,i){e("./display/Display");var n=e("./views/templates/LayoutTemplate.html"),o=e("./models/LayoutModel"),a=e("./views/LayoutView");t.exports=app.module("Media",{startWithParent:!1,define:function(e,t,i,r,s,l){function c(e){l.extend(y,e),g=y.region.$el}function d(){t.cmd.execute("router:route:register",{id:"media",route:"(/)about/media(/)",isHome:!0,controller:{start:f,stop:v}})}function u(){w=new a({template:l.template(n),model:new o}),y.region.show(w),w.addRegions({bannerRegion:s(".layout .banner-region",w.$el),contentRegion:s(".layout .content-region",w.$el)})}function p(){y.Display.start({region:y.region,layout:w,data:y.data,$el:g})}function f(){t.vent.trigger("resize:trigger"),h(),t.vent.trigger("app:ui:bar:theme:set",y.data.c),t.cmd.execute("router:pid:set",y.data.pid),t.cmd.execute("router:page:title:set",y.data.ht)}function h(){g.show(),y.Display.activate(),t.vent.trigger("app:ui:footer:hide"),TweenLite.killDelayedCallsTo(m),TweenLite.delayedCall(.3,m),t.vent.trigger("app:ui:theme:set","dark"),t.vent.trigger("resize:trigger")}function v(e){TweenLite.killDelayedCallsTo(h),TweenLite.killDelayedCallsTo(m),y.Display.deactivate(function(){g.hide(),e()})}function m(){t.vent.trigger("resize:trigger"),t.vent.trigger("app:section:shown")}var g,w,y=e;y.addInitializer(function(e){c(e),d(),u(),p()})}})},{"./display/Display":153,"./models/LayoutModel":160,"./views/LayoutView":161,"./views/templates/LayoutTemplate.html":162}],153:[function(e,t,i){var n=e("./models/ContentModel"),o=e("./views/ContentView");t.exports=app.module("Media.Display",{startWithParent:!1,define:function(e,t,i,a,r,s){function l(e){s.extend(k,e)}function c(){b={title:k.data.cn.t,content:k.data.cn.c,linkDisplay:k.data.cn.lnk.inc?"inline-block":"none",linkTitle:k.data.cn.lnk.inc?k.data.cn.lnk.t:"",linkURL:k.data.cn.lnk.inc?k.data.cn.lnk.u:"",items:d(k.data.cn.lst)}}function d(e){for(var t=[],i=0,n=e.length;i<n;++i)e[i],t.push({title:e[i].t,content:e[i].c,img:e[i].img,links:u(e[i].lnks)});return t}function u(e){for(var t="",i=0,n=e.length;i<n;++i)t+=s.template('<li class="asset"><a class="btn--boxstandard" href="<%= url %>" target="_blank" role="button"><%= title %></a></li>')({title:e[i].t,url:e[i].u});return t}function p(){L=new o({model:new n(b)}),k.layout.contentRegion.show(L)}function f(){C=t.request("ui:view:create",{view:"BannerView",model:"BannerModel",modelProps:k.data.cn.bn,options:{}}),k.layout.bannerRegion.show(C)}function h(){x=k.$el}function v(){T=t.request("ui:controller:create",{controller:"IntroController",options:{$el:r(".app-section-intro",x)}}),D=t.request("ui:controller:create",{controller:"WipeoutController",options:{$el:r(".app-wipeout",x)}}),$=t.request("ui:controller:create",{controller:"ShifterController",options:{$selectors:r(".block-shift, .app-banner",k.layout.$el),delayMultiplier:.1,startOffset:60}})}function m(){D.fadeOut({time:.5})}function g(){t.vent.on("resize:app",y),y()}function w(){t.vent.off("resize:app",y)}function y(){}var x,b,T,D,$,C,L,k=e;k.activate=function(){k.status.active=!0,C.activate(),T.show(),$.show(),D.start({wait:.5,onComplete:m}),g()},k.deactivate=function(e){k.status.active=!1,D.fadeIn({time:.5,onComplete:function(){r("html, body").animate({scrollTop:1},1),void 0!==e&&e()}}),T.hide(),$.hide(),C.deactivate(),w()},k.status={active:!1},k.addInitializer(function(e){l(e),c(),p(),f(),h(),v()})}})},{"./models/ContentModel":155,"./views/ContentView":157}],154:[function(e,t,i){t.exports=e(29)},{}],155:[function(e,t,i){t.exports=e(19)},{}],156:[function(e,t,i){t.exports=e(31)},{"./templates/AssetGroupTemplate.html":158}],157:[function(e,t,i){t.exports=e(32)},{"../models/AssetGroupModel":154,"./AssetGroupView":156,"./templates/ContentTemplate.html":159}],158:[function(e,t,i){t.exports=e(33)},{}],159:[function(e,t,i){t.exports=e(34)},{}],160:[function(e,t,i){t.exports=e(24)},{}],161:[function(e,t,i){t.exports=e(25)},{}],162:[function(e,t,i){t.exports=e(26)},{}],163:[function(e,t,i){e("./display/Display");var n=e("./views/templates/LayoutTemplate.html"),o=e("./models/LayoutModel"),a=e("./views/LayoutView");t.exports=app.module("NotFound",{startWithParent:!1,define:function(e,t,i,r,s,l){function c(e){l.extend(y,e),g=y.region.$el}function d(){t.cmd.execute("router:route:register",{id:"notfound",route:"*path",controller:{start:f,stop:v}})}function u(){w=new a({template:l.template(n),model:new o(y.data.cn)}),y.region.show(w),w.addRegions({sceneRegion:s(".scene",w.$el),particlesRegion:s(".particles",w.$el),overlaysRegion:s(".overlays",w.$el),contentRegion:s(".content",w.$el)})}function p(){y.Display.start({$el:y.region.$el,region:y.region,layout:w,data:y.data})}function f(){TweenLite.killDelayedCallsTo(h),t.vent.trigger("resize:trigger"),"webgl"===y.Display.mode?t.vent.trigger("app:ui:theme:set","darkSoft"):t.vent.trigger("app:ui:theme:set","light"),t.vent.trigger("app:ui:bar:theme:set",y.data.c),t.cmd.execute("router:pid:set",y.data.pid),t.cmd.execute("router:page:title:set",y.data.ht),h(),t.track("event","404","Page not found",i.history.fragment)}function h(){g.show(),y.Display.activate(),TweenLite.killDelayedCallsTo(m),TweenLite.delayedCall(1.5,m),t.vent.trigger("resize:trigger")}function v(e){TweenLite.killDelayedCallsTo(h),TweenLite.killDelayedCallsTo(m),t.vent.trigger("app:ui:theme:set","dark",!1,!0),y.Display.deactivate(function(){g.hide(),e()})}function m(){t.vent.trigger("resize:trigger"),t.vent.trigger("app:section:shown")}var g,w,y=e;y.addInitializer(function(e){c(e),d(),u(),p()})}})},{"./display/Display":164,"./models/LayoutModel":175,"./views/LayoutView":176,"./views/templates/LayoutTemplate.html":177}],164:[function(e,t,i){e("./content/Content"),e("./scene/Scene"),e("./particles/Particles");var n=e("./controllers/Slideshow");t.exports=app.module("NotFound.Display",{startWithParent:!1,define:function(e,t,i,o,a,r){function s(){v.begin({data:t.data.sections.home.ss,list:t.data.core.collections.l.slice(0)})}function l(){g.Particles.addToPreload()}function c(e){r.extend(g,e),f=g.$el,h=g.layout.overlaysRegion.$el}function d(){g.Content.start({region:g.layout.contentRegion,mode:w}),"standard"===w?(a(".standard-scene",g.layout.$el).show(),g.Scene.start({settings:g.data.ss,region:g.layout.sceneRegion}),v.registerModules({scene:g.Scene,particles:g.Particles})):g.Particles.start({mode:w,data:g.data.cn.pr,region:g.layout.particlesRegion})}function u(){m=t.request("ui:controller:create",{controller:"WipeoutController",options:{$el:a(".app-wipeout",f)}})}function p(){m.fadeOut({time:.5})}var f,h,v,m,g=e,w={};g.activate=function(){g.status.active=!0,m.start({delay:.2,onComplete:p}),g.Content.activate(),"standard"===w?(g.Scene.activate(),v.activate()):g.Particles.activate()},g.deactivate=function(e){g.status.active=!1,g.Content.deactivate(),g.Particles.deactivate(),m.fadeIn({time:.5,onComplete:function(){a("html, body").animate({scrollTop:1},1),"standard"===w&&(v.deactivate(),g.Scene.deactivate()),void 0!==e&&e()}})},g.mode={},g.status={active:!1},g.addInitializer(function(e){c(e),d(),u()}),w=device.webGL?"webgl":"standard",g.mode=w,"webgl"!==w?(v=new n,t.vent.on("app:loader:core:complete",s)):t.vent.on("app:loader:core:complete",l)}})},{"./content/Content":165,"./controllers/Slideshow":167,"./particles/Particles":168,"./scene/Scene":171}],165:[function(e,t,i){t.exports=app.module("NotFound.Display.Content",{startWithParent:!1,define:function(e,t,i,n,o,a){function r(e){a.extend(h,e),p=h.region.$el,v.shift=o(".region",p),v.info=o(".info",p),v.title=o(".title",p),"webgl"===h.mode&&p.addClass("content-dark")}function s(){f=t.request("ui:controller:create",{controller:"ShifterController",options:{$selectors:o(".title, .description, .link",p),delayMultiplier:.2,startOffset:10,endOffset:60,useOpacity:!0}})}function l(){t.vent.on("resize:app",d),d(!0)}function c(){t.vent.off("resize:app",d)}function d(e){m.height=t.win.height,m.infoHeight=v.info.height(),m.titleHeight=v.title.height(),m.offset=Math.round(.5*m.height-.5*m.infoHeight),u(e)}function u(e){TweenLite.to(v.shift,e?0:.3,{y:m.offset,force3D:t.forc3D})}var p,f,h=e,v={},m={height:0};h.status={active:!1},h.updateDimensions=d,h.activate=function(){h.status.active=!0,f.show({delay:"webgl"===h.mode?1.5:.5}),l()},h.deactivate=function(){h.status.active=!1,f.hide(),c()},h.addInitializer(function(e){r(e),s()})}})},{}],166:[function(e,t,i){t.exports=e(140)},{}],167:[function(e,t,i){t.exports=e(141)},{"./Slide":166}],168:[function(e,t,i){var n=e("./controllers/ParticleSystemController");t.exports=app.module("NotFound.Display.Particles",{startWithParent:!1,define:function(e,t,i,o,a,r){function s(e){var i=t.request("utils:loader:image:load",{src:$});i.on("complete",function(t){x=t,e()}).on("error",function(){e()}),i.load()}function l(e){r.extend(b,e)}function c(){C.renderer=t.request("utils:three:renderer:create",{options:{alpha:!0,devicePixelRatio:device.retina?device.touch?1:1.1:1}}),C.renderer.setSize(t.win.width,t.win.height),C.scene=new THREE.Scene,C.container=new THREE.Object3D,C.scene.add(C.container),C.camera=new THREE.PerspectiveCamera(30,t.win.width/t.win.height,.1,1e4),C.camera.position.z=160,C.tanFOV=Math.tan(Math.PI/180*C.camera.fov/2),C.windowHeight=540,C.camera.aspect=t.win.width/t.win.height,C.camera.fov=360/Math.PI*Math.atan(C.tanFOV*(t.win.height/C.windowHeight)),C.camera.updateProjectionMatrix()}function d(){y=new n({data:b.data,container:C.container,particleMap:x})}function u(){b.region.$el.append(a(C.renderer.domElement))}function p(){b.region.$el.empty()}function f(){D.prevWidth=null,D.prevHeight=null,t.vent.on("resize:app",m),m(!0)}function h(){T.enabled=!0,T.now||w()}function v(){T.enabled=!1}function m(e){D.width=t.win.width,D.height=t.win.height,(D.width!==D.prevWidth||D.height!==D.prevHeight||!0===e||device.touch)&&(TweenLite.killDelayedCallsTo(g),TweenLite.delayedCall(e?0:T.resizeDelay,g),D.prevWidth=D.width,D.prevHeight=D.height)}function g(){C.renderer.setSize(D.width,D.height),C.camera.aspect=D.width/D.height,C.camera.fov=360/Math.PI*Math.atan(C.tanFOV*(D.height/C.windowHeight)),C.camera.updateProjectionMatrix(),y.updateDimensions(),C.renderer.render(C.scene,C.camera)}function w(){T.enabled?(T.now=!0,y.render(C.renderer,C.scene),C.renderer.render(C.scene,C.camera)):T.now=!1,T.enabled&&requestAnimationFrame(w)}var y,x,b=e,T={resizeDelay:.3,enabled:!1,now:!1},D={width:0,height:0,prevWidth:-1,prevHeight:-1},$=t.paths.img+"app/sections/home/particles/1.png",C={tanFOV:0,windowHeight:0,renderer:{},scene:{},container:{}};b.addToPreload=function(){t.cmd.execute("loader:preload:add",{fn:s})},b.activate=function(){"webgl"===b.mode&&(b.status.active=!0,u(),h(),f(),y.activate())},b.deactivate=function(e){"webgl"===b.mode?(b.status.active=!1,y.deactivate(function(){b.status.active||(v(),p(),void 0!==e&&e())})):void 0!==e&&e()},b.status={active:!1},b.addInitializer(function(e){l(e),"webgl"===b.mode&&(c(),d())})}})},{"./controllers/ParticleSystemController":170}],169:[function(e,t,i){t.exports=Marionette.Controller.extend({initialize:function(e){var t,i,n,o,a,r,s=this,l={loopTime:1e3*(5+25*Math.random()),scaleMultiplier:1},c={x:0,y:0,z:0,multiplyX:1,multiplyY:1,time:1+2*Math.random()},d={radius:10,angle:0,pos:{x:0,y:0},offset:{x:0,y:0}},u=20*Math.random()-10,p=new THREE.Vector3,f=new THREE.Vector3,h=0,v=0;s.update=function(e,l){h=e%s.loopTime/s.loopTime,r=s.tube.parameters.path.getPointAt(h),n=h*v,o=Math.floor(n),a=(o+1)%v,p.subVectors(s.tube.binormals[a],s.tube.binormals[o]),p.multiplyScalar(n-o).add(s.tube.binormals[o]),t=s.tube.parameters.path.getTangentAt(h),f.copy(p).cross(t),r.add(f.clone().multiplyScalar(u)),i=Math.sqrt(Math.pow(r.x,2)+Math.pow(r.y,2)),r.x+=s.random.x,r.y+=s.random.y,r.z=(r.z+.1*i)*s.scaleMultiplier+s.random.z,d.multiplier=1-.0065*r.z,d.pos.x=l.x*d.multiplier,d.pos.y=l.y*d.multiplier,d.a=d.pos.x-r.x,d.b=d.pos.y-r.y,d.dist=Math.sqrt(Math.pow(d.a,2)+Math.pow(d.b,2)),d.dist<d.radius&&l.over&&(d.angle=180*Math.atan2(d.a,d.b)/Math.PI,d.offset.x+=(d.radius-d.dist)*Math.cos(d.angle*Math.PI/180)*.7,d.offset.y+=(d.radius-d.dist)*Math.sin(d.angle*Math.PI/180)*.7,d.offset.x*=.4+l.currVelocity,d.offset.y*=.4+l.currVelocity),d.offset.x*=.9,d.offset.y*=.9,r.x+=d.offset.x,r.y-=d.offset.y,s.vertex.x=r.x*c.multiplyX+c.x,s.vertex.y=r.y*c.multiplyY+c.y,s.vertex.z=r.z+c.z},s.reveal=function(){TweenLite.set(c,{multiplyX:0,multiplyY:0,x:300*Math.random()-150,y:300*Math.random()-150,z:0}),TweenLite.to(c,c.time,{multiplyX:1,multiplyY:1,x:0,y:0,z:0,ease:Quad.easeOut})},s.hide=function(){TweenLite.to(c,c.time,{x:100*Math.random()-50,y:100*Math.random()-50})},_.extend(s,l,e),v=s.tube.tangents.length}})},{}],170:[function(e,t,i){var n=e("./ParticleController");t.exports=Marionette.Controller.extend({initialize:function(e){function t(e){for(var t=[],i=0,n=e.length;i<n;++i)t.push(new THREE.Vector3(e[i][0],e[i][1],e[i][2]));return t}function i(){for(var e,t,i,o,a,r=0,s=x.count;r<s;++r)a=Math.random()*Math.PI*2,t=30*Math.cos(a)*(1+.3*Math.random()),i=30*Math.sin(a)*(1+.3*Math.random()),o=200*Math.random()-100,e=new THREE.Vector3(t,i,o),x.particle.push(new n({random:r%10<2?{x:20*Math.random()-10,y:20*Math.random()-10,z:20*Math.random()-10}:{x:5*Math.random()-2.5,y:5*Math.random()-2.5,z:5*Math.random()-2.5},vertex:e,tube:y.path[r%y.count],scaleMultiplier:r%10<2?1+1.5*Math.random():1})),x.vertices.push(e)}function o(){for(var e=Math.floor(x.count/x.systems.list.length),t=0,i=x.systems.list.length;t<i;++t)start=t*e,new THREE.Geometry,a({index:t,start:t*e,count:t===x.systems.list.length-1?x.count-e*t:e})}function a(e){for(var t,i,n,o=x.systems.list[e.index],a=new THREE.Geometry,r=e.start,s=e.count+e.start;r<s;++r)a.vertices.push(x.vertices[r]);device.touch&&(o.size=1.4*o.size),(t=new THREE.Texture(v.particleMap)).needsUpdate=!0,(i=new THREE.PointCloudMaterial({color:o.color,size:o.size,map:t,depthTest:!1,transparent:!0,opacity:o.opacity})).defaultSize=o.size,i.baseSize=o.size,n=new THREE.PointCloud(a,i),x.systems.system.push(n),v.container.add(n)}function r(){var e,t,i;for(TweenLite.killDelayedCallsTo(l),e=0,t=x.systems.system.length;e<t;++e)i=x.systems.system[e].material,TweenLite.killTweensOf(i),TweenLite.set(i,{size:0});for(e=0,t=x.particle.length;e<t;++e)x.particle[e].reveal()}function s(e){var t,i,n;for(TweenLite.killDelayedCallsTo(l),t=0,i=x.systems.system.length;t<i;++t)n=x.systems.system[t].material,TweenLite.killTweensOf(n),TweenLite.to(n,.5,{delay:.03*t,size:0});for(t=0,i=x.particle.length;t<i;++t)x.particle[t].hide();TweenLite.delayedCall(.5+.03*x.systems.system.length,l,[e])}function l(e){void 0!==e&&e()}function c(){$(document).on(device.move,$.throttle(5,w[w.type])).on(device.out,w[w.type+"Out"])}function d(){$(document).off(device.move,$.throttle(5,w[w.type])).off(device.out,w[w.type+"Out"])}function u(e,t){g.over||(g.x=(e-.5*app.win.width)*(.16*(1-m.ratio+1)),g.y=-(t-.5*app.win.height)*(.16*(1-m.ratio+1)),g.time=Date.now()),g.over=!0,g.newX=(e-.5*app.win.width)*(.16*(1-m.ratio+1)),g.newY=-(t-.5*app.win.height)*(.16*(1-m.ratio+1)),g.newTime=Date.now(),g.interval=g.newTime-g.time,g.velocity=Math.sqrt(Math.pow(g.newX-g.x,2),Math.pow(g.newY-g.y,2))/g.interval*5,isNaN(g.velocity)&&(g.velocity=0),g.velocity=Math.min(g.velocity,1.2),g.time=g.newTime,g.x=(e-.5*app.win.width)*(.16*(1-m.ratio+1)),g.y=-(t-.5*app.win.height)*(.16*(1-m.ratio+1))}function p(){f()}function f(){var e;m.ratio=1.2*Math.min(app.win.width/m.base.width,app.win.height/m.base.height),m.ratio=Math.max(.2,Math.min(1,m.ratio)),x.sizeMultiplier=Math.max(m.particleBase.width/app.win.width,m.particleBase.height/app.win.height),x.sizeMultiplier=Math.max(1,x.sizeMultiplier*(.8*m.ratio)),v.container.scale.set(m.ratio,m.ratio,m.ratio);for(var t=0,i=x.systems.system.length;t<i;++t)e=x.systems.system[t].material,TweenLite.to(e,.3+.2*t,{delay:.4*t,size:e.defaultSize*x.sizeMultiplier,ease:Expo.easIn})}var h,v=this,m={particleBase:{width:1400,height:1424},base:{width:1200,height:1e3}},g={over:!1,x:0,y:0,velocity:0,currVelocity:0,multiplier:1},w={type:"mouse",mouse:function(e){u(e.clientX,e.clientY)},mouseOut:function(e){g.over=!1,g.x=-9999,g.y=-9999},touch:function(e){device.mobile||(g.over=!0,u(e.originalEvent.touches[0].clientX,e.originalEvent.touches[0].clientY),e.preventDefault())},touchOut:function(e){g.over=!1,g.x=-9999,g.y=-9999}},y={list:[[[56.94,-26.47,0],[56.94,-19.5,0],[56.94,-11.25,0],[56.94,2.75,0],[56.94,15.25,0],[56.94,26.47,0],[50.46,18.79,0],[44.22,11.37,0],[36.09,1.73,0],[30.31,-5.14,0],[37.56,-5.14,0],[50.06,-5.14,0],[63.81,-5.14,0],[70.06,-5.14,0],[75,-5.14,0]],[[-20.52,0,0],[-19.72,7.65,0],[-17.79,13.72,0],[-13.15,21.11,0],[-6.98,25.87,0],[0,27.5,0],[6.97,25.87,0],[11.88,22.42,0],[16.11,17.04,0],[19.62,8.08,0],[20.52,0,0],[19.83,-7.1,0],[17.65,-14.05,0],[13.63,-20.56,0],[6.52,-26.08,0],[0,-27.5,0],[-6.37,-26.15,0],[-12.94,-21.34,0],[-18.06,-13.08,0],[-20.11,-5.54,0],[-20.52,0,0]],[[-48.37,-26.47,0],[-48.37,-19.5,0],[-48.37,-11.25,0],[-48.37,2.75,0],[-48.37,15.25,0],[-48.37,26.47,0],[-54.84,18.79,0],[-61.09,11.37,0],[-69.22,1.73,0],[-75,-5.14,0],[-67.75,-5.14,0],[-55.25,-5.14,0],[-41.5,-5.14,0],[-35.25,-5.14,0],[-30.31,-5.14,0]]],path:[]},x={spline:{},particle:[],vertices:[],count:device.touch?1200:"chrome"===device.browser?2500:2e3,systems:{list:[{color:2917559,size:2.2,opacity:.3}],system:[]}};v.status={active:!1},v.activate=function(){v.status.active=!0,r(),c(),p()},v.deactivate=function(e){v.status.active=!1,d(),s(e)},v.updateDimensions=p,v.render=function(e,t){var i,n;for(h=Date.now(),g.velocity*=.9,TweenLite.to(g,2,{currVelocity:g.velocity}),g.velocity<.001&&(g.velocity=0),i=0,n=x.systems.system.length;i<n;++i)x.systems.system[i].geometry.verticesNeedUpdate=!0;for(i=0,n=x.particle.length;i<n;++i)x.particle[i].update(h,g)},_.extend(v,e),function(){for(var e=[],t={},i=0,n=v.data.l.length;i<n;++i)t=v.data.l[i],e.push({color:t.c.toString(16),opacity:.01*Number(t.o),size:Number(t.s)});x.systems.list=e}(),w.type=device.touch?"touch":"mouse",function(){y.count=y.list.length;for(var e=0,i=y.count;e<i;++e)y.path.push(new THREE.TubeGeometry(new THREE.SplineCurve3(t(y.list[e])),70,2,6,!0))}(),i(),o()}})},{"./ParticleController":169}],171:[function(e,t,i){var n=e("./models/SlideModel"),o=e("./views/SlideView"),a=Backbone.Collection.extend({model:n}),r=Marionette.CollectionView.extend({tagName:"div",className:"slide-list",childView:o,onAddChild:function(e){this.trigger("child:added",e)}});t.exports=app.module("NotFound.Display.Scene",{startWithParent:!1,define:function(e,t,i,n,o,s){function l(e){s.extend(h,e)}function c(){v.slideCollection=new a([]),v.slideView=new r({collection:v.slideCollection,childViewEventPrefix:"view"}),h.region.show(v.slideView)}function d(){h.on("slide:create",u),v.slideView.on("child:added",p)}function u(e){v.slideCollection.add(f(e))}function p(e){v.slide.push(e)}function f(e){var t={};return t.img=e.src,t}var h=e,v={slideCollection:{},slideView:{},current:-1,slide:[]};h.Scene={},h.activate=function(){},h.deactivate=function(){},h.showSlide=function(e,t,i){v.slide[e].show(i,h.region.$el,t)},h.hideSlide=function(e,t,i){v.slide[e].hide(i,t)},h.addInitializer(function(e){l(e),c(),d()})}})},{"./models/SlideModel":172,"./views/SlideView":173}],172:[function(e,t,i){t.exports=e(146)},{}],173:[function(e,t,i){t.exports=e(147)},{"./templates/SlideTemplate.html":174}],174:[function(e,t,i){t.exports=e(148)},{}],175:[function(e,t,i){t.exports=e(149)},{}],176:[function(e,t,i){t.exports=e(97)},{}],177:[function(e,t,i){t.exports='<div class="app-content--fill"><div class="standard-scene"><div class="scene"></div><div class="overlays"><div class="gradient-top"></div><div class="gradient-bottom"></div><div class="base-overlay"></div></div></div><div class="particles"></div><div class="content"><div class="soften"></div><div class="region"><div class="offset pad-r-lr"><div class="info" role="heading"><h1 class="title"><%= t %></h1><p class="description"><%= st %></p></div><div class="link"> <a class="btn--boxstandard" href="<%= lu %>"><span><%= lt %></span><span class="l-arr"><div class="icon icon--link"></div></span></a></div></div></div></div><div class="app-wipeout"></div></div>'},{}],178:[function(e,t,i){t.exports=app.module("Settings",{startWithParent:!1,define:function(e,t,i,n,o,a){function r(){s(),l()}function s(){a.extend(t.settings,{colors:{black:"#0a0a0a",darkgray:"#414344",white:"#FFFFFF"}})}function l(){a.extend(t.settings,{dashboard:{baseColor:t.settings.colors.black},core:{baseColor:t.settings.colors.white}})}var c=e;t.settings={},t.force3D=!1,c.addInitializer(function(){r(),t.force3D="ie"!==device.browser})}})},{}],179:[function(e,t,i){e("./ViewManager"),e("./theme/Theme"),e("./bar/Bar"),e("./header/Header"),e("./footer/Footer"),e("./dashboard/Dashboard"),t.exports=app.module("UI",{startWithParent:!1,define:function(e,t,i,n,o,a){function r(){a.each(c.submodules,function(e,t){e.start()})}function s(){t.vent.on("app:ui:show",l)}function l(){o(".app-admin").show(),t.vent.trigger("app:ui:header:show"),t.vent.trigger("app:ui:footer:show"),t.vent.trigger("app:ui:bar:show")}var c=e;c.addInitializer(function(){r(),s()})}})},{"./ViewManager":180,"./bar/Bar":181,"./dashboard/Dashboard":193,"./footer/Footer":195,"./header/Header":197,"./theme/Theme":209}],180:[function(e,t,i){var n={controller:{IntroController:e("./controllers/IntroController"),ShifterController:e("./controllers/ShifterController"),WipeoutController:e("./controllers/WipeoutController"),FormFieldController:e("./controllers/FormFieldController")}},o={view:{FormView:e("./views/interface/FormView"),ControlsView:e("./views/interface/ControlsView"),ZoomBoxView:e("./views/interface/ZoomBoxView"),BannerView:e("./views/interface/BannerView")},model:{FormModel:e("./models/interface/FormModel"),ControlsModel:e("./models/interface/ControlsModel"),ZoomBoxModel:e("./models/interface/ZoomBoxModel"),BannerModel:e("./models/interface/BannerModel")}},a={view:{BoxLinkButtonView:e("./views/buttons/BoxLinkButtonView"),NavButtonView:e("./views/buttons/NavButtonView")},model:{BoxLinkButtonModel:e("./models/buttons/BoxLinkButtonModel"),NavButtonModel:e("./models/buttons/NavButtonModel")}};t.exports=app.module("UI.ViewManager",{startWithParent:!1,define:function(e,t,i,r,s,l){function c(){t.req.setHandler("ui:controller:create",d),t.req.setHandler("ui:view:create",u),t.req.setHandler("ui:button:create",p)}function d(e){if(void 0!==n.controller[e.controller])return new n.controller[e.controller](e.options);console.error("Error: UI controller does not exist:"+e.controller)}function u(e){var t;if(void 0!==o.model[e.model]&&(t=new o.model[e.model](e.modelProps),void 0===e.options&&(e.options={}),e.options.model=t),void 0!==o.view[e.view])return new o.view[e.view](e.options);console.error("Error: UI view does not exist:"+e.view)}function p(e){var i;if(void 0!==a.model[e.model]&&(i=new a.model[e.model](l.extend({},t.settings.colors,e.modelProps)),e.options.model=i),void 0!==a.view[e.view])return new a.view[e.view](e.options);console.error("Error: UI button view does not exist:"+e.view)}e.addInitializer(function(){c()})}})},{"./controllers/FormFieldController":186,"./controllers/IntroController":187,"./controllers/ShifterController":188,"./controllers/WipeoutController":189,"./models/buttons/BoxLinkButtonModel":201,"./models/buttons/NavButtonModel":202,"./models/interface/BannerModel":203,"./models/interface/ControlsModel":204,"./models/interface/FormModel":205,"./models/interface/ZoomBoxModel":206,"./views/buttons/BoxLinkButtonView":210,"./views/buttons/NavButtonView":211,"./views/interface/BannerView":215,"./views/interface/ControlsView":216,"./views/interface/FormView":217,"./views/interface/ZoomBoxView":218}],181:[function(e,t,i){e("./display/Display");var n=e("./views/templates/LayoutTemplate.html"),o=e("./models/LayoutModel"),a=e("./views/LayoutView");t.exports=app.module("UI.Bar",{startWithParent:!1,define:function(e,t,i,r,s,l){function c(){l.extend(m,{region:t.barRegion})}function d(){v=new a({template:l.template(n),model:new o}),m.region.show(v)}function u(){m.Display.start({region:m.region,$el:m.region.$el})}function p(){t.vent.on("app:ui:bar:show",f),t.vent.on("app:ui:bar:theme:set",h)}function f(){m.Display.showBar()}function h(e){m.Display.setTheme(e)}var v,m=e;m.status={active:!1},m.addInitializer(function(){c(),d(),u(),p()})}})},{"./display/Display":182,"./models/LayoutModel":183,"./views/LayoutView":184,"./views/templates/LayoutTemplate.html":185}],182:[function(e,t,i){t.exports=app.module("UI.Bar.Display",{startWithParent:!1,define:function(e,t,i,n,o,a){function r(e){a.extend(u,e)}function s(){l=o(".bars",u.$el),(c=o(".bars .bar",u.$el)).each(function(){f.bar.push(o(this))}),f.total=f.bar.length,TweenLite.set(c,{y:20,force3D:t.force3D})}var l,c,d,u=e,p=!0,f={bar:[],current:-1,total:0};u.status={active:!1},u.showBar=function(){},u.setTheme=function(e){f.current++,f.current>f.total-1&&(f.current=0),(d=f.bar[f.current]).parent().append(d),d.css({backgroundColor:e}),TweenLite.set(d,{y:20,force3D:t.force3D}),TweenLite.to(d,1,{delay:.05,y:0,ease:Back.easeOut,force3D:t.force3D}),p=!1},u.addInitializer(function(e){r(e),s(),u.$el.show()})}})},{}],183:[function(e,t,i){t.exports=Backbone.Model.extend({defaults:{}})},{}],184:[function(e,t,i){t.exports=Backbone.Marionette.ItemView.extend({className:"bars"})},{}],185:[function(e,t,i){t.exports='<div class="bar"></div><div class="bar"></div><div class="bar"></div><div class="bar"></div>'},{}],186:[function(e,t,i){t.exports=Marionette.Controller.extend({initialize:function(e){function t(){}function i(){}function n(){"honey"!==c.type&&o()}function o(){return"none"===c.type||(c[c.type]()?(a.removeClass("has-error").addClass("has-success"),!0):(a.addClass("has-error").removeClass("has-success"),!1))}var a,r=this,s={},l="",c={type:"none",honey:function(){return $("option:eq(1)",s.control).attr("selected","selected"),!0},none:function(){return!0},text:function(){return""!==s.control.val().replace(/ /g,"")},selection:function(){return s.control[0].selectedIndex>0},email:function(){return(l=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/).test(s.control.val())}};r.getData=function(){return{validated:o(),key:s.control.attr("name"),value:s.control.val()}},r.reset=function(){a.removeClass("has-error").removeClass("has-success")},function(e){_.extend(r,e)}(e),a=r.$el,s.control=$(".form-control",a),c.type=s.control.data("validation")||"none",void 0===c[c.type]&&(c.type="none"),c.errorText=s.control.data("validation-error"),s.control.on("focus",t).on("blur",i).on("change",n)}})},{}],187:[function(e,t,i){t.exports=Marionette.Controller.extend({initialize:function(e){function t(){device.touch||(app.vent.on("scroll:app",n),n())}function i(){device.touch||app.vent.off("scroll:app",n)}function n(){a=Math.min(0,Math.max(-60,Math.floor(.4*-app.win.scrollTop))),s!==a&&(TweenLite.to(r.$el,.3,{y:a,force3D:app.force3D}),s=a)}var o,a,r=this,s=null;r.show=function(){s=null,TweenLite.set(r.$el,{y:0,force3D:app.force3D}),o.each(function(e){TweenLite.killTweensOf($(this)),TweenLite.set($(this),{y:-20,force3D:app.force3D}),TweenLite.to($(this),.5+.1*e,{y:0,force3D:app.force3D})}),t()},r.hide=function(){o.each(function(e){TweenLite.killTweensOf($(this)),TweenLite.to($(this),.5+.1*e,{y:-20,force3D:app.force3D})}),i()},function(e){_.extend(r,e)}(e),o=$(">, .pos-shift",r.$el)}})},{}],188:[function(e,t,i){t.exports=Marionette.Controller.extend({initialize:function(e){var t,i=this,n={delay:0},o={},a={$selectors:$(""),startOffset:-20,endOffset:-20,animationTime:.5,useOpacity:!1,delayMultiplier:.1,easeIn:Quad.easeOut,easeOut:Quad.easeOut},r=null;i.show=function(e){e=_.extend({},n,e),r=null,t.each(function(t){TweenLite.killTweensOf($(this)),TweenLite.set($(this),_.extend({y:i.startOffset,force3D:app.force3D},i.useOpacity?{opacity:0}:{})),TweenLite.to($(this),i.animationTime+t*i.delayMultiplier,_.extend({delay:e.delay,y:0,force3D:app.force3D,ease:i.easeIn},i.useOpacity?{opacity:1}:{}))})},i.hide=function(e){e=_.extend({},o,e),t.each(function(e){TweenLite.killTweensOf($(this)),TweenLite.to($(this),i.animationTime+e*i.delayMultiplier,{y:i.endOffset,force3D:app.force3D,ease:i.easeOut})})},function(e){_.extend(i,a,e)}(e),t=i.$selectors}})},{}],189:[function(e,t,i){t.exports=Marionette.Controller.extend({initialize:function(e){function t(e){e.onComplete()}var i,n=this,o={start:{delay:0,onComplete:function(){}},fadeOut:{time:.5,onComplete:function(){}},fadeIn:{time:.5,hideOnComplete:!0,onComplete:function(){}}};n.start=function(e){e=_.extend({},o.start,e),TweenLite.killTweensOf(i),TweenLite.killDelayedCallsTo(t),i.css({visibility:"visible"}),TweenLite.set(i,{opacity:1,z:1,force3D:app.force3D}),TweenLite.delayedCall(e.delay,t,[e])},n.fadeOut=function(e){e=_.extend({},o.fadeOut,e),TweenLite.to(i,e.time,{opacity:0,force3D:app.force3D,onComplete:function(){i.css({visibility:"hidden"}),e.onComplete()}})},n.fadeIn=function(e){e=_.extend({},o.fadeIn,e),TweenLite.killDelayedCallsTo(t),TweenLite.killTweensOf(i),i.css({visibility:"visible"}),TweenLite.set(i,{opacity:0,force3D:app.force3D}),TweenLite.to(i,e.time,{opacity:1,z:1,force3D:app.force3D,onComplete:function(){e.hideOnComplete&&i.css({visibility:"hidden"}),e.onComplete()}})},function(e){_.extend(n,e)}(e),i=n.$el}})},{}],190:[function(e,t,i){t.exports=Marionette.Controller.extend({initialize:function(e){function t(){TweenLite.killTweensOf(h.$info),TweenLite.set(h.$info,{opacity:0,force3D:app.force3D}),TweenLite.to(h.$info,.3,{delay:.2,opacity:1,force3D:app.force3D}),TweenLite.set(L.shift,{y:100,force3D:app.force3D}),TweenLite.to(L.shift,.3,{delay:.1,y:0,force3D:app.force3D})}function i(){TweenLite.killTweensOf(h.$info),TweenLite.to(h.$info,.3,{opacity:0,force3D:app.force3D}),TweenLite.to(L.shift,.3,{delay:.1,y:100,force3D:app.force3D})}function n(){h.view.on("view:event:over",a).on("view:event:out",r).on("view:event:click",s),app.vent.on("resize:app",u),u(!0)}function o(){h.view.off("view:event:over",a).off("view:event:out",r).off("view:event:click",s),app.vent.off("resize:app",u)}function a(e,t){if(h.status.scrolling)return T=e,!1;e.over(t)}function r(e,t){T=null,e.out(t)}function s(e,t){if(h.status.scrolling)return!1;h.trigger("image:set",t.gid)}function l(){h.status.scrolling=!0,h.status.userScrolling=!0,clearTimeout(D.scroll)}function c(){clearTimeout(D.scroll),d(100)}function d(e){D.scroll=setTimeout(function(){h.status.scrolling=!1,null!==T&&T.over(),T=null},200)}function u(e){C.width=f.width(),p(e)}function p(e){if(g*m<C.width)return L.list.css({marginLeft:Math.round(.5*C.width-g*m*.5)+"px"}),!1;L.list.css({marginLeft:"0px"}),y=Math.round(-w*m+.5*C.width-.5*m),y=Math.max(-g*m+C.width,Math.min(0,y)),D.autoScroll=setTimeout(function(){if(null===b)return!1;b.scrollTo(y,0,!0===e?0:600,!1)},h.status.userScrolling?0:200)}var f,h=this,v={},m=80,g=0,w=0,y=0,x=null,b=null,T=null,D={scroll:null,autoScroll:null},C={width:0},L={};h.status={scrolling:!1,userScrolling:!1},h.activate=function(){t(),n(),b.start()},h.deactivate=function(){i(),o(),b.stop(),h.status.scrolling=!1,h.status.userScrolling=!1},h.populate=function(e){g=e.length,h.collection.set(e),$(L.list).css({width:g*m})},h.setImage=function(e){v.view=h.view.children.findByIndex(e),void 0!==v.view&&(null!==x&&x.deactivate(),x=v.view,h.$title.text(x.model.get("title")),x.activate(),w=e,h.status.userScrolling||u(),h.status.userScrolling=!1)},function(e){_.extend(h,e)}(e),f=h.$el,L.shift=$(".shift",f),L.list=$(".image-list",f),(b=app.request("utils:scroll:view:create",{$el:h.$scrollRegion,scrollX:!0,scrollY:!1,scrollbars:!1,interactiveScrollbars:!1,shrinkScrollbars:"scale",fadeScrollbars:!1,mouseWheelSpeed:10,specialPreventDefault:!0})).on("scrollStart",l).on("scrollEnd",c)}})},{}],191:[function(e,t,i){var n=e("./ViewerUIController");t.exports=Marionette.Controller.extend({initialize:function(e){function t(){TweenLite.set(v,{opacity:0,force3D:app.force3D}),TweenLite.to(v,.3,{opacity:1,force3D:app.force3D})}function i(){TweenLite.to(v,.5,{opacity:0,force3D:app.force3D}),a()}function o(){clearTimeout(y.loader),y.loader=setTimeout(function(){w.loader.show()},300)}function a(){clearTimeout(y.loader),w.loader.hide()}function r(){app.vent.on("resize:app",h),m.on("event:zoom:in",u).on("event:zoom:out",p).on("event:close",f),h(!0),v.swipe({swipeLeft:c,swipeRight:d}),$(document).on("keydown.controls",l)}function s(){app.vent.off("resize:app",h),m.off("event:zoom:in",u).off("event:zoom:out",p).off("event:close",f),v.swipe("destroy"),$(document).off("keydown.controls",l)}function l(e){switch(e.which){case 37:d();break;case 39:c()}}function c(){g.view.getScrollPercent()>0||g.trigger("event:next")}function d(){g.view.getScrollPercent()>0||g.trigger("event:previous")}function u(){g.view.zoomIn()}function p(){g.view.zoomOut()}function f(){g.trigger("event:close")}function h(e){}var v,m,g=this,w={},y={loader:null};g.status={active:!1},g.activate=function(){g.status.active=!0,g.view.activate(),m.activate(),t(),r()},g.deactivate=function(){g.status.active=!1,g.view.deactivate(),m.deactivate(),s(),i()},g.setImage=function(e){m.setImage(e),g.view.setImage(e.zoom,e.rot)},g.imageLoading=function(){g.status.active&&o()},g.imageDisplayed=function(){a()},function(e){_.extend(g,e)}(e),v=g.$el,w.loader=$(".image-load",v),g.view.setController(g),m=new n({$el:g.$ui,settings:g.settings})}})},{"./ViewerUIController":192}],192:[function(e,t,i){t.exports=Marionette.Controller.extend({initialize:function(e){function t(){return!!f.status.active&&(f.trigger("event:zoom:in"),!1)}function i(){return!!f.status.active&&(f.trigger("event:zoom:out"),!1)}function n(){return!!f.status.active&&(f.trigger("event:close"),!1)}function o(){return!!f.status.active&&(c(),!1)}function a(){return d(),!1}function r(){TweenLite.set(h.shifts,{opacity:0,force3D:app.force3D}),h.shifts.each(function(e){TweenLite.killTweensOf($(this)),TweenLite.to($(this),.2+.1*e,{delay:.2,opacity:1,force3D:app.force3D})})}function s(){h.shifts.each(function(e){TweenLite.killTweensOf($(this)),TweenLite.to($(this),.2+.1*e,{opacity:0,force3D:app.force3D})})}function l(){v.visited=$.totalStorage(f.settings.cookieName),null===v.visited&&(c(),$.totalStorage(f.settings.cookieName,app.version))}function c(){f.status.infoActive||(f.status.infoActive=!0,h.infoEl.show(),TweenLite.killTweensOf(h.infoBase),TweenLite.killTweensOf(h.infoContent),TweenLite.set(h.infoBase,{opacity:0}),TweenLite.set(h.infoContent,{y:100,opacity:0,force3D:app.force3D}),TweenLite.to(h.infoBase,.3,{opacity:.3,force3D:app.force3D}),TweenLite.to(h.infoContent,.3,{y:0,opacity:1,force3D:app.force3D}),app.vent.on("resize:app",u),u(!0))}function d(){f.status.infoActive&&(f.status.infoActive=!1,TweenLite.killTweensOf(h.infoBase),TweenLite.killTweensOf(h.infoContent),TweenLite.to(h.infoBase,.3,{opacity:0,force3D:app.force3D}),TweenLite.to(h.infoContent,.3,{y:100,opacity:0,force3D:app.force3D,onComplete:function(){h.infoEl.hide()}}),app.vent.off("resize:app",u))}function u(e){v.outerHeight=h.infoEl.height(),v.height=h.infoDisplay.outerHeight(!0),v.pos=Math.round(.5*v.outerHeight-.5*v.height),TweenLite.to(h.infoDisplay,!0===e?0:.2,{y:v.pos,force3D:app.force3D})}var p,f=this,h={},v={height:0,outerHeight:0};f.status={active:!1,infoActive:!1},f.activate=function(){f.status.active=!0,r(),l()},f.deactivate=function(){f.status.active=!1,s(),d()},f.setImage=function(e){h.download.attr("download",e.filename),h.download.attr("href",e.zoom)},function(e){_.extend(f,e)}(e),p=f.$el,h.shifts=$(".ctrl-shift",p),h.zoomIn=$(".zoom-in",p),h.zoomOut=$(".zoom-out",p),h.close=$(".close",p),h.help=$(".help",p),h.download=$(".download",p),h.infoEl=$(".info",p),h.infoDisplay=$(".info .info-display",p),h.infoBase=$(".info .info-base",p),h.infoContent=$(".info .info-content",p),h.infoClose=$(".close-info",p),h.zoomIn.on("click",t),h.zoomOut.on("click",i),h.close.on("click",n),h.infoClose.on("click",a),h.help.on("click",o)}})},{}],193:[function(e,t,i){e("./display/Display"),t.exports=app.module("UI.Dashboard",{startWithParent:!1,define:function(e,t,i,n,o,a){function r(){a.extend(u,{region:t.dashboardRegion,viewsRegion:t.viewsRegion})}function s(){u.Display.start({region:u.region,viewsRegion:u.viewsRegion,$el:u.region.$el})}function l(){t.vent.on("app:ui:dashboard:toggle",c),t.vent.on("router:route:changed",d)}function c(){u.Display.toggle()}function d(){u.Display.closeDashboard()}var u=e;u.status={active:!1},u.addInitializer(function(){r(),s(),l()})}})},{"./display/Display":194}],194:[function(e,t,i){t.exports=app.module("UI.Dashboard.Display",{startWithParent:!1,define:function(e,t,i,n,o,a){function r(e){a.extend(z,e),TweenLite.set(R.blur,{a:0,onUpdate:f,onComplete:f})}function s(){P.str="",P.count=device.mobile?7:device.touch?8:9;for(var e=0,t=P.count;e<t;++e)P.str+='<div class="seg"><div class="block"></div></div>';o(".base .segments",z.$el).html(o(P.str))}function l(){o(".base .segments .seg",z.$el).each(function(){R.bg.segment.push(o(this))}),k=o(".base",z.$el),R.bg.numSegments=R.bg.segment.length,M=o(".navbar",z.$el),o("li a",M).each(function(){R.navBar.option.push(o(this))})}function c(){t.vent.on("button:nav:hide",D),o("a",M).on("click",d)}function d(){return t.track("event","Dashboard","Navigate",o(this).attr("href")),u(),t.cmd.execute("router:route:set:delayed",{delay:device.touch?1.4:1.2,path:o(this).attr("href")}),!1}function u(){h()}function p(){z.status.active=!0,z.$el.show(),x(),t.vent.trigger("app:ui:dashboard:opening"),m(),w(),TweenLite.killDelayedCallsTo(b),TweenLite.killDelayedCallsTo(T),TweenLite.delayedCall(R.bg.animTime+.07*R.bg.segment.length,b),TweenLite.to(R.blur,.5,{a:5,delay:.25,onUpdate:f,onComplete:f})}function f(){}function h(){z.status.active&&(z.status.active=!1,g(),y(),t.vent.trigger("app:ui:dashboard:closing"),TweenLite.killDelayedCallsTo(b),TweenLite.killDelayedCallsTo(T),TweenLite.delayedCall(1.5,T),TweenLite.to(R.blur,.5,{a:0,onUpdate:f,onComplete:f}))}function v(){a.each(R.bg.segment,function(e){TweenLite.killTweensOf(o(".block",e)),TweenLite.set(o(".block",e),{y:"-100%",rotationY:90,force3D:t.force3D})})}function m(){v(),a.each(R.bg.segment,function(e,i){TweenLite.killTweensOf(o(".block",e)),TweenLite.to(o(".block",e),R.bg.animTime+.05*i,{delay:.2,y:"0%",rotationY:0,force3D:t.force3D})})}function g(){a.each(R.bg.segment,function(e,i){TweenLite.killTweensOf(o(".block",e)),TweenLite.to(o(".block",e),R.bg.animTime+.025*i,{delay:.8,y:"-100%",rotationY:90,force3D:t.force3D})})}function w(){a.each(R.navBar.option,function(e,i){TweenLite.set(e,{y:100,opacity:0,force3D:t.force3D}),TweenLite.to(e,.9+.05*i,{delay:.3,y:0,opacity:1,ease:Back.easeOut,force3D:t.force3D})})}function y(){a.each(R.navBar.option,function(e,i){TweenLite.to(e,.5+.05*i,{y:-100,opacity:0,ease:Back.easeIn,force3D:t.force3D})})}function x(){t.vent.on("resize:app",$),$(!0)}function b(){t.vent.trigger("app:ui:dashboard:opened")}function T(){t.vent.trigger("app:ui:dashboard:closed"),z.$el.hide()}function D(){z.status.active&&h()}function $(e){o(window).scrollTop()<3?o(z.$el).css({height:t.win.height+"px"}):o(z.$el).css({height:device.touch?"100vh":t.win.height+"px"}),I.height=o(z.$el).height(),I.navHeight=M.outerHeight(!0),R.navBar.offset=Math.round(.5*I.height-.5*I.navHeight),R.bg.segmentHeight=Math.floor(I.height/R.bg.numSegments),R.bg.lastSegmentHeight=Math.round(I.height-R.bg.segmentHeight*(R.bg.numSegments-1)),C(),L(e)}function C(){for(var e=0,i=R.bg.numSegments;e<i;++e)TweenLite.set(R.bg.segment[e],{y:R.bg.segmentHeight*e,height:e===R.bg.numSegments-1?R.bg.lastSegmentHeight:R.bg.segmentHeight,force3D:t.force3D})}function L(e){TweenLite.to(M,e?0:1,{y:R.navBar.offset,force3D:t.force3D})}var k,M,z=e,I={navHeight:0},P={count:1,str:""},R={bg:{segment:[],animTime:.2},navBar:{offset:0,option:[]},blur:{a:0}};z.status={active:!1},z.toggle=function(){z.status.active?(t.track("event","Dashboard","Close"),h()):(t.track("event","Dashboard","Open"),p())},z.closeDashboard=u,z.addInitializer(function(e){r(e),s(),l(),c()})}})},{}],195:[function(e,t,i){e("./display/Display"),t.exports=app.module("UI.Footer",{startWithParent:!1,define:function(e,t,i,n,o,a){function r(){a.extend(u,{region:t.footerRegion})}function s(){u.Display.start({region:u.region,$el:u.region.$el})}function l(){t.vent.on("app:ui:footer:show",c),t.vent.on("app:ui:footer:hide",d)}function c(){u.status.active||(u.status.active=!0,u.Display.showFooter())}function d(){u.status.active=!1,u.Display.hideFooter()}var u=e;u.status={active:!1},u.addInitializer(function(){r(),s(),l()})}})},{"./display/Display":196}],196:[function(e,t,i){t.exports=app.module("UI.Footer.Display",{startWithParent:!1,define:function(e,t,i,n,o,a){function r(e){a.extend(l,e)}function s(){o("a",l.$el).on("click",function(){t.track("event","Footer","Link Clicked",o(this).attr("href"))})}var l=e;l.status={active:!1},l.showFooter=function(){l.status.active=!0,l.$el.show(),l.$el.css({visibility:"visible"}),TweenLite.set(l.$el,{opacity:0}),TweenLite.to(l.$el,1,{opacity:1})},l.hideFooter=function(){l.status.active=!0,l.$el.hide()},l.addInitializer(function(e){r(e),TweenLite.set(l.$el,{opacity:0}),s()})}})},{}],197:[function(e,t,i){e("./display/Display"),t.exports=app.module("UI.Header",{startWithParent:!1,define:function(e,t,i,n,o,a){function r(){a.extend(d,{region:t.headerRegion,navBoxRegion:t.navBoxRegion})}function s(){d.Display.start({region:d.region,navBoxRegion:d.navBoxRegion,$fades:o(".fades",d.region.$el),$scrollFades:o(".scroll-fades",d.region.$el),$logo:o(".logo",d.region.$el),$menu:o(".menu",d.region.$el),$navbar:o(".menu .navbar",d.region.$el),$strap:o(".strap",d.region.$el),$el:d.region.$el})}function l(){t.vent.on("app:ui:header:show",c)}function c(){d.status.active||(d.status.active=!0,d.Display.showHeader())}var d=e;d.status={active:!1},d.addInitializer(function(){r(),s(),l()})}})},{"./display/Display":198}],198:[function(e,t,i){var n=e("./controllers/Logo"),o=e("./controllers/Fades");t.exports=app.module("UI.Header.Display",{startWithParent:!1,define:function(e,t,i,a,r,s){function l(e){s.extend(C,e)}function c(){TweenLite.set(C.$el,{opacity:0,force3D:t.force3D}),TweenLite.set(C.$navbar,{z:1,force3D:t.force3D})}function d(){D=new o({$el:C.$fades}),scrollFades=new o({$el:C.$scrollFades}),T=new n({$el:C.$logo}),$=t.request("ui:button:create",{view:"NavButtonView",model:"NavButtonModel",options:{}}),C.navBoxRegion.show($)}function u(){t.vent.on("resize:app",f)}function p(){t.vent.on("scroll:app",h)}function f(){L.scrollMax=-parseInt(C.$menu.css("padding-top"),10),C.status.reducedMenu=t.win.width<=L.reducedWidth,h(!0),y()}function h(e){L.scrollPos=t.win.scrollTop,v(e)}function v(e){L.offset=Math.max(L.scrollMax,-L.scrollPos),L.offset===L.lastOffset&&!0!==e||(TweenLite.to(L,.3,{scrollPercentage:Math.max(0,L.offset/L.scrollMax),onUpdate:m,onComplete:m}),L.lastOffset=L.offset)}function m(){L.scrollOffset=0===L.scrollPercentage?0:L.scrollPercentage*L.scrollMax,TweenLite.set(C.$el,{y:L.scrollOffset.toFixed(2),force3D:t.force3D}),L.targetOpacity=(1-1*L.scrollPercentage).toFixed(device.touch?1:2),L.targetOpacity!==L.prevOpacity&&TweenLite.set(C.$navbar,{opacity:L.targetOpacity,force3D:t.force3D}),1!==L.scrollPercentage||C.status.menuCollapsed||g(),L.scrollPercentage<1&&C.status.menuCollapsed&&w(),L.prevOpacity=L.targetOpacity}function g(){C.status.menuCollapsed=!0,y(),C.$navbar.css({visibility:"hidden"})}function w(){C.status.menuCollapsed=!1,y(),C.$navbar.css({visibility:"visible"})}function y(){C.status.menuCollapsed||C.status.reducedMenu?x():C.status.menuCollapsed||C.status.reducedMenu||b()}function x(){C.status.navButtonShown||(TweenLite.to(C.$strap,.3,{x:-50,force3D:t.force3D}),t.vent.trigger("button:nav:show"),C.status.navButtonShown=!0)}function b(){C.status.navButtonShown&&(TweenLite.to(C.$strap,.3,{x:0,force3D:t.force3D}),t.vent.trigger("button:nav:hide"),C.status.navButtonShown=!1)}var T,D,$,C=e,L={deepScrollMax:-50,deepScrollOffset:-10,reducedWidth:990,scrollPos:0,scrollPercentage:0,deepScrollPercentage:0};C.status={active:!1,menuCollapsed:!1,navButtonShown:!1,reducedMenu:!1,mobileMenu:!1},C.showHeader=function(){C.status.active=!0,C.$el.css({visibility:"visible"}),TweenLite.to(C.$el,1,{opacity:1,force3D:t.force3D}),f(),h()},C.addInitializer(function(e){l(e),c(),d(),u(),p()})}})},{"./controllers/Fades":199,"./controllers/Logo":200}],199:[function(e,t,i){t.exports=Marionette.Controller.extend({initialize:function(e){function t(e,t){"light"===e?i(t):n(t,"darkSoft"===e)}function i(e,t){e||(TweenLite.to(o,.2,{y:t?"-100%":"0%",force3D:app.force3D}),TweenLite.to(a,.2,{y:"-100%",force3D:app.force3D}))}function n(e,t){!0!==e&&TweenLite.to(a,.2,{y:t?"-100%":"0%",force3D:app.force3D}),TweenLite.to(o,.2,{y:"-100%",force3D:app.force3D})}var o,a,r=this;(function(e){_.extend(r,e),o=$(".fade--light",r.$el),a=$(".fade--dark",r.$el),o.css({visibility:"visible"}),a.css({visibility:"visible"}),TweenLite.set(o,{y:"-100%",force3D:app.force3D}),TweenLite.set(a,{y:"-100%",force3D:app.force3D})})(e),app.vent.on("app:ui:theme:changed",t)}})},{}],200:[function(e,t,i){t.exports=Marionette.Controller.extend({initialize:function(e){function t(){app.track("event","Header","Logo Home","clicked")}function i(e){"light"===e?n():o()}function n(){device.inlineSVG?TweenLite.to($(".svg path, .svg polygon",a.$el),.3,{fill:app.settings.colors.white}):($(".logo-light",a.$el).show(),$(".logo-dark",a.$el).hide())}function o(){device.inlineSVG?TweenLite.to($(".svg path, .svg polygon",a.$el),.3,{fill:app.settings.colors.black}):($(".logo-light",a.$el).hide(),$(".logo-dark",a.$el).show())}var a=this;(function(e){_.extend(a,e)})(e),device.inlineSVG?($(".svg",a.$el).show(),$(".img",a.$el).hide()):($(".img",a.$el).show(),$(".svg",a.$el).hide()),app.vent.on("app:ui:theme:changed",i),a.$el.on("click",t)}})},{}],201:[function(e,t,i){t.exports=Backbone.Model.extend({defaults:{t:"Missing title",animTime:1,hoverTime:.4,icon:"arrow",preventDefault:!1}})},{}],202:[function(e,t,i){t.exports=Backbone.Model.extend({defaults:{preventDefault:!0,titleClosed:"Open navigation menu.",titleOpened:"Close navigation menu."}})},{}],203:[function(e,t,i){t.exports=Backbone.Model.extend({defaults:{img:[],t:""}})},{}],204:[function(e,t,i){t.exports=Backbone.Model.extend({defaults:{preventDefault:!1,back:"Back",backURL:"/",quickJumpTitle:"Quick Jump Menu"}})},{}],205:[function(e,t,i){t.exports=Backbone.Model.extend({defaults:{f:"",err:"",submitPath:"/",tokenPath:"/"}})},{}],206:[function(e,t,i){t.exports=Backbone.Model.extend({defaults:{t:"",c:"",b:"OK",hardFit:!1}})},{}],207:[function(e,t,i){t.exports=Backbone.Model.extend({defaults:{src:""}})},{}],208:[function(e,t,i){t.exports=Backbone.Model.extend({defaults:{opacity:.6}})},{}],209:[function(e,t,i){t.exports=app.module("UI.Theme",{startWithParent:!1,define:function(e,t,i,n,o,a){function r(){t.vent.on("app:ui:theme:set",s).on("app:ui:dashboard:opening",c).on("app:ui:dashboard:closing",d)}function s(e,i,n){e=void 0!==f[e]?e:f.defaultTheme,v=e,h||("light"===e?o("body").addClass("ui--light"):o("body").removeClass("ui--light"),t.vent.trigger("app:ui:theme:changed",e,n))}function l(e){"light"===(e=void 0!==f[e]?e:f.defaultTheme)?o("body").addClass("ui--light"):o("body").removeClass("ui--light"),t.vent.trigger("app:ui:theme:changed",e,!0)}function c(){h=!0,TweenLite.killDelayedCallsTo(u),l("dark",!0)}function d(){h=!1,TweenLite.killDelayedCallsTo(u),TweenLite.delayedCall(.8,u)}function u(){s(v)}var p=e,f={light:"light",dark:"dark",darkSoft:"darkSoft",defaultTheme:"dark"},h=!1,v=f.defaultTheme;p.addInitializer(function(){r()})}})},{}],210:[function(e,t,i){var n=e("./templates/BoxLinkButtonTemplate.html"),o=e("./extends/ButtonController");t.exports=o.extend({tagName:"a",className:"btn--boxlink",template:_.template(n),attributes:{role:"button",href:"#",title:""},onRender:function(){function e(){c.hover=!0,c.active&&TweenLite.to($boxShift,l.hoverTime,{y:"-100%",force3D:!0,ease:Quad.easeOut})}function t(){c.hover=!1,c.active&&TweenLite.to($boxShift,l.hoverTime,{y:"0%",force3D:!0,ease:Quad.easeOut})}function i(e){if(!c.active)return!1}function n(e){s.$el.css({visibility:"hidden"}),void 0!==e&&e()}function o(t){c.active=!0,c.hover&&e(),void 0!==t&&t()}var a,r,s=this,l={animTime:.3,hoverTime:1},c={active:!1,hover:!1};s.hide=function(e,t){c.active=!1,TweenLite.killTweensOf(a),TweenLite.killTweensOf(r),TweenLite.killTweensOf($boxShift),TweenLite.to(a,t?0:.3,{delay:.4,x:"100%",force3D:app.force3D}),TweenLite.to(r,t?0:.3,{delay:.4,x:"-100%",force3D:app.force3D}),TweenLite.to($boxShift,t?0:.3,{y:"100%",force3D:app.force3D}),TweenLite.killDelayedCallsTo(o),TweenLite.killDelayedCallsTo(n),TweenLite.delayedCall(t?0:.7,n,[e])},s.show=function(e,t){c.hover=!1,c.active=!1,s.$el.css({visibility:"visible"}),TweenLite.killTweensOf(a),TweenLite.killTweensOf(r),TweenLite.killTweensOf($boxShift),TweenLite.to(a,e?0:l.animTime,{x:"50%",force3D:app.force3D}),TweenLite.to(r,e?0:l.animTime,{x:"-50%",force3D:app.force3D}),TweenLite.to($boxShift,e?0:l.animTime,{delay:.4,y:"0%",force3D:app.force3D}),TweenLite.killDelayedCallsTo(o),TweenLite.killDelayedCallsTo(n),TweenLite.delayedCall(e?0:l.animTime+.4,o,[t])},l.animTime=s.model.get("animTime"),l.hoverTime=s.model.get("hoverTime")*(device.touch?.3:.4),$boxShift=$(".box-shift",s.$el),a=$(".box-border .block-l .border",s.$el),r=$(".box-border .block-r .border",s.$el),s.$el.css({visibility:"hidden"}),s.$el.attr("href",s.model.get("u")).addClass("set"),TweenLite.set($boxShift,{y:"100%"}),TweenLite.set(a,{x:"100%"}),TweenLite.set(r,{x:"-100%"}),new s.ButtonController({$el:s.$el,model:s.model}).on("event:over",e).on("event:out",t).on("event:click",i)}})},{"./extends/ButtonController":212,"./templates/BoxLinkButtonTemplate.html":213}],211:[function(e,t,i){var n=e("./templates/NavButtonTemplate.html"),o=e("./extends/ButtonController");t.exports=o.extend({tagName:"a",className:"btn--nav btn--viewmenu",template:_.template(n),attributes:{role:"button",href:"#menu",title:"Open/close the navigation menu."},onRender:function(){function e(){m.locked=!0,m.hover=!1,c()}function t(){m.current="active",m.locked=!1,c()}function i(){m.locked=!0,m.hover=!1,c()}function n(){if("closed"===m.current)return p.$el.css({visibility:"hidden"}),void(m.locked=!1);m.current="inactive",m.locked=!1,c()}function o(){m.current="closed",c(!0)}function a(){m.locked=!1,o(),m.current="inactive",p.$el.css({visibility:"visible"}),c()}function r(){m.current="closed",m.locked=!0,c(!1,function(){p.$el.css({visibility:"hidden"})})}function s(){m.hover=!0,c()}function l(){m.locked||(m.hover=!1,c())}function c(e,t){_.each(g[m.current+(m.hover?"Hover":"")],function(t,i){TweenLite.to(t.$el,e?0:h.animTime,_.extend({},h.defaultLineTransforms,t.pos,{force3D:app.force3D}))}),clearTimeout(f.state),f.state=setTimeout(function(){void 0!==t&&t()},1e3*(e?0:h.animTime))}function d(){m.locked||app.vent.trigger("app:ui:dashboard:toggle")}var u,p=this,f={},h={width:24,height:17,defaultLineTransforms:{x:0,y:0,rotation:0,opacity:1,rotationX:0,rotationY:0},animTime:(device.touch,.3),lineHeight:3},v={},m={locked:!1,current:"closed",hover:!1},g={closed:[],closedHover:[],inactive:[],inactiveHover:[],active:[],activeHover:[]};v[0]=$(".a",p.$el),v[1]=$(".b",p.$el),v[2]=$(".c",p.$el),u=new p.ButtonController({$el:p.$el,model:p.model}),g.closed.push({$el:v[0],pos:{x:2*h.width}}),g.closed.push({$el:v[1],pos:{x:3*h.width,y:Math.round(.5*h.height-.5*h.lineHeight)}}),g.closed.push({$el:v[2],pos:{x:4*h.width,y:h.height-h.lineHeight}}),g.closedHover.push({$el:v[0],pos:{x:2*h.width}}),g.closedHover.push({$el:v[1],pos:{x:2.5*h.width,y:Math.round(.5*h.height-.5*h.lineHeight)}}),g.closedHover.push({$el:v[2],pos:{x:3*h.width,y:h.height-h.lineHeight}}),g.inactive.push({$el:v[0],pos:{x:0}}),g.inactive.push({$el:v[1],pos:{x:0,y:Math.round(.5*h.height-.5*h.lineHeight)}}),g.inactive.push({$el:v[2],pos:{x:0,y:h.height-h.lineHeight}}),g.inactiveHover.push({$el:v[0],pos:{x:0,y:-h.lineHeight}}),g.inactiveHover.push({$el:v[1],pos:{x:0,y:Math.round(.5*h.height-.5*h.lineHeight)}}),g.inactiveHover.push({$el:v[2],pos:{x:0,y:h.height}}),g.active.push({$el:v[0],pos:{x:0,y:Math.round(.5*h.height-.5*h.lineHeight),rotation:45}}),g.active.push({$el:v[1],pos:{x:0,y:Math.round(.5*h.height-.5*h.lineHeight),rotationY:-90}}),g.active.push({$el:v[2],pos:{x:0,y:Math.round(.5*h.height-.5*h.lineHeight),rotation:-45}}),g.activeHover.push({$el:v[0],pos:{x:0,y:Math.round(.5*h.height-.5*h.lineHeight),rotation:-45}}),g.activeHover.push({$el:v[1],pos:{x:0,y:Math.round(.5*h.height-.5*h.lineHeight),rotationY:-90}}),g.activeHover.push({$el:v[2],pos:{x:0,y:Math.round(.5*h.height-.5*h.lineHeight),rotation:-135}}),u.on("event:over",s).on("event:out",l).on("event:click",d),app.vent.on("button:nav:show",a).on("button:nav:hide",r).on("app:ui:dashboard:opening",e).on("app:ui:dashboard:opened",t).on("app:ui:dashboard:closing",i).on("app:ui:dashboard:closed",n),c(!0)}})},{"./extends/ButtonController":212,"./templates/NavButtonTemplate.html":214}],212:[function(e,t,i){t.exports=Backbone.Marionette.ItemView.extend({ButtonController:Backbone.Marionette.Controller.extend({initialize:function(e){function t(e){o.trigger("event:over",e)}function i(e){o.trigger("event:out",e)}function n(e){o.trigger("event:click",e),o.model.get("preventDefault")&&e.preventDefault()}var o=this;_.extend(o,e),o.$el.on(device.over,t).on(device.out,i).on("click",n)}})})},{}],213:[function(e,t,i){t.exports='<div class="box-content"><div class="box-border"><div class="block block-l"><div class="border"></div></div><div class="block block-r"><div class="border"></div></div></div><div class="box-size"><%= t %></div><div class="box-display"><div class="box-shift"><div class="box-state state-default"><%= t %></div><div class="box-state state-hover"><div class="hover-bg"></div><%= t %></div></div></div></div>'},{}],214:[function(e,t,i){t.exports='<ul class="burger"><li class="a"></li><li class="b"></li><li class="c"></li></ul>'},{}],215:[function(e,t,i){var n=e("./templates/BannerTemplate.html"),o=e("../../models/interface/banner/BannerImageModel"),a=e("./banner/BannerImageView"),r=Backbone.Collection.extend({model:o});t.exports=Backbone.Marionette.CompositeView.extend({className:"app-banner",attributes:{role:"banner"},template:_.template(n),childView:a,childViewContainer:".bn-images",initialize:function(e){var t,i=this,n=[],o={};o.screenWidth=screen.width,o.screenHeight=screen.height,o.screenWidth>1e3?o.imageSize="l":o.screenWidth>=550?o.imageSize="m":o.imageSize="s",function(){for(var e=0,a=(t=i.model.get("img")).length;e<a;++e)n.push({src:t[e].dir+t[e][o.imageSize]})}(),i.collection=new r(n)},onRender:function(){function e(){app.vent.on("resize:app",h),"mac"===device.os&&app.vent.on("scroll:app",m),h(),device.os}function t(){if(C.numLoaded!==C.list.length){T.list=[];for(var e=C.numLoaded,t=C.list.length;e<t;++e)T.list.push({fn:n,data:{index:e}});T.queue=app.request("utils:queue:create",{queue:T.queue,list:T.list,sync:!0}),T.queue.on("task:complete:callback",a),T.queue.start()}}function i(){C.numLoaded!==C.list.length&&null!==T.queue&&T.queue.stop()}function n(e,t){var i;(i=app.request("utils:queue:create",{queue:i,list:[{fn:o,data:{index:t.index}}],sync:!1})).on("complete",function(){C.list[t.index].loaded=!0,C.numLoaded++,e(t.index)}),i.start()}function o(e,t){var i=app.request("utils:loader:image:load",{src:C.list[t.index].src});i.on("complete",function(t){e()}).on("error",function(){C.list[t.index].error=!0,e()}),i.load()}function a(e){C.list[e].error||C.list[e].created||(C.list[e].created=!0,C.list[e].view.applyImage(),C.slide.push(C.list[e].view),C.total++,!C.started&&w.status.active&&r())}function r(){C.total&&(l(C.current,!0),C.started=!0)}function s(e){if(!C.total)return!1;C.started=!1,TweenLite.killDelayedCallsTo(d),C.slide[C.current].hide(function(){w.status.active||void 0!==e&&e()},!0)}function l(e,t){e>C.total-1&&(e=0),C.current=e,C.slide[e].show(t),TweenLite.killDelayedCallsTo(d),TweenLite.delayedCall(Number(D.settings.tm),d)}function c(e,t){C.slide[e].hide(t)}function d(){1!==C.list.length&&c(C.current,function(){l(C.current+1)})}function u(){TweenLite.set(y.titleShift,{y:20,force3D:app.force3D}),TweenLite.to(y.titleShift,1,{y:0,force3D:app.force3D})}function p(){TweenLite.to(y.titleShift,1,{y:20,force3D:app.force3D})}function f(){app.vent.off("resize:app",h).off("scroll:app",m),x.targetPos=-1,x.prevPos=null}function h(){b.width=g.width(),b.titleHeight=y.title.outerHeight(!0),b.offsetTop=g.offset().top,b.height=Math.round(Math.max(Math.max(b.titleHeight,150),Math.min(Math.min(.5*b.width,600),.42*(app.win.height-150)))),x.max=Math.round(1.6*b.height-b.height),g.height(b.height),v()}function v(){TweenLite.set(y.title,{y:Math.round(.5*b.height-.5*b.titleHeight),force3D:app.force3D})}function m(){}var g,w=this,y={},x={pos:0,max:0,percent:0,targetPos:-1,prevPos:null},b={width:0,height:0},T={data:{},queue:null,list:[]},D={settings:{tm:w.model.get("tm")}},C={list:[],slide:[],current:0,total:0,numLoaded:0,started:!1};w.status={active:!1},w.activate=function(){w.status.active||(w.status.active=!0,e(),u(),i(),t(),r())},w.deactivate=function(){w.status.active=!1,f(),i(),s(),p()},g=w.$el,y.images=$(".bn-images",g),y.title=$(".bn-title",g),y.titleScroll=$(".title-scroll",g),y.titleShift=$(".title-shift",g),y.title.css({top:"0"}),w.children.each(function(e){C.list.push({view:e,src:e.model.get("src")})}),device.touch||t()}})},{"../../models/interface/banner/BannerImageModel":207,"./banner/BannerImageView":219,"./templates/BannerTemplate.html":220}],216:[function(e,t,i){var n=e("./templates/ControlsTemplate.html"),o=e("./templates/ControlsListItemTemplate.html");t.exports=Backbone.Marionette.ItemView.extend({className:"app-base-controls",template:_.template(n),initialize:function(e){_.extend(this,e)},onRender:function(){function e(){TweenLite.to(C.prevArrow,.2,{x:-3,force3D:app.force3D})}function t(){TweenLite.to(C.prevArrow,.2,{x:0,force3D:app.force3D})}function i(){c()}function n(){TweenLite.to(C.nextArrow,.2,{x:3,force3D:app.force3D})}function a(){TweenLite.to(C.nextArrow,.2,{x:0,force3D:app.force3D})}function r(){c()}function s(){return P.active?(app.track("event","Controls","Quick Jump Menu Closed",Backbone.history.fragment),c()):(app.track("event","Controls","Quick Jump Menu Opened",Backbone.history.fragment),l()),!1}function l(){D.status.active&&(P.active=!0,C.more.addClass("state-active"),P.$el.show(),w(),TweenLite.killTweensOf(P.$display),TweenLite.set(P.$display,{y:P.maxHeight+100,force3D:app.force3D}),TweenLite.to(P.$display,.5,{y:0,force3D:app.force3D}),P.scrollView.refresh(),P.scrollView.scrollTo(0,0,0,!1))}function c(){P.active=!1,C.more.removeClass("state-active"),TweenLite.killTweensOf(P.$display),TweenLite.to(P.$display,.5,{y:P.maxHeight+100,force3D:app.force3D,onComplete:function(){P.$el.hide()}})}function d(e,t){TweenLite.to(C.hideShow,e?0:.5,{delay:t||0,y:0,opacity:1,force3D:app.force3D})}function u(e){TweenLite.killTweensOf(C.hideShow),TweenLite.to(C.hideShow,e?0:.5,{y:50,opacity:0,force3D:app.force3D})}function p(){app.vent.on("scroll:app",g).on("resize:app",w),app.vent.trigger("scroll:trigger"),$(document).on("keydown.controls",h),w()}function f(){app.vent.off("scroll:app",g).off("resize:app",w),$(document).off("keydown.controls",h)}function h(e){if(k.enabled)switch(e.which){case 37:v();break;case 39:m()}}function v(){C.prev.trigger("click")}function m(){C.next.trigger("click")}function g(){D.status.active&&(L=app.win.width<591||app.win.height<=700?30:40,app.win.height<=600&&(L=20),z.displayPosition=T.offset().top,z.offset=L,z.bottomOffset=z.displayPosition-app.win.height-app.win.scrollTop+(app.win.width>=400?L+42:0),TweenLite.set(C.box,{y:-z.offset,force3D:app.force3D}),device.touch?z.bottomOffset<=0&&T.parent().parent().outerHeight(!0)!==app.win.height?(C.region.css({position:"relative"}),TweenLite.set(C.box,{y:0,force3D:app.force3D})):C.region.css({position:"fixed"}):z.bottomOffset<=0?(C.region.css({position:"relative"}),TweenLite.set(C.box,{y:0,force3D:app.force3D})):C.region.css({position:"fixed"}))}function w(){M.reduced=app.win.width<711,x(!1),g(),y()}function y(){P.$scrollEl.height(Math.min(C.pageList.height(),Math.max(100,Math.min(P.maxHeight,app.win.height-300)))),P.scrollView.refresh()}function x(e){(M.reduced!==M.current||e)&&(C.quickJumpTitle.html(D.model.get("quickJumpTitle")),M.reduced?(C.box.addClass("reduced-box"),C.prevTitle.text("Prev"),C.nextTitle.text("Next"),C.back.text("Back")):(C.box.removeClass("reduced-box"),C.prevTitle.text(D.model.get("previousTitle")),C.nextTitle.text(D.model.get("nextTitle")),C.back.text(D.model.get("back"))),e&&(C.prev.attr("href",D.model.get("previousURL")),C.next.attr("href",D.model.get("nextURL")),C.back.attr("href",D.model.get("backURL"))),M.current=M.reduced,b())}function b(){var e=D.model.get("list"),t="";if(void 0!==e){for(var i=0,n=e.length;i<n;++i)t+=_.template(o)({title:e[i].title,url:e[i].url,active:e[i].active?"current":"",border:i<n-1?"bd-bottom":""});C.pageList.html(t),void 0!==P.scrollView&&P.scrollView.refresh()}}var T,D=this,C={},L=100,k={enabled:!0},M={reduced:!1,current:"none"},z={offset:0,previous:null},I={nextTitle:"",nextURL:"#",previousTitle:"",previousURL:"#"},P={active:!1,maxHeight:200,scrollView:{}};D.status={active:!1},D.activate=function(e){M.current="none",z.previous=-1,k.enabled=!0,D.status.active||(D.status.active=!0,p(),T.show(),g(),u(!0),e?u(!0):d(!1,.3),P.scrollView.start())},D.deactivate=function(){D.status.active&&(D.status.active=!1,f(),c(),P.scrollView.stop(),TweenLite.killTweensOf(C.shift),TweenLite.to(C.shift,.5,{force3D:app.force3D,onComplete:function(){T.hide()}}),u())},D.show=d,D.hide=u,D.setOptions=function(e){e=_.extend({},I,e),_.extend(D.model.attributes,{},e),x(!0)},D.goPrevious=v,D.goNext=m,D.disableKeyPresses=function(){k.enabled=!1},D.enableKeyPresses=function(){k.enabled=!0},T=D.$el,C.box=$(".control-box",T),C.region=$(".control-region",T),C.shift=$(".control-display",C.box),C.hideShow=$(".control-hideshow",T),C.pageList=$(".control-pages",T),C.quickJump=$(".control-menu",T),C.quickJumpTitle=$(".control-menu-title",C.quickJump),C.prev=$(".prev",C.box),C.prevTitle=$(".title",C.prev),C.prevArrow=$(".icon-shift",C.prev),C.back=$(".back",C.box),C.next=$(".next",C.box),C.nextTitle=$(".title",C.next),C.nextArrow=$(".icon-shift",C.next),C.more=$(".more",C.box),C.closeQuickJump=$(".close-quickjump",T),P.$el=$(".control-menu",T),P.$display=$(".control-menu-display",T),P.$scrollEl=$(".control-page-listing",P.$el),P.scrollView=app.request("utils:scroll:view:create",{$el:P.$scrollEl,scrollY:!0,scrollbars:!0,interactiveScrollbars:!0,shrinkScrollbars:"scale",fadeScrollbars:!1,mouseWheel:!0,mouseWheelSpeed:10,specialPreventDefault:!0}),C.prev.on(device.over,e).on(device.out,t).on("click",i),C.next.on(device.over,n).on(device.out,a).on("click",r),C.more.on("click",s),C.closeQuickJump.on("click",function(){return app.track("event","Controls","Quick Jump Menu Closed",Backbone.history.fragment),c(),!1}),$(C.quickJump).on("click",".control-pages a",function(){app.track("event","Controls","Quick Jump Menu Navigate",Backbone.history.fragment),c()})}})},{"./templates/ControlsListItemTemplate.html":221,"./templates/ControlsTemplate.html":222}],217:[function(e,t,i){var n=e("../../controllers/FormFieldController"),o=e("./templates/FormTemplate.html");t.exports=Backbone.Marionette.ItemView.extend({className:"app-form-display",template:_.template(o),initialize:function(e){_.extend(this,e)},onRender:function(){function e(){if(!y.submitting){if(!u())return a(m.model.get("err")),!1;o(),c(),t(i)}return!1}function t(e){$.getJSON(m.model.get("tokenPath"),function(t){t.success&&void 0!==e&&e(t.token)})}function i(e){g.token.val(e),$.ajax({url:m.model.get("submitPath")+"?json=1",type:"post",dataType:"json",data:v.serialize(),success:function(e){e.success?r(e):s(e)},error:function(){s({success:!1,message:"An unknown error occured. Please try again later."})}})}function o(){g.validator.stop(!0,!0).slideUp(300)}function a(e){$(".error",g.validator).text(e),g.validator.stop(!0,!0).slideDown(200)}function r(e){app.track("event","Contact Form","Submit Success",Backbone.history.fragment),v.stop(!0,!0).slideUp(500,function(){l()})}function s(e){y.submitting=!1,a(e.message),app.track("event","Contact Form","Validation Error",Backbone.history.fragment),g.submit.text("Submit").removeClass("submitting")}function l(){g.success.show(),TweenLite.set(g.success,{opacity:0,y:20,force3D:app.force3D}),TweenLite.to(g.success,.3,{opacity:1,y:0,force3D:app.force3D}),d()}function c(){y.submitting=!0,g.submit.text("Submitting...").addClass("submitting")}function d(){f(),y.submitting=!1,g.submit.text("Submit").removeClass("submitting")}function u(){var e;y.validated=!0,y.data={};for(var t=0,i=w.field.length;t<i;++t)(e=w.field[t].getData()).validated||(y.validated=!1),y.data[e.key]=e.value;return y.validated}function p(){g.validator.stop(!0,!0).hide();for(var e=0,t=w.field.length;e<t;++e)w.field[e].reset()}function f(){v.trigger("reset");for(var e=0,t=w.field.length;e<t;++e)w.field[e].reset()}var h,v,m=this,g={},w={field:[]},y={validated:!1,data:{},submitting:!1};m.status={active:!1},m.activate=function(){m.status.active=!0,y.submitting||(p(),v.stop(!0,!0).slideDown(0),g.success.hide())},m.deactivate=function(){m.status.active=!1},h=m.$el,v=$("form",h),g.fields=$(".form-group",h),g.token=$(".form-token",h),g.submit=$("button.btn--submit",h),g.validator=$(".form-validator",h),g.success=$(".form-success",h),g.fields.each(function(){w.field.push(new n({$el:$(this)}))}),v.on("submit",e),g.submit.on("click",e),$.getJSON(m.model.get("tokenPath"),function(e){g.token.val(e.token)})}})},{"../../controllers/FormFieldController":186,"./templates/FormTemplate.html":223}],218:[function(e,t,i){var n=e("../../controllers/zoombox/ListController"),o=e("../../controllers/zoombox/ViewerController"),a=e("./templates/ZoomBoxTemplate.html"),r=e("../../models/interface/zoombox/ListImageModel"),s=e("./zoombox/ListImageView"),l=Backbone.Collection.extend({model:r}),c=Marionette.CollectionView.extend({tagName:"ul",className:"image-list",childView:s}),d=(e("./zoombox/ZoomView3D"),e("./zoombox/ZoomView2D")),u=t.exports=Backbone.Model.extend({defaults:{cookieName:"zoomBoxVisited"}});t.exports=Backbone.Marionette.LayoutView.extend({template:_.template(a),className:"app-zoombox",initialize:function(e){},onRender:function(){function e(e,t){for(var i=0,n=e.length;i<n;++i)if(e[i].group===t)return i;return 0}function t(){g.status.active&&(g.status.active=!1,g.trigger("event:close"),v(function(){g.trigger("event:closed"),m.hide()}),a())}function i(){T.controller.on("image:set",f),b.controller.on("event:close",r).on("event:next",s).on("event:previous",p)}function a(){T.controller.on("image:set",f),b.controller.off("event:close",r).off("event:next",s).off("event:previous",p)}function r(){w.length&&app.cmd.execute("router:route:set",w[y].url),t()}function s(){if(w.length){var e=y+1;e>w.length-1&&(e=0),f(e)}}function p(){if(w.length){var e=y-1;e<0&&(e=w.length-1),f(e)}}function f(e){w.length&&(y=e,T.controller.setImage(e),b.controller.setImage(w[e]))}function h(){T.controller.activate(),b.controller.activate(),TweenLite.killTweensOf(x.base),TweenLite.set(x.base,{opacity:0,force3D:app.force3D}),TweenLite.to(x.base,.3,{opacity:1,force3D:app.force3D})}function v(e){T.controller.deactivate(),b.controller.deactivate(),TweenLite.killTweensOf(x.base),TweenLite.to(x.base,.3,{delay:.5,opacity:0,force3D:app.force3D,onComplete:function(){void 0!==e&&e()}})}var m,g=this,w=[],y=0,x={},b={view:{}},T={view:{},collection:{},controller:{}};g.status={active:!1},g.activate=function(t,n){w=t,g.status.active=!0,g.$el.show(),T.controller.populate(w),h(),i(),f(e(w,n))},g.deactivate=t,m=g.$el,x.listing=$(".zoom-images",m),x.base=$(".zoom-base",m),x.imagesShift=$(".zoom-images .shift",m),g.addRegions({listingRegion:$(".images-display",m),viewerRegion:$(".image-display",m)}),T.collection=new l([]),T.view=new c({collection:T.collection,childViewEventPrefix:"view"}),g.listingRegion.show(T.view),T.controller=new n({$el:x.listing,$title:$(".zoom-info .zi-item",m),$info:$(".zoom-info",m),$scrollRegion:$(".images-display",m),collection:T.collection,view:T.view}),b.view=new d({model:new u({settings:g.model.attributes})}),g.viewerRegion.show(b.view),b.controller=new o({view:b.view,$ui:$(".zoom-controls",m),$el:b.view.$el,settings:g.model.attributes})}})},{"../../controllers/zoombox/ListController":190,"../../controllers/zoombox/ViewerController":191,"../../models/interface/zoombox/ListImageModel":208,"./templates/ZoomBoxTemplate.html":224,"./zoombox/ListImageView":229,"./zoombox/ZoomView2D":230,"./zoombox/ZoomView3D":231}],219:[function(e,t,i){var n=e("../templates/banner/BannerImageTemplate.html");t.exports=Backbone.Marionette.ItemView.extend({className:"bn-img",tagName:"li",template:_.template(n),initialize:function(e){_.extend(this,e)},onRender:function(){var e,t,i=this;i.status={active:!1},i.applyImage=function(){t.css({backgroundImage:"url("+i.model.get("src")+")"})},i.show=function(t){e.show(),e.parent().append(e),TweenLite.set(e,{opacity:0,force3D:app.force3D}),TweenLite.to(e,t?0:1,{opacity:1,force3D:app.force3D})},i.hide=function(t){TweenLite.to(e,1,{force3D:app.force3D,onComplete:function(){void 0!==t&&t()}})},e=i.$el,t=$(".img",e)}})},{"../templates/banner/BannerImageTemplate.html":225}],220:[function(e,t,i){t.exports='<div class="bn-display"><ul class="bn-images"></ul><div class="bn-overlay"></div><div class="bn-title pad-r-lr"><div class="title-scroll"><div class="title-shift"><%= t %></div></div></div></div>'},{}],221:[function(e,t,i){t.exports='<li><a class="<%= active %> <%= border %>" href="<%= url %>"><%= title %></a></li>'},{}],222:[function(e,t,i){t.exports='<div class="control-region"><div class="control-hideshow pad-r-lr"><div class="control-box"><div class="control-display"><div class="control-inner" role="menubar"><div class="box-bg"></div><a class="prev" href="#" role="button"><span class="title"></span><span class="icon-box"><div class="icon-shift"><div class="icon icon--prev"></div></div></span></a> <a class="back" href="<%= backURL %>" role="button"><%= back %></a><a class="next" href="#" role="button"><span class="title"></span><span class="icon-box"><div class="icon-shift"><div class="icon icon--next"></div></div></span></a><a class="more" href="#more" title="View full page listing" role="button"><div class="icon-shift"><div class="icon icon--more"></div></div></a></div></div><div class="control-menu" role="dialog"><div class="control-menu-outer"><div class="control-menu-display pad-m-b"><div class="control-menu-inner"><div class="control-menu-title pad-r-a"><%= quickJumpTitle %></div><div class="close-control-menu"><a href="#close" class="close-quickjump pad-r-a" title="Close" role="button"><div class="icon icon--close"></div></a></div><div class="control-page-listing"><ul class="control-pages"></ul></div></div></div></div></div></div></div></div>'},{}],223:[function(e,t,i){t.exports='<form id="dealers" action="<%= submitPath %>" method="post" class="app-form"> <input class="form-token" type="hidden" name="submit_token" value=""/> <%= f %></form><div class="form-success"><div class="success-tick"><div class="icon icon--success"></div></div><div class="success-info"><h4 class="success-message">Thank you, your inquiry has been submitted.</h4><div class="success-options"></div></div></div>'},{}],224:[function(e,t,i){t.exports='<div class="zoom-base"></div><div class="app-central zoom-inner pad-r-lr"><div class="zoom-region"><div class="zoom-display"><div class="image-display"></div><div class="zoom-info"><div class="zi-descrip"><div class="zi-title">Now viewing:</div><div class="zi-item"></div></div></div><div class="zoom-controls"><div class="regions"><div class="region-left"><a href="#zoom-in" class="zoom-in btn--boxstandard ctrl-shift" title="Zoom in" role="button"><div class="icon icon--zoom-in"></div></a><a href="#zoom-in" class="zoom-out btn--boxstandard ctrl-shift" title="Zoom out" role="button"><div class="icon icon--zoom-out"></div></a></div><div class="region-right"><a href="#close" class="close btn--boxstandard ctrl-shift" title="Close View" role="button"><div class="icon icon--close"></div></a></div><div class="region-bottom-right"><a href="#help" class="help btn--boxstandard ctrl-shift" title="Help" role="button"><div class="icon icon--question"></div></a></div><div class="region-bottom-left"><a href="#download" class="ignore-link download btn--boxstandard ctrl-shift" title="Download Image" role="button" download><div class="icon icon--download"></div></a></div></div><div class="info"><div class="info-base"></div><div class="info-display"><div class="info-content" role="dialog"><div class="pad-r-a"><h4 class="info-title"><%= t %></h4> <%= c %> <a href="#close" class="close-info btn--boxstandard" role="button"><%= b %></a></div></div></div></div></div><div class="zoom-images"><div class="shift"><div class="images-display"></div></div></div></div></div></div>'},{}],225:[function(e,t,i){t.exports='<div class="img"></div>'},{}],226:[function(e,t,i){t.exports='<a class="item"><div class="item-img"><img src="<%= thumb %>"/></div></a>'},{}],227:[function(e,t,i){t.exports='<div class="image-view"><div class="img-container"><div class="move"><div class="offset"> <img src=""/></div></div></div><div class="img-overlay"></div></div><div class="image-load"><div class="app-spinner"></div></div>'},{}],228:[function(e,t,i){t.exports='<div class="image-view"></div><div class="image-load"><div class="app-spinner"></div></div>'},{}],229:[function(e,t,i){var n=e("../templates/zoombox/ThumbnailTemplate.html");t.exports=Backbone.Marionette.ItemView.extend({template:_.template(n),tagName:"li",initialize:function(e){this.status={active:!1,over:!1}},onShow:function(){function e(e){n.trigger("event:over",e)}function t(e){n.trigger("event:out",e)}function i(){return n.trigger("event:click",n.model.attributes),!1}var n=this;n.activate=function(){n.status.active=!0,e()},n.deactivate=function(){n.status.active=!1,n.status.over||t()},n.over=function(e){e&&(n.status.over=!0),TweenLite.to($("img",n.$el),.3,{opacity:1})},n.out=function(e){e&&(n.status.over=!1),n.status.active||TweenLite.set($("img",n.$el),{opacity:n.model.get("opacity")})},TweenLite.set($("img",n.$el),{opacity:n.model.get("opacity")}),$(n.$el).on(device.over,e).on(device.out,t).on("click",i)}})},{"../templates/zoombox/ThumbnailTemplate.html":226}],230:[function(e,t,i){var n=e("./controllers/Image2D"),o=e("../templates/zoombox/ZoomView2DTemplate.html");t.exports=Backbone.Marionette.ItemView.extend({template:_.template(o),tagName:"div",className:"zoom-viewer zoom-viewer-2d",initialize:function(e){this.status={active:!1,over:!1}},onShow:function(){function e(){app.vent.on("resize:app",a),app.vent.trigger("resize:trigger"),a(!0)}function t(){app.vent.off("resize:app",a),h.prevWidth=-1,h.prevHeight=-1}function i(){f.enabled=!0,f.now||s()}function o(){f.enabled=!1}function a(e){u.status.active&&(h.width=p.view.width(),h.height=p.view.height(),(h.width!==h.prevWidth||h.height!==h.prevHeight||!0===e||device.touch)&&(r(),h.prevWidth=h.width,h.prevHeight=h.height))}function r(){u.status.active&&d.updateDimensions(h)}function s(){f.enabled?(f.now=!0,d.render()):f.now=!1,f.enabled&&requestAnimationFrame(s)}var l,c,d,u=this,p={},f={resizeDelay:.3,enabled:!1,now:!1},h={width:800,height:600,prevWidth:-1,prevHeight:-1};u.status={active:!1},u.setController=function(e){c=e,d.setController(c)},u.activate=function(){u.status.active=!0,d.activate(),i(),e()},u.deactivate=function(e){u.status.active=!1,t(),d.deactivate(function(){u.status.active||(o(),void 0!==e&&e())})},u.setImage=function(e,t){d.setImage(e,t)},u.zoomIn=function(){d.zoomIn()},u.zoomOut=function(){d.zoomOut()},u.getScrollPercent=function(){return d.getScrollPercent()},l=u.$el,p.view=$(".image-view",l),p.img=$(".image-view img",l),d=new n({settings:u.model.attributes.settings,$el:p.view,$img:p.img})}})},{"../templates/zoombox/ZoomView2DTemplate.html":227,"./controllers/Image2D":232}],231:[function(e,t,i){var n=e("./controllers/Image3D"),o=e("../templates/zoombox/ZoomView3DTemplate.html");t.exports=Backbone.Marionette.ItemView.extend({template:_.template(o),tagName:"div",className:"zoom-viewer zoom-viewer-3d",initialize:function(e){this.status={active:!1,over:!1}},onShow:function(){function e(){v.view.append($(w.renderer.domElement))}function t(){v.view.empty()}function i(){m.enabled=!0,m.now||c()}function o(){m.enabled=!1}function a(){app.vent.on("resize:app",s),app.vent.trigger("resize:trigger"),s(!0)}function r(){app.vent.off("resize:app",s),g.prevWidth=-1,g.prevHeight=-1}function s(e){h.status.active&&(g.width=v.view.width(),g.height=v.view.height(),(g.width!==g.prevWidth||g.height!==g.prevHeight||!0===e||device.touch)&&(f.s.dimensions.on(),TweenLite.killDelayedCallsTo(l),TweenLite.delayedCall(e?0:m.resizeDelay,l),g.prevWidth=g.width,g.prevHeight=g.height))}function l(){h.status.active&&(p.updateDimensions(g),w.renderer.setSize(g.width,g.height),w.camera.aspect=g.width/g.height,w.camera.fov=360/Math.PI*Math.atan(w.tanFOV*(g.height/w.windowHeight)),w.camera.updateProjectionMatrix(),w.renderer.render(w.scene,w.camera),f.s.dimensions.softOff(100))}function c(){m.enabled?(m.now=!0,p.render(w.renderer,w.scene,w.camera),f.isOn&&w.renderer.render(w.scene,w.camera)):m.now=!1,m.enabled&&requestAnimationFrame(c)}var d,u,p,f,h=this,v={},m={resizeDelay:.3,enabled:!1,now:!1},g={width:800,height:600,prevWidth:-1,prevHeight:-1},w={};h.status={active:!1},h.setController=function(e){u=e,p.setController(u)},h.activate=function(){h.status.active=!0,f.start(),p.activate(),e(),i(),a(),s(!0)},h.deactivate=function(e){h.status.active=!1,f.stop(),r(),p.deactivate(function(){h.status.active||(o(),t(),void 0!==e&&e())})},h.setImage=function(e,t){p.setImage(e,t)},h.zoomIn=function(){p.zoomIn()},h.zoomOut=function(){p.zoomOut()},h.getScrollPercent=function(){return p.getScrollPercent()},d=h.$el,v.view=$(".image-view",d),(f=app.request("utils:switch:create",{debug:!1})).createSwitch("dimensions"),f.s.dimensions.on(),w.renderer=app.request("utils:three:renderer:create",{uid:"rug-enhanced",options:{alpha:!0}}),w.renderer.setSize(g.width,g.height),w.scene=new THREE.Scene,w.container=new THREE.Object3D,w.scene.add(w.container),w.camera=new THREE.PerspectiveCamera(30,g.width/g.height,1,1e4),w.camera.position.z=746,w.camera.position.y=0,w.tanFOV=Math.tan(Math.PI/180*w.camera.fov/2),w.windowHeight=400,w.camera.aspect=g.width/g.height,w.camera.fov=360/Math.PI*Math.atan(w.tanFOV*(g.height/w.windowHeight)),w.camera.updateProjectionMatrix(),p=new n({settings:h.model.attributes.settings,container:w.container,$el:v.view,switches:f})}})},{"../templates/zoombox/ZoomView3DTemplate.html":228,"./controllers/Image3D":233}],232:[function(e,t,i){var n=e("./ImageControls");t.exports=Marionette.Controller.extend({initialize:function(e){function t(e,t){o();var n=app.request("utils:loader:image:load",{src:e,timeout:40});u.imageLoading(),n.on("complete",function(n){g[e]=n,x.currentTexture===e&&i(n,t,e)}).on("error",function(){}),n.load()}function i(e,t,i){o(function(){x.currentTexture===i&&a(e,t,i)})}function o(e){TweenLite.killTweensOf(f),TweenLite.to(f,.3,{opacity:0,force3D:app.force3D,onComplete:function(){void 0!==e&&e()}})}function a(e,t,i){r(),u.imageDisplayed(),L.shown=!0,f.attr("src",i),t?(L.dimensions.height=e.naturalWidth,L.dimensions.width=e.naturalHeight,TweenLite.set(f,{rotation:90,width:L.dimensions.height,height:L.dimensions.width,force3D:app.force3D}),TweenLite.set(L.offset,{x:Math.round(.5*-L.dimensions.height),y:Math.round(.5*-L.dimensions.width),force3D:app.force3D})):(L.dimensions.width=e.naturalWidth,L.dimensions.height=e.naturalHeight,TweenLite.set(f,{rotation:0,width:L.dimensions.width,height:L.dimensions.height,force3D:app.force3D}),TweenLite.set(L.offset,{x:Math.round(.5*-L.dimensions.width),y:Math.round(.5*-L.dimensions.height),force3D:app.force3D})),L.bounds={x1:.5*L.dimensions.width,x2:.5*-L.dimensions.width,y1:.5*L.dimensions.height,y2:.5*-L.dimensions.height},s(),TweenLite.to(f,.3,{opacity:1,force3D:app.force3D})}function r(){h.reset(),TweenLite.set(L.move,{x:0,y:0}),TweenLite.set(m.move,{x:L.move.x,y:L.move.y,force3D:app.force3D}),C.percent=0}function s(){L.shown&&(b.width=v.$el.width(),b.height=v.$el.height(),T.ratio=Math.min(.5,Math.min((b.width-(v.settings.hardFit?0:30))/L.dimensions.width,(b.height-(v.settings.hardFit?0:100))/L.dimensions.height)),c(T.ratio),L.shown&&v.status.active&&(l(),d()))}function l(){C.percent+=-w.scrollY,C.percent=Math.max(0,Math.min(v.settings.maxZoom,C.percent)),C.offsetRatio=(1-T.ratio)*(.01*C.percent),T.realRatio=T.ratio+C.offsetRatio,L.dimensions.realWidth=L.dimensions.width*T.realRatio,T.exponential=L.dimensions.width/L.dimensions.realWidth,c(T.realRatio)}function c(e){y?(L.td.width=Math.round(L.dimensions.width*e),L.td.height=Math.round(L.dimensions.height*e),L.td.offsetX=Math.round(.5*-L.td.width),L.td.offsetY=Math.round(.5*-L.td.height),TweenLite.set(f,{width:L.td.width,height:L.td.height,force3D:app.force3D}),TweenLite.set(L.offset,{x:L.td.offsetX,y:L.td.offsetY,force3D:app.force3D})):TweenLite.set(L.container,{scale:e,force3D:app.force3D})}function d(){L.bounds={x1:Math.max(0,.5*L.dimensions.width-.5*b.width*T.exponential+v.settings.padX),x2:Math.min(-(.5*L.dimensions.width-.5*b.width*T.exponential+v.settings.padX),0),y1:Math.max(0,.5*L.dimensions.height-.5*b.height*T.exponential+v.settings.padY),y2:Math.min(-(.5*L.dimensions.height-.5*b.height*T.exponential+v.settings.padY),0)},L.move.x+=w.x*(1-.005*C.percent),L.move.y-=w.y*(1-.005*C.percent),L.move.x=Math.max(L.bounds.x2,Math.min(L.bounds.x1,L.move.x)),L.move.y=Math.max(L.bounds.y2,Math.min(L.bounds.y1,L.move.y)),TweenLite.set(m.move,{x:L.move.x,y:-L.move.y,force3D:app.force3D})}var u,p,f,h,v=this,m={},g={},w={x:0,y:0,z:0,scrollY:0},y=!1,x={currentTexture:null},b={width:0,height:0},T={ratio:0,realRatio:1},D={hardFit:!1,maxZoom:100,padX:30,padY:50},C={pos:0,percent:0},L={shown:!1,dimensions:{width:600,height:500},td:{},bounds:{x1:0,x2:0,y1:0,y2:0}};v.status={active:!1},v.setController=function(e){u=e},v.setImage=function(e,n){x.currentTexture!==e&&(y&&(n=!1),x.currentTexture=e,void 0!==g[e]?i(g[e],n,e):t(e,n))},v.updateDimensions=s,v.activate=function(){v.status.active=!0,h.activate({$el:v.$el})},v.deactivate=function(e){v.status.active=!1,x.currentTexture=null,h.deactivate(),o(function(){v.status.active||void 0!==e&&e()})},v.zoomIn=function(){h.zoomIn()},v.zoomOut=function(){h.zoomOut()},v.render=function(e,t,i){v.status.active&&L.shown&&(0===(w=h.getPositions()).x&&0===w.y&&0===w.z&&0===w.scrollY||(l(),d()))},v.getScrollPercent=function(){return C.percent},function(e){_.extend(v,e),f=v.$img,v.settings=_.extend({},D,v.settings)}(e),Modernizr.csstransforms||(y=!0),p=v.$el,h=new n({multiplier:1.8}),L.container=$(".img-container",p),L.move={x:0,y:0},m.move=$(".move",p),L.offset=$(".offset",p),L.$el=f}})},{"./ImageControls":234}],233:[function(e,t,i){var n=e("./ImageControls");t.exports=Marionette.Controller.extend({initialize:function(e){function t(){h.on("event:doubletap",o)}function i(){h.off("event:doubletap",o)}function o(e){var t={x:e.x-.5*app.win.width,y:e.y-.5*v.$el.height()-v.$el.offset().top};T.percent<=50?h.zoomIn(!0,t):h.zoomOut(!0,t)}function a(e,t,i){s();var n,o=app.request("utils:loader:image:load",{src:e,timeout:40});f.imageLoading(),o.on("complete",function(o){n=new THREE.Texture(o),m[e]=n,w.currentTexture===e&&r(n,t,i)}).on("error",function(){D.textureSwitch.softOff(310)}),o.load()}function r(e,t,i){s(function(){w.currentTexture===i&&l(e,t)})}function s(e){TweenLite.killTweensOf($.material),TweenLite.to($.material,.3,{opacity:0,onComplete:function(){void 0!==e&&e()}})}function l(e,t){c(),f.imageDisplayed(),$.shown=!0,$.material.map=e,$.material.map.needsUpdate=!0,t?($.dimensions.height=e.image.naturalWidth,$.dimensions.width=e.image.naturalHeight,$.mesh.rotation.z=90*Math.PI/180,$.mesh.scale.set($.dimensions.height,$.dimensions.width,1)):($.dimensions.width=e.image.naturalWidth,$.dimensions.height=e.image.naturalHeight,$.mesh.rotation.z=0,$.mesh.scale.set($.dimensions.width,$.dimensions.height,1)),$.bounds={x1:.5*$.dimensions.width,x2:.5*-$.dimensions.width,y1:.5*$.dimensions.height,y2:.5*-$.dimensions.height},D.textureSwitch.softOff(310),d(),TweenLite.killTweensOf($.material),TweenLite.to($.material,.3,{opacity:1})}function c(){h.reset(),$.move.position.x=0,$.move.position.y=0,T.percent=0}function d(){$.shown&&(y.width=v.$el.width(),y.height=v.$el.height(),x.ratio=Math.min(.5,Math.min((y.width-(v.settings.hardFit?0:30))/$.dimensions.width,(y.height-(v.settings.hardFit?0:100))/$.dimensions.height)),$.container.scale.set(x.ratio,x.ratio,x.ratio),$.shown&&v.status.active&&(u(),p()))}function u(){T.percent+=-g.scrollY,T.percent=Math.max(0,Math.min(v.settings.maxZoom,T.percent)),T.offsetRatio=(1-x.ratio)*(.01*T.percent),x.realRatio=x.ratio+T.offsetRatio,$.dimensions.realWidth=$.dimensions.width*x.realRatio,x.exponential=$.dimensions.width/$.dimensions.realWidth,$.container.scale.set(x.realRatio,x.realRatio,x.realRatio)}function p(){$.bounds={x1:Math.max(0,.5*$.dimensions.width-.5*y.width*x.exponential+v.settings.padX),x2:Math.min(-(.5*$.dimensions.width-.5*y.width*x.exponential+v.settings.padX),0),y1:Math.max(0,.5*$.dimensions.height-.5*y.height*x.exponential+v.settings.padY),y2:Math.min(-(.5*$.dimensions.height-.5*y.height*x.exponential+v.settings.padY),0)},$.move.position.x+=g.x*(1-.005*T.percent),$.move.position.y-=g.y*(1-.005*T.percent),$.move.position.x=Math.max($.bounds.x2,Math.min($.bounds.x1,$.move.position.x)),$.move.position.y=Math.max($.bounds.y2,Math.min($.bounds.y1,$.move.position.y))}var f,h,v=this,m={},g={x:0,y:0,z:0,scrollY:0},w={currentTexture:null},y={width:0,height:0},x={ratio:0,realRatio:1},b={hardFit:!1,maxZoom:100,padX:30,padY:50},T={pos:0,percent:0},D={},$={shown:!1,container:{},geometry:{},material:{},mesh:{},texture:"",dimensions:{width:600,height:500},bounds:{x1:0,x2:0,y1:0,y2:0}};v.status={active:!1},v.setController=function(e){f=e},v.setImage=function(e,t){w.currentTexture!==e&&(D.textureSwitch.on(),w.currentTexture=e,void 0!==m[e]?r(m[e],t,e):a(e,t,e))},v.updateDimensions=d,v.activate=function(e){v.status.active=!0,h.activate({$el:v.$el}),t()},v.deactivate=function(e){v.status.active=!1,w.currentTexture=null,h.deactivate(),i(),D.controlsSwitch.off(),D.textureSwitch.off(),s(function(){v.status.active||void 0!==e&&e()})},v.render=function(e,t,i){v.status.active&&$.shown&&(0===(g=h.getPositions()).x&&0===g.y&&0===g.z&&0===g.scrollY?D.controlsSwitch.off():(D.controlsSwitch.on(),u(),p()))},v.zoomIn=function(){h.zoomIn()},v.zoomOut=function(){h.zoomOut()},v.getScrollPercent=function(){return T.percent},function(e){_.extend(v,e),v.settings=_.extend({},b,v.settings)}(e),D.textureSwitch=v.switches.createSwitch(),D.textureSwitch.off(),D.controlsSwitch=v.switches.createSwitch(),D.controlsSwitch.off(),h=new n({multiplier:1.8}),$.outerContainer=new THREE.Object3D,$.container=new THREE.Object3D,$.move=new THREE.Object3D,$.geometry=new THREE.PlaneGeometry(1,1,1,1),$.material=new THREE.MeshBasicMaterial({color:16777215,map:THREE.ImageUtils.loadTexture(app.paths.img+"app/core/placeholder.jpg"),transparent:!0}),$.mesh=new THREE.Mesh($.geometry,$.material),$.move.add($.mesh),$.container.add($.move),$.outerContainer.add($.container),v.container.add($.outerContainer)}})},{"./ImageControls":234}],234:[function(e,t,i){t.exports=Marionette.Controller.extend({initialize:function(e){function t(){T.zoomOut=!1,f.addClass("cursor-move"),f.on(device.down,r).on(device.move,$.throttle(10,s)),$(window).on(device.up,l),device.touch?f.swipe({pinchStatus:a,fingers:2,doubleTapThreshold:500}):$(f).on("mousewheel",n)}function i(){f.addClass("cursor-move"),f.off(device.down,r).off(device.move,$.throttle(10,s)),$(window).off(device.up,l),device.touch?f.swipe("destroy"):f.off("mousewheel",n)}function n(e){C.deltaY=e.deltaY*e.deltaFactor||0,C.deltaY<-C.maxSpeed&&(C.deltaY=-C.maxSpeed),C.deltaY>C.maxSpeed&&(C.deltaY=C.maxSpeed),0!==C.deltaY&&e.preventDefault(),C.decel.y+=-C.deltaY*C.offset}function o(e){h.trigger("event:doubletap",e)}function a(e,t,i,n,o,a,r){a>1&&(device.touch&&h.trigger("event:release"),T.zoomOut=!1,C.zoom=!0,C.decel.y+=("in"===i?-n:n)*C.touchOffset)}function r(e){if(device.desktop&&1!==e.which)return!1;T.now=Date.now(),I.x=I.y=I.z=0,h.trigger("event:press",e),f.addClass("cursor-grab"),m=!1,device.touch&&(T.enabled=1===e.originalEvent.touches.length,e=e.originalEvent.touches[0]),R.x=L.x,R.y=L.y,R.z=L.z,M.x=e.clientX,M.y=e.clientY,k=M,S=[],T.pos=M,T.distance=Math.sqrt(Math.pow(T.pos.x-T.lastPos.x,2)+Math.pow(T.pos.y-T.lastPos.y,2)),T.now-T.last<T.threshold&&T.enabled&&T.distance<T.distanceThreshold&&o(T.pos),T.last=Date.now(),T.lastPos=k}function s(e){m||(e.preventDefault(),h.trigger("event:move",e),device.touch&&(e=e.originalEvent.touches[0]),z.x=R.x+e.clientX-M.x,z.y=R.y+e.clientY-M.y,S.length>60&&S.splice(0,30),S.push({x:e.clientX,y:e.clientY,time:Date.now()}),c())}function l(e){f.removeClass("cursor-grab"),m=!0,S.length=0,C.zoom=!1,h.trigger("event:release",e)}function c(){v.now=Date.now(),v.positions=S,v.posLen=v.positions.length,v.last=v.positions[v.posLen-1],d(),isNaN(I.x)&&(I.x=0),isNaN(I.y)&&(I.y=0),isNaN(I.z)&&(I.z=0),isNaN(C.decel.y)&&(C.decel.y=0)}function d(){for(I.x=I.y=I.z=0,v.endPosIndex=v.posLen-1,v.startPosIndex=v.endPosIndex,v.i=v.endPosIndex;v.i--&&v.i>0&&v.positions[v.i].time>v.last.time-100;)v.startPosIndex=v.i;v.first=v.positions[v.startPosIndex],v.timeOffset=v.last.time-v.first.time,v.delta=v.timeOffset/(1e3/60),v.moved={x:v.last.x-v.first.x,y:v.last.y-v.first.y},I.x=v.moved.x/v.delta,I.y=v.moved.y/v.delta}function u(){I.x*=g,I.y*=g,I.z*=g,C.decel.y*=w,m&&(L.scrollY+=C.decel.y,L.x+=I.x,L.y+=I.y,L.z+=I.z,z.x=L.x,z.y=L.y,z.z=L.z,z.scrollY=L.scrollY),Math.abs(I.x)<.3&&(I.x=0),Math.abs(I.y)<.3&&(I.y=0),Math.abs(I.z)<.3&&(I.z=0),Math.abs(C.decel.y)<.3&&(C.decel.y=0),p()}function p(){v.multiplier=y,v.scrollMultiplier=x,P.x=I.x*v.multiplier,P.y=I.y*v.multiplier,P.z=I.z*v.multiplier,P.scrollY=C.decel.y*v.scrollMultiplier}var f,h=this,v={},m=!0,g=.83,w=.5,y=.5,x=.2,b=0,T={enabled:!0,zoomOut:!1,threshold:200,distanceThreshold:42,now:Date.now(),last:Date.now(),pos:{x:0,y:0},lastPos:{x:0,y:0}},D={locked:!1,threshold:40,axis:"none"},C={deltaY:0,maxSpeed:50,decel:{y:0},offset:.6,touchOffset:.1},L={x:0,y:0,z:0,scrollY:0},k={x:0,y:0,z:0},M={x:0,y:0,z:0},z={x:0,y:0,z:0,scrollY:0},I={x:0,y:0,z:0},P={x:0,y:0,z:0,scrollY:0},R={x:0,y:0,z:0},S=[];h.status={active:!1},h.activate=function(e){f=e.$el,h.status.active=!0,t()},h.deactivate=function(e){h.status.active=!1,i(),void 0!==e&&e()},h.getPositions=function(){return u(),P},h.zoomIn=function(e,t){TweenLite.to(C.decel,e?.4:.2,{y:e?-40:-20}),void 0!==t&&TweenLite.to(I,.14,{x:.5*-t.x,y:.5*-t.y})},h.zoomOut=function(e){TweenLite.to(C.decel,e?.4:.2,{y:e?40:20})},h.reset=function(){TweenLite.killTweensOf(C.decel),T.zoomOut=!1,I.x=I.y=I.z=0,C.decel.y=0,L.x=0,L.y=0,L.z=0,L.scrollY=0},_.extend(h,e),y=h.multiplier,x=h.scrollMultiplier||x,b=1/y,D.threshold*=y}})},{}],235:[function(e,t,i){e("./utility/Core"),e("./utility/Queues"),e("./utility/Analytics"),e("./utility/Loader"),e("./utility/Image"),e("./utility/Tilt"),e("./utility/Colors"),e("./utility/Switches"),e("./utility/SVG"),e("./utility/Popups"),e("./utility/Scroll"),e("./utility/Three"),e("./utility/Canvas"),e("./utility/Ratios"),e("./utility/Formatting"),t.exports=app.module("Utils",{startWithParent:!1,define:function(e,t,i,n,o,a){function r(){a.each(s.submodules,function(e,t){e.start()})}var s=e;s.addInitializer(function(e){r()})}})},{"./utility/Analytics":236,"./utility/Canvas":237,"./utility/Colors":238,"./utility/Core":239,"./utility/Formatting":240,"./utility/Image":241,"./utility/Loader":242,"./utility/Popups":243,"./utility/Queues":244,"./utility/Ratios":245,"./utility/SVG":246,"./utility/Scroll":247,"./utility/Switches":248,"./utility/Three":249,"./utility/Tilt":250}],236:[function(e,t,i){t.exports=app.module("Utils.Analytics",{startWithParent:!1,define:function(e,t,i,n,o,a){function r(){"undefined"==typeof ga?setTimeout(r,500):s()}function s(){u.on("page",l).on("event",c).on("social",d)}function l(e){if(void 0===e)return!1;e="/"+e,p&&console.log(a.template("ga('send', 'pageview', '<%= p %>');")({p:e})),ga("send","pageview",e)}function c(e,t,i,n){void 0===n&&(n=0),p&&console.log(a.template("ga('send', 'event', '<%= c %>', '<%= a %>', '<%= l %>', '<%= n %>');")({c:e,a:t,l:i,n:n})),ga("send","event",e,t,i,n)}function d(e,t,i){p&&console.log(a.template("ga('send', 'social', '<%= n %>', '<%= a %>', '<%= t %>');")({n:e,a:t,t:i})),ga("send","social",e,t,i)}var u=e,p=!1;t.track=function(){u.trigger.apply(u,arguments)},u.addInitializer(function(){r()})}})},{}],237:[function(e,t,i){t.exports=app.module("Utils.Canvas",{startWithParent:!1,define:function(e,t,i,n,o,a){function r(){t.req.setHandler("utils:canvas:gradient:texture:create",s)}function s(e){null===(e=a.extend({},l.gradient,e)).startX&&(e.startX=.5*e.size),null===e.startY&&(e.startY=e.size),null===e.endX&&(e.endX=.5*e.size),null===e.endY&&(e.endY=0),null===e.colors&&(e.colors=l.gradientColors);var t,i=document.createElement("canvas"),n=i.getContext("2d");i.width=e.size,i.height=e.size,n.rect(0,0,e.size,e.size),t=n.createLinearGradient(e.startX,e.startY,e.endX,e.endY);for(var o=0,r=e.colors.length;o<r;++o)t.addColorStop(e.colors[o].value,e.colors[o].color);return n.fillStyle=t,n.fill(),i}var l={gradient:{size:512,colors:null,startX:null,startY:null,endX:null,endY:null},gradientColors:[{value:0,color:"#000000"},{value:1,color:"transparent"}]};e.addInitializer(function(){r()})}})},{}],238:[function(e,t,i){t.exports=app.module("Utils.Colors",{startWithParent:!1,define:function(e,t,i,n,o,a){function r(){t.req.setHandler("utils:color:generate:random",s),t.req.setHandler("utils:colors:hex:brightness:adjust",l)}function s(){for(var e="";6!==e.length;)e=(16777215*Math.random()<<0).toString(16);return e}function l(e,t){(e=String(e).replace(/[^0-9a-f]/gi,"")).length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),t=t||0;var i,n,o="#";for(n=0;n<3;++n)i=parseInt(e.substr(2*n,2),16),o+=("00"+(i=Math.round(Math.min(Math.max(0,i+i*t),255)).toString(16))).substr(i.length);return o}e.addInitializer(function(){r()})}})},{}],239:[function(e,t,i){t.exports=app.module("Utils.Core",{startWithParent:!1,define:function(e,t,i,n,o,a){function r(){t.req.setHandler("utils:core:point:closest:get",s),t.req.setHandler("utils:core:array:shuffle",l),t.req.setHandler("utils:core:clamp",c),t.req.setHandler("utils:core:querystring:parse",d),t.req.setHandler("utils:core:querystring:get",u),t.req.setHandler("utils:core:ie:check:minimum",f)}function s(e){for(var t,i,n,o,a=999999,r=null,s=0,l=e.points.length;s<l;++s)t=e.points[s],i=e.target.x-t.x,n=e.target.y-t.y,(o=Math.sqrt(Math.pow(i,2),Math.pow(n,2)))<a&&(a=o,r=t);return r}function l(e){for(var t,i,n=e.length-1;n>0;n--)t=Math.floor(Math.random()*(n+1)),i=e[n],e[n]=e[t],e[t]=i;return e}function c(e,t,i){return Math.max(t,Math.min(i,e))}function d(){var e,t,i=location.search.substr(1),n={};if(""===i&&(i=p()),""===i||void 0===i);else if(i.search("&")>-1)for(var o=0,a=(t=i.split("&")).length;o<a;o++)n[(e=t[o].split("="))[0]]=decodeURIComponent(e[1]);else n[(e=i.split("="))[0]]=decodeURIComponent(e[1]);return n}function u(){var e=location.search.substr(1);return""===e&&(e=p()),e}function p(){var e=i.history.fragment,t="";return void 0!==e&&void 0!==(e=e.split("?"))[1]&&(t=e[1]),t}function f(e){return!("ie"===device.browser&&device.browserVersion<e)}e.addInitializer(function(){r()})}})},{}],240:[function(e,t,i){t.exports=app.module("Utils.Formatting",{startWithParent:!1,define:function(e,t,i,n,o,a){function r(){t.req.setHandler("utils:formatting:bolder",s)}function s(e,t){for(var i=0,n=(e=e.split(" ")).length;i<n;++i)0===i&&i<e.length-1&&(e[i]="<strong>"+e[i]),(i===e.length-1&&e.length>1&&i<t||i==t)&&(e[i]="</strong>"+e[i]);return e=e.join(" ")}e.addInitializer(function(){r()})}})},{}],241:[function(e,t,i){var n=e("./controllers/ResponsiveImageMap");t.exports=app.module("Utils.Image",{startWithParent:!1,define:function(e,t,i,o,a,r){function s(){t.req.setHandler("utils:image:map:reponsive:create",l),t.req.setHandler("utils:image:map:area:bounds:get",c)}function l(e){return new n(e)}function c(e){for(var t=e.attr("coords").split(","),i={x1:999,x2:0,y1:999,y2:0},n=0,o=t.length;n<o;++n)n%2==0?(i.x1=Math.min(i.x1,Number(t[n])),i.x2=Math.max(i.x2,Number(t[n]))):(i.y1=Math.min(i.y1,Number(t[n])),i.y2=Math.max(i.y2,Number(t[n])));return i.centerX=i.x1+.5*(i.x2-i.x1),i.centerY=i.y1+.5*(i.y2-i.y1),i}e.addInitializer(function(){s()})}})},{"./controllers/ResponsiveImageMap":255}],242:[function(e,t,i){var n=e("./controllers/ImagesLoader"),o=e("./controllers/ImageLoader");t.exports=app.module("Utils.Ratio",{startWithParent:!1,define:function(e,t,i,a,r,s){function l(){t.cmd.setHandler("utils:loader:image:store",c),t.req.setHandler("utils:loader:image:search",d),t.req.setHandler("utils:loader:images:load",u),t.req.setHandler("utils:loader:image:load",p)}function c(e){f[e.src]=e.image}function d(e){return void 0!==f[e]?{found:!0,image:f[e]}:{found:!1}}function u(e){return new n(e)}function p(e){return new o(e)}var f={};e.addInitializer(function(){l()})}})},{"./controllers/ImageLoader":251,"./controllers/ImagesLoader":252}],243:[function(e,t,i){t.exports=app.module("Utils.Popups",{startWithParent:!1,define:function(e,t,i,n,o,a){function r(){t.req.setHandler("utils:popup:open",s)}function s(e){if(""===(e=a.extend({},l.popup,e)).url)return!1;var t=void 0===window.screenLeft?screen.left:window.screenLeft,i=void 0===window.screenTop?screen.top:window.screenTop,n=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,o=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,r=.5*n-.5*e.width+t,s=o/3-e.height/3+i,c=window.open(e.url,e.title,a.template("scrollbars=yes, width=<%= w %>, height=<%= h %>, top=<%= t %>, left=<%= l %>")({w:e.width,h:e.height,t:s,l:r}));try{window.focus&&c.focus()}catch(e){console.warn("Popup blocked")}}var l={popup:{width:580,height:470,title:"",url:""}};e.addInitializer(function(){r()})}})},{}],244:[function(e,t,i){var n=e("./controllers/Queue");t.exports=app.module("Utils.Queue",{startWithParent:!1,define:function(e,t,i,o,a,r){function s(){t.req.setHandler("utils:queue:create",l),t.req.setHandler("utils:queue:functions:list:generate",c)}function l(e){return new n(e)}function c(e){for(var t=[],i=0,n=e.list.length;i<n;++i)"function"==typeof e.list[i][e.event]&&t.push(e.list[i][e.event].bind(e.list[i]));return t}e.addInitializer(function(){s()})}})},{"./controllers/Queue":253}],245:[function(e,t,i){var n=e("./controllers/Ratio");t.exports=app.module("Utils.Ratio",{startWithParent:!1,define:function(e,t,i,o,a,r){function s(){t.req.setHandler("utils:ratio:manager:create",l)}function l(e){return new n(e)}e.addInitializer(function(){s()})}})},{"./controllers/Ratio":254}],246:[function(e,t,i){t.exports=app.module("Utils.SVG",{startWithParent:!1,define:function(e,t,i,n,o,a){function r(){t.req.setHandler("utils:SVG:points:get",d),t.req.setHandler("utils:SVG:points:parse",s),t.req.setHandler("utils:SVG:points:poly:simplify",p),t.req.setHandler("utils:SVG:animate:explode",f),t.req.setHandler("utils:SVG:animate:morph",m)}function s(e){return a.extend({},w.parse,e),"path"===e.type?l(e):c(e)}function l(e){var t=o(a.template('<svg><path points="<%= p %>"></path></svg>')({p:e.points}));return d({$el:o("path",t),raw:!0})}function c(e){e.points=p({string:e.points,decimal:2});var t=o(a.template('<svg><polygon points="<%= p %>"></polygon></svg>')({p:e.points}));return d({$el:o("polygon",t),raw:!0})}function d(e){var t=(e=a.extend({},w.get,e)).$el[0],i=void 0!==t.pathSegList;return e.points=i?t.pathSegList:t.points,e.check={x:void 0!==e.ignoreX,y:void 0!==e.ignoreY},e.ignore={x:e.ignoreX,y:e.ignoreY},u(e)}function u(e){for(var t,i=[],n=0,o=e.points.numberOfItems;n<o;++n)(t=e.points.getItem(n)).orig=a.extend({},t),e.raw&&(t=a.extend({},t)),e.checkX&&t.x===e.ignoreX||e.checkY&&t.y===e.ignoreY||i.push(t);return i}function p(e){var t=(e=a.extend({},w.simplify,e)).string.split(" "),i=[];return a.each(t,function(t){(t=t.split(","))[0]=parseFloat(Number(t[0]).toFixed(e.decimal)),t[1]=parseFloat(Number(t[1]).toFixed(e.decimal)),t=t.join(","),i.push(t)}),i.join(" ")}function f(e){for(var t,i=h((e=a.extend({},w.explode,e)).type,e.time),n=v(e),o=0,r=e.points.length;o<r;++o)t=e.points[o],e.killTweens&&TweenLite.killTweensOf(t),TweenLite.to(t,e.time,{x:t.orig.x*e.scale,y:t.orig.y*e.scale,delay:i(o,e.delay),ease:e.ease});if(TweenLite.killDelayedCallsTo(e.onComplete),!e.points.length)return e.onComplete(e.onCompleteParams),!1;TweenLite.delayedCall(n,e.onComplete,e.onCompleteParams)}function h(e,t){if(0===t)return function(e,t){return 0};switch(e){case"random":return function(e,t){return e*(Math.random()*t)};case"linear":return function(e,t){return e*t};default:return function(e,t){return t}}}function v(e){if(0===e.time)return 0;switch(e.type){case"linear":return e.time+e.points.length*e.delay;default:return e.time+e.delay}}function m(e){var t,i;if((e=a.extend({},w.morph,e)).points.length>e.to.length)return console.warn("Points mismatch error"),!1;for(var n=0,o=e.points.length;n<o;++n)t=e.points[n],delete(i=a.extend({},e.to[n])).orig,e.killTweens&&TweenLite.killTweensOf(t),TweenLite.to(t,e.time,a.extend({},i,{ease:e.ease}));if(TweenLite.killDelayedCallsTo(e.onComplete),!e.points.length)return e.onComplete(e.onCompleteParams),!1;TweenLite.delayedCall(e.time,e.onComplete,e.onCompleteParams)}var g=e,w={parse:{type:"poly",points:""},get:{raw:!1},simplify:{decimal:2,string:""},explode:{points:[],killTweens:!1,scale:1,time:1,delay:0,type:"none",ease:Elastic.easeOut,onComplete:function(){},onCompleteParams:{}},morph:{points:[],to:[],killTweens:!1,time:1,ease:Elastic.easeOut,onComplete:function(){},onCompleteParams:{}}};g.addInitializer(function(){r()})}})},{}],247:[function(e,t,i){var n=e("./controllers/ScrollView");t.exports=app.module("Utils.Scroll",{startWithParent:!1,define:function(e,t,i,o,a,r){function s(){t.req.setHandler("utils:scroll:view:create",l)}function l(e){return new n(e)}e.addInitializer(function(){s()})}})},{"./controllers/ScrollView":256}],248:[function(e,t,i){var n=e("./controllers/Switch");t.exports=app.module("Utils.Switch",{startWithParent:!1,define:function(e,t,i,o,a,r){function s(){t.req.setHandler("utils:switch:create",l)}function l(e){return new n(e)}e.addInitializer(function(){s()})}})},{"./controllers/Switch":257}],249:[function(e,t,i){t.exports=app.module("Utils.Three",{startWithParent:!1,define:function(e,t,i,n,o,a){function r(){2===(d=window.devicePixelRatio||1)&&device.touch&&(d=1.5),c.rendererOptions.devicePixelRatio=d,screen.width>2100&&2===c.rendererOptions.devicePixelRatio?c.rendererOptions.devicePixelRatio=1.2:screen.width>=1920&&2===c.rendererOptions.devicePixelRatio&&(c.rendererOptions.devicePixelRatio=1.5)}function s(){t.req.setHandler("utils:three:renderer:create",l)}function l(e){var t;return e=a.extend({},c.renderer,e),e.options=a.extend({},c.rendererOptions,e.options),void 0!==e.uid&&void 0!==u[e.uid]?u[e.uid]:(t=device.webGL&&!e.forceCanvas?new THREE.WebGLRenderer(e.options):new THREE.CanvasRenderer(e.options),void 0!==e.uid&&(u[e.uid]=t),t)}var c={renderer:{forceCanvas:!1},rendererOptions:{alpha:!0,antialias:!0}},d=1,u={};e.addInitializer(function(){r(),s()})}})},{}],250:[function(e,t,i){var n=e("./controllers/Tilt");t.exports=app.module("Utils.Tilt",{startWithParent:!1,define:function(e,t,i,o,a,r){function s(){t.req.setHandler("utils:tilt:create",l)}function l(){return new n}e.addInitializer(function(){s()})}})},{"./controllers/Tilt":258}],251:[function(e,t,i){t.exports=Marionette.Controller.extend({initialize:function(e){function t(){a.loaded=!0,a.failed=!0,o.trigger("error")}var i,n,o=this,a={loaded:!1,failed:!1},r={src:"",timeout:50};o.load=function(){(i=app.request("utils:loader:image:search",o.src)).found&&(a.loaded=!0,o.trigger("complete",i.image)),(n=new Image).onload=function(e){if(a.loaded)return!1;if("naturalHeight"in this){if(this.naturalHeight+this.naturalWidth===0)return void this.onerror()}else if(this.width+this.height===0)return void this.onerror();app.cmd.execute("utils:loader:image:store",{src:o.src,image:n}),a.loaded=!0,TweenLite.killDelayedCallsTo(t),o.trigger("complete",n)},n.onerror=function(e){console.warn("Missing image asset:"+o.src),a.loaded=!0,a.failed=!0,TweenLite.killDelayedCallsTo(t),o.trigger("error")},n.src=o.src,TweenLite.delayedCall(o.timeout,t)},_.extend(o,r,e)}})},{}],252:[function(e,t,i){t.exports=Marionette.Controller.extend({initialize:function(e){function t(){a.current++,a.current===a.total&&(a.failed?n.trigger("error"):n.trigger("complete"))}function i(){a.current++,a.failed=!0}var n=this,o=[],a={current:0,total:0,loaded:!1,failed:!1},r={list:[],returnType:"src"};n.load=function(){if(o.length)for(var e=0,t=o.length;e<t;++e)o[e].loaded||o[e].loader.load();else n.trigger("complete")},_.extend(n,r,e),function(){for(var e,r=0,s=n.list.length;r<s;++r)(e=app.request("utils:loader:image:load",{src:n.list[r]})).on("complete",t).on("error",i),o.push({loaded:!1,loader:e});a.current=0,a.total=o.length}()}})},{}],253:[function(e,t,i){t.exports=Marionette.Controller.extend({initialize:function(e){function t(){null!==e.queue&&void 0!==e.queue&&(e.queue.stop(),e.queue=null)}function i(){for(var e=0,t=c.length;e<t;++e)o(e)}function n(){o(d.current)}function o(t){clearTimeout(c[t].delayTimeout),c[t].delayTask=setTimeout(function(){if(!d.active)return!1;c[t].run(a,c[t].data)},e.sync?e.delay:e.delay*t)}function a(t){if(!d.active)return!1;s.trigger("task:complete",d.current,d.total),s.trigger("task:complete:callback",t),d.current++,d.current>=d.total&&d.active?r():e.sync&&d.active&&o(d.current)}function r(){d.active=!1,s.trigger("complete")}var s=this,l={queue:null,list:[],sync:!1,delay:0,debug:!1},c=[],d={active:!1,current:0,total:0};s.start=function(){if(!c.length)return r(),!1;d.active=!0,e.sync?n():i()},s.stop=function(){d.active=!1},function(){t();for(var i=0,n=(e=_.extend(l,e)).list.length;i<n;++i)"object"==typeof e.list[i]?c.push({run:e.list[i].fn,data:e.list[i].data,delayTimeout:null}):c.push({run:e.list[i],data:{},delayTimeout:null});d.total=c.length}()}})},{}],254:[function(e,t,i){t.exports=Marionette.Controller.extend({initialize:function(e){var t=this,i=0,n=0,o=0,a={minRatio:.5,width:1024,height:768,debug:!1},r=[];t.addItem=function(e){r.push(e),t.update()},t.update=function(e,a){e=e||i,a=a||n,o=Math.max(t.minRatio,Math.min(e/t.width,a/t.height));for(var s=0,l=r.length;s<l;++s)r[s].x=r[s].y=o;i=e,n=a},_.extend(t,a,e),i=t.width,n=t.height}})},{}],255:[function(e,t,i){t.exports=Marionette.Controller.extend({initialize:function(e){function t(e){var t,i=[];return $.each(e,function(){t=$(this).attr("coords").split(","),i.push({$el:$(this),coords:t})}),i}function i(){app.vent.on("resize:app",o),o()}function n(){app.vent.off("resize:app",o)}function o(){c.status.active&&(d.width=s.width(),d.height=s.height(),p.scaleWidth=d.width/c.baseWidth,p.scaleHeight=d.height/c.baseHeight,p.scaleWidth===p.prevScaleWidth&&p.scaleHeight===p.prevScaleHeight||(a(),p.prevScaleWidth=p.scaleWidth,p.prevScaleHeight=p.scaleHeight))}function a(){for(var e="",t=0,i=p.areas.length;t<i;++t)e=r(p.areas[t].coords),p.areas[t].$el.attr("coords",e)}function r(e){for(var t=[],i=0,n=e.length;i<n;++i)i%2==0?t.push(Math.round(Number(e[i])*p.scaleWidth)):t.push(Math.round(Number(e[i])*p.scaleHeight));return t.toString()}var s,l,c=this,d={width:100,height:100},u={$el:"",baseWidth:100,baseHeight:100},p={areas:{},numAreas:{},useListeners:!1,scaleWidth:-1,scaleHeight:-1,prevScaleWidth:null,prevScaleHeight:-1};c.status={active:!1},c.update=o,c.start=function(){c.status.active=!0,c.useListeners&&i()},c.stop=function(){c.status.active=!1,c.useListeners&&n(),prevScaleWidth=prevScaleHeight=null},_.extend(c,u,e),s=c.$el,l=c.$map,p.area=$("area",l),p.numAreas=p.area.length,p.areas=t(p.area)}})},{}],256:[function(e,t,i){t.exports=Marionette.Controller.extend({initialize:function(e){function t(){clearTimeout(c.linkEnable),l.trigger("scrollStart"),s.addClass("scrolling"),s.on("click","a",o),s.addClass("cursor-grab")}function i(){s.removeClass("cursor-grab"),clearTimeout(c.linkEnable),c.linkEnable=setTimeout(function(){s.off("click","a",o),s.removeClass("scrolling"),l.trigger("scrollEnd")},200)}function n(e,t){l.trigger("scrollMove")}function o(e){return e.stopPropagation(),!1}var a,r,s,l=this,c={linkEnable:null},d={preventDefault:!device.touch,specialPreventDefault:!1},u={active:!1};l.start=function(){u.active||((a=new IScroll("#"+r,e)).on("scrollStart",t).on("scrollEnd",i).on("scrollCancel",i).on("scrollPositionChanged",n),u.active=!0)},l.stop=function(){u.active&&(a.off("scrollStart",t).off("scrollEnd",i).off("scrollCancel",i).off("scrollPositionChanged",n),a.destroy(),u.active=!1)},l.scrollTo=function(e,t,i,n){u.active&&a.scrollTo(e,t,i,n)},l.refresh=function(){u.active&&a.refresh()},e=_.extend({},d,e),r="scroll-"+app.getUID(),(s=e.$el).attr("id",r),e.specialPreventDefault&&s.on("touchmove",function(e){e.preventDefault()}),$(">",s).css({backfaceVisibility:"hidden",userSelect:"none"})}})},{}],257:[function(e,t,i){t.exports=Marionette.Controller.extend({initialize:function(e){function t(e){var t=this,o={off:null};t.active=!0,t.on=function(){return clearTimeout(o.off),t.active||(t.active=!0,i()),t},t.off=function(){return clearTimeout(o.off),t.active&&(t.active=!1,n()),t},t.softOff=function(e){e=e||300,clearTimeout(o.off),o.off=setTimeout(function(){t.off()},e)}}function i(){l++,r.isOn=!0}function n(){l--}function o(){clearTimeout(s),r.isOn=l>0,r.debug&&a(),s=setTimeout(o,r.interval)}function a(){_.each(r.s,function(e,t){console.log(t+": "+(e.active?"on":"off"))})}var r=this,s=null,l=0,c={debug:!1,interval:1e3};r.isOn=!0,r.s={},r.createSwitch=function(e){var i=void 0!==e?e:"switch-"+app.getUID();return r.s[i]=new t(r),l+=1,r.s[i]},r.start=function(){r.isOn=!0,clearTimeout(s),s=setTimeout(o,r.interval)},r.stop=function(){r.isOn=!0,clearTimeout(s)},_.extend(r,c,e),r.interval=Math.max(100,r.interval)}})},{}],258:[function(e,t,i){t.exports=Marionette.Controller.extend({initialize:function(e){function t(){v.mode=device.touch&&device.orientation?"orientation":"mouse","orientation"===v.mode?(m.addEvents=n,m.removeEvents=o):(m.addEvents=c,m.removeEvents=d)}function i(e){w=_.extend(g,e)}function n(){$(window).bind("orientationchange.tilt",r),$(window).trigger("orientationchange"),window.addEventListener("deviceorientation",a,!1),s()}function o(){$(window).unbind("orientationchange.tiltr"),window.removeEventListener("deviceorientation",a,!1)}function a(e){l(e,m.equalize.instant)}function r(){switch(window.orientation){case-90:m.negative=!0,m.orientation="landscape";break;case 90:m.negative=!1,m.orientation="landscape";break;case 180:m.negative=!0,m.orientation="portrait";break;default:m.negative=!1,m.orientation="portrait"}s()}function s(){m.equalize.instant=!0,clearTimeout(m.equalize.wait),m.equalize.wait=setTimeout(function(){m.equalize.instant=!1},1e3),m.equalize.y=Math.round(m.y)}function l(e,t){"portrait"===m.orientation?(m.x=Math.round(m.negative?-e.gamma:e.gamma),m.y=Math.round(m.negative?e.beta:-e.beta)):(m.x=Math.round(m.negative?-e.beta:e.beta),m.y=Math.round(m.negative?-e.gamma:e.gamma)),m.x*=12,m.y*=12,p(t)}function c(){$(window).bind("mousemove.tilt",$.throttle(1,u))}function d(){$(window).unbind("mousemove.tilt")}function u(e){h.centerX=.5*app.win.width,h.centerY=.5*app.win.height,m.x=-(e.pageX-h.centerX),m.y=e.pageY-h.centerY,p()}function p(e){m.final.x=m.x-m.equalize.x,m.final.y=m.y-m.equalize.y,m.scale=w.radius/Math.sqrt(Math.pow(m.final.x,2)+Math.pow(m.final.y,2)),m.scale<1&&(m.final.x=m.final.x*m.scale,m.final.y=m.final.y*m.scale),device.touch&&(m.final.y=Math.max(-360,Math.min(360,m.final.y)),m.final.x=Math.max(-300,Math.min(360,m.final.x))),w.fn({x:m.final.x,y:m.final.y})}var f=this,h={},v={mode:"none"},m={start:[],stop:[],negative:!1,x:0,y:0,equalize:{x:0,y:0,instant:!1,wait:null},final:{x:0,y:0},scale:1},g={radius:1e3,equalizeY:!1,fn:function(){console.warn("tilt knock knock")}},w={};f.status={active:!1},f.start=function(e){i(e),f.status.active||m.addEvents(),f.status.active=!0},f.stop=function(){f.status.active&&m.removeEvents(),f.status.active=!1},t()}})},{}]},{},[2]);